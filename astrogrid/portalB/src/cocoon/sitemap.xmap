<?xml version="1.0" encoding="UTF-8"?>
<!--+
    | <cvs:source>$Source: /Users/pharriso/Work/ag/repo/git/astrogrid-mirror/astrogrid/portalB/src/cocoon/Attic/sitemap.xmap,v $</cvs:source>
    | <cvs:date>$Author: rtp $</cvs:date>
    | <cvs:author>$Date: 2003/09/10 16:04:15 $</cvs:author>
    | <cvs:version>$Revision: 1.13 $</cvs:version>
    | <cvs:log>
    | $Log: sitemap.xmap,v $
    | Revision 1.13  2003/09/10 16:04:15  rtp
    | Add registry browser and adn=min pages.
    |
    | Revision 1.12  2003/09/05 08:21:44  KevinBenson
    | Okay did a few things here.  First the topcat plug in had a small xsp mistake causing the select boxes to have some unneeded data in it.
    | Also made a common QueryAction.java file that will just set the current session Credential in the Hashmap so it can be displayed on all pages.
    | Modified the sitemap.xmap to verify the credential is working. I still need to go back and correct some things in it.
    |
    | Revision 1.11  2003/08/26 10:43:18  KevinBenson
    | small things to have the community prototype going
    |
    | Revision 1.10  2003/08/25 06:36:41  KevinBenson
    | added the entry for the prototype of the gui for administration.
    |
    | Revision 1.9  2003/07/25 08:13:56  KevinBenson
    | Okay DataQuery is now under cocoon.  Yeah.
    |
    | Revision 1.8  2003/07/24 15:31:23  KevinBenson
    | a few bugs fixed on this integration of dataquery to cocoon
    |
    | Revision 1.7  2003/07/24 11:29:27  KevinBenson
    | A new DataQuery for cocoon still has a few problems, but it is getting their
    |
    | Revision 1.6  2003/06/30 12:42:31  dave
    | Added user name session attribute
    |
    | Revision 1.5  2003/06/30 00:04:53  dave
    | Added initial astrogrid style
    |
    | Revision 1.4  2003/06/29 02:45:22  dave
    | Fixed display styles in explorer and add VOTable transform
    |
    | Revision 1.3  2003/06/27 03:17:38  dave
    | Simplified page path in sitemap
    |
    | Revision 1.2  2003/06/27 02:43:18  dave
    | Added images to tree nodes
    |
    | Revision 1.1  2003/06/26 14:15:10  dave
    | Added explorer pages and actions to Cocoon
    |
    | </cvs:log>
    |
    | Sub sitemap for Astrogrid services.
    |
    +-->
<map:sitemap xmlns:map="http://apache.org/cocoon/sitemap/1.0">
<!-- =========================== Components ================================ -->

   <map:components>
      <map:generators   default="file"/>
      <map:transformers default="xslt"/>
      <map:readers      default="resource"/>
      <map:serializers  default="html"/>
      <map:matchers     default="wildcard"/>
      <map:selectors    default="browser"/>

      <map:actions>
        <map:action name="astrogrid" src="org.astrogrid.portal.cocoon.common.AstrogridAction"/>
         <map:action name="astrogrid-explorer" src="org.astrogrid.portal.cocoon.explorer.ExplorerAction"/>
         <map:action name="astrogrid-query" src="org.astrogrid.portal.cocoon.query.QueryAction"/>
         <map:action name="astrogrid-admin" src="org.astrogrid.portal.cocoon.community.AdministrationAction"/>
         <map:action name="astrogrid-credentials" src="org.astrogrid.portal.cocoon.community.CredentialAction"/>     
      </map:actions>
      
   </map:components>

<!-- =========================== Views =================================== -->

   <map:views>
      <!-- Original XML displayed as XML -->
      <map:view name="000" from-label="000">
         <map:serialize type="xml"/>
      </map:view>
      <!-- Original XML, displayed as XML/HTML -->
      <map:view name="001" from-label="001">
         <!-- Convert into XML/HTML -->
         <map:transform src="common/xsl/xml-html.xsl"/>
         <map:serialize type="html"/>
      </map:view>
      <!-- XML processed into a page, displayed as XML/HTML -->
      <map:view name="002" from-label="002">
         <!-- Convert into XML/HTML -->
         <map:transform src="common/xsl/xml-html.xsl"/>
         <map:serialize type="html"/>
      </map:view>
      <!-- Page wrapped in our template, displayed as XML/HTML -->
      <map:view name="003" from-label="003">
         <!-- Convert into XML/HTML -->
         <map:transform src="common/xsl/xml-html.xsl"/>
         <map:serialize type="html"/>
      </map:view>
   </map:views>

<!-- =========================== Resources ================================= -->

   <map:resources>
   </map:resources>

<!-- =========================== Pipelines ================================= -->

   <map:pipelines>
      <map:pipeline>

         <!-- Explorer page -->
         <map:match pattern="agmyspace.html">
            <!-- Call our explorer action -->
            <map:act type="astrogrid-explorer">
               <!-- Set the session attribute to check for the user name -->
               <map:parameter name="user-param"  value="user"/>
               <!-- Generate our page XML -->
               <map:generate src="explorer/xsp/explorer.xsp" type="serverpages" label="000, 001"/>
               <!-- Convert the data into a page -->
               <map:transform src="explorer/xsl/explorer.xsl" label="002">
                  <!-- Add the action params -->
                  <map:parameter name="action"  value="{action}"/>
                  <map:parameter name="confirm" value="{confirm}"/>
                  <!-- Add the explorer page names -->
                  <map:parameter name="explorer-page" value="agmyspace.html"/>
                  <map:parameter name="votable-page"  value="agvotable.html"/>
               </map:transform>
            </map:act>
            <!-- Wrap the page in our HTML template -->
            <map:transform src="common/xsl/astrogrid.xsl" label="003">
               <!-- Add the explorer page names -->
               <map:parameter name="explorer-page" value="agmyspace.html"/>
               <map:parameter name="votable-page"  value="agvotable.html"/>
               <!-- Add the rest of the page names -->
               <map:parameter name="home-page"     value="agindex.html"/>
               <map:parameter name="current-page"  value="agmyspace.html"/>               
               <map:parameter name="help-page"     value="agmyspacehelp.html"/>
               <map:parameter name="registry-page" value="agregistry.html"/>
               <map:parameter name="query-page"    value="agdataquery.html"/>
               <map:parameter name="monitor-page"  value="agjobmonitor.html"/>
               <map:parameter name="tools-page"    value="agtools.html"/>
               <map:parameter name="logout-page"   value="aglogout.html"/>
            </map:transform>
            <!-- Serialize as HTML -->
            <map:serialize type="html"/>
         </map:match>
         
         <!-- DataQuery page -->
         <map:match pattern="agdataquery.html">
            <!-- Call our query action -->
            <map:act type="astrogrid-query">
               <!-- Set the session attribute to check for the user name -->
               <map:parameter name="user-param"  value="user"/>
               <!-- Generate our page XML -->
               <map:generate src="query/xsp/query.xsp" type="serverpages" label="000, 001"/>
               <!-- Convert the data into a page -->
               <map:transform src="query/xsl/query.xsl" label="002">
                  <!-- Add the action params -->
                  <map:parameter name="QueryString" value="{QueryString}"/>
                  <map:parameter name="Script" value="{Script}"/>
                  <map:parameter name="QueryStringSent" value="{QueryStringSent}"/>
                  <map:parameter name="ErrorMessage" value="{ErrorMessage}"/>
                  <map:parameter name="LastWebCall" value="{LastWebServiceXML}"/>
               </map:transform>
            </map:act>
            <!-- Wrap the page in our HTML template -->
            <map:transform src="common/xsl/astrogrid.xsl" label="003">
               <!-- Add the rest of the page names -->
               <map:parameter name="current-page"  value="agdataquery.html"/>
               <map:parameter name="query-page"    value="agdataquery.html"/>
               <map:parameter name="myspace-page"  value="agmyspace.html"/>
               <map:parameter name="home-page"     value="agindex.html"/>
               <map:parameter name="help-page"     value="agdataqueryhelp.html"/>
               <map:parameter name="registry-page" value="agregistry.html"/>
               <map:parameter name="monitor-page"  value="agjobmonitor.html"/>
               <map:parameter name="tools-page"    value="agtools.html"/>
               <map:parameter name="logout-page"   value="aglogout.html"/>
            </map:transform>
            <!-- Serialize as HTML -->
            <map:serialize type="html"/>
         </map:match>
         
         <!-- Administratin page -->
         <map:match pattern="agadministration.html">
            <!-- Call our query action -->
            <map:act type="astrogrid-admin">
               <!-- Set the session attribute to check for the user name -->
               <map:parameter name="user-param"  value="user"/>
               <!-- Generate our page XML -->
               <map:generate src="community/xsp/administration.xsp" type="serverpages" label="000, 001"/>
               <!-- Convert the data into a page -->
               <map:transform src="community/xsl/administration.xsl" label="002">
                  <map:parameter name="action" value="{action}"/>
                  <map:parameter name="ErrorMessage" value="{ErrorMessage}"/>
               </map:transform>
            </map:act>
            <!-- Wrap the page in our HTML template -->
            <map:transform src="common/xsl/astrogrid.xsl" label="003">
               <!-- Add the rest of the page names -->
               <map:parameter name="current-page"  value="agadministration.html"/>
               <map:parameter name="query-page"    value="agdataquery.html"/>
               <map:parameter name="myspace-page"  value="agmyspace.html"/>
               <map:parameter name="home-page"     value="agindex.html"/>
               <map:parameter name="help-page"     value="agdataqueryhelp.html"/>
               <map:parameter name="registry-page" value="agregistry.html"/>
               <map:parameter name="monitor-page"  value="agjobmonitor.html"/>
               <map:parameter name="tools-page"    value="agtools.html"/>
               <map:parameter name="admin-page"    value="agadministration.html"/>
               <map:parameter name="logout-page"   value="aglogout.html"/>
            </map:transform>
            <!-- Serialize as HTML -->
            <map:serialize type="html"/>
         </map:match>
         
         <!-- Credentials page -->
         <map:match pattern="agcredentials.html">
            <!-- Call our query action -->
            <map:act type="astrogrid-credentials">
               <!-- Set the session attribute to check for the user name -->
               <map:parameter name="user-param"  value="user"/>
               <!-- Generate our page XML -->
               <map:generate src="community/xsp/credentials.xsp" type="serverpages" label="000, 001"/>
               <!-- Convert the data into a page -->
               <map:transform src="community/xsl/credentials.xsl" label="002">
                  <map:parameter name="credential" value="{credential}"/>
               </map:transform>
            </map:act>
            <!-- Wrap the page in our HTML template -->
            <map:transform src="common/xsl/astrogrid.xsl" label="003">
               <!-- Add the rest of the page names -->
               <map:parameter name="current-page"  value="agcredentials.html"/>
               <map:parameter name="query-page"    value="agdataquery.html"/>
               <map:parameter name="myspace-page"  value="agmyspace.html"/>
               <map:parameter name="home-page"     value="agindex.html"/>
               <map:parameter name="help-page"     value="agdataqueryhelp.html"/>
               <map:parameter name="registry-page" value="agregistry.html"/>
               <map:parameter name="monitor-page"  value="agjobmonitor.html"/>
               <map:parameter name="tools-page"    value="agtools.html"/>
               <map:parameter name="admin-page"    value="agadministration.html"/>
               <map:parameter name="logout-page"   value="aglogout.html"/>
            </map:transform>
            <!-- Serialize as HTML -->
            <map:serialize type="html"/>
         </map:match>
         
         <!-- VoTable data pages -->
         <map:match pattern="agvotable.html">
            <map:act type="request">
               <map:parameter name="parameters" value="true"/>
               <map:generate src="{data}"/>
               <!-- Convert the VoTable data into HTML -->
               <map:transform src="explorer/xsl/votable.xsl">
                  <map:parameter name="explorer-page" value="agmyspace.html"/>
                  <map:parameter name="votable-page"  value="agvotable.html"/>
               </map:transform>
               <!-- Wrap the page in our HTML template -->
               <map:transform src="common/xsl/astrogrid.xsl" label="003">
                  <!-- Add the explorer page names -->
                  <map:parameter name="explorer-page" value="agmyspace.html"/>
                  <map:parameter name="votable-page"  value="agvotable.html"/>
                  <!-- Add the rest of the page names -->
                  <map:parameter name="home-page"     value="agindex.html"/>
                  <map:parameter name="help-page"     value="agmyspacehelp.html"/>
                  <map:parameter name="registry-page" value="agregistry.html"/>
                  <map:parameter name="query-page"    value="agdataquery.html"/>
                  <map:parameter name="monitor-page"  value="agjobmonitor.html"/>
                  <map:parameter name="tools-page"    value="agtools.html"/>
                  <map:parameter name="logout-page"   value="aglogout.html"/>
               </map:transform>
               <!-- Serialize as HTML -->
               <map:serialize type="html"/>
            </map:act>
         </map:match>

            <!-- Registry browser and admin pages -->
         <map:match pattern="agregistry.html">
             <map:mount uri-prefix="registry" src="registry/sitemap.xmap"
                          check-reload="yes" reload-method="synchron"/>
         </map:match>


         <!-- Site images -->
         <map:match pattern="*.gif">
            <map:read src="images/{1}.gif" mime-type="images/gif"/>
         </map:match>
         <map:match pattern="*.png">
            <map:read src="images/{1}.png" mime-type="images/png"/>
         </map:match>

         <!-- Explorer images -->
         <map:match pattern="explorer/images/*.gif">
            <map:read src="explorer/images/{1}.gif" mime-type="images/gif"/>
         </map:match>

         <!-- HTML pages -->
         <map:match pattern="*.html">
            <map:read mime-type="text/html" src="html/{1}.html"/>
         </map:match>

         <!-- VoTable test data -->
         <map:match pattern="explorer/data/*">
            <!-- Generate our XML data -->
            <map:generate src="explorer/xml/votable.{1}.xml" label="000, 001"/>
            <!-- Convert the VoTable data into HTML -->
            <map:transform src="explorer/xsl/votable.xsl" label="002"/>
            <!-- Wrap the page in our HTML template -->
            <map:transform src="common/xsl/astrogrid.xsl" label="003"/>
            <!-- Serialize as HTML -->
            <map:serialize type="html"/>
         </map:match>

         <!-- MySpace test data -->
         <map:match pattern="explorer/myspace/*">
            <!-- Generate our XML data -->
            <map:generate src="/var/projects/astrogrid/astrogrid/portalB/build/myspace/live/service/temp/{1}" label="000, 001"/>
            <!-- Serialize as XML -->
            <map:serialize type="xml"/>
         </map:match>

         <!-- Session attribute test -->
         <map:match pattern="session">
            <!-- Generate our XML data -->
            <map:generate src="explorer/xsp/session.xsp" type="serverpages" label="000, 001"/>
            <!-- Serialize as XML -->
            <map:serialize type="html"/>
         </map:match>

         <!-- Explorer test -->
         <map:match pattern="explorer">
            <!-- Call our explorer action -->
            <map:act type="astrogrid-explorer">
               <!-- Set the session attribute to check for the user name -->
               <map:parameter name="user-param"  value="user"/>
               <!-- Generate our page XML -->
               <map:generate src="explorer/xsp/explorer.xsp" type="serverpages" label="000, 001"/>
               <!-- Convert the data into a page -->
               <map:transform src="explorer/xsl/explorer.xsl" label="002">
                  <!-- Add the action params -->
                  <map:parameter name="action"  value="{action}"/>
                  <map:parameter name="confirm" value="{confirm}"/>
                  <!-- Add the explorer page names -->
                  <map:parameter name="explorer-page" value="explorer"/>
                  <map:parameter name="votable-page"  value="votable"/>
               </map:transform>
            </map:act>
            <!-- Wrap the page in our HTML template -->
            <map:transform src="common/xsl/template.xsl" label="003">
               <!-- Add the explorer page names -->
               <map:parameter name="explorer-page" value="explorer"/>
               <map:parameter name="votable-page"  value="votable"/>
            </map:transform>
            <!-- Serialize as HTML -->
            <map:serialize type="html"/>
         </map:match>

      </map:pipeline>
   </map:pipelines>
</map:sitemap>
