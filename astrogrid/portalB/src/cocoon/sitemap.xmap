<?xml version="1.0" encoding="UTF-8"?>
<!--+
    | <cvs:source>$Source: /Users/pharriso/Work/ag/repo/git/astrogrid-mirror/astrogrid/portalB/src/cocoon/Attic/sitemap.xmap,v $</cvs:source>
    | <cvs:date>$Author: dave $</cvs:date>
    | <cvs:author>$Date: 2003/06/27 02:43:18 $</cvs:author>
    | <cvs:version>$Revision: 1.2 $</cvs:version>
    | <cvs:log>
    | $Log: sitemap.xmap,v $
    | Revision 1.2  2003/06/27 02:43:18  dave
    | Added images to tree nodes
    |
    | Revision 1.1  2003/06/26 14:15:10  dave
    | Added explorer pages and actions to Cocoon
    |
    | </cvs:log>
    |
    | Sub sitemap for Astrogrid services.
    |
    +-->
<map:sitemap xmlns:map="http://apache.org/cocoon/sitemap/1.0">
<!-- =========================== Components ================================ -->

	<map:components>
		<map:generators   default="file"/>
		<map:transformers default="xslt"/>
		<map:readers      default="resource"/>
		<map:serializers  default="html"/>
		<map:matchers     default="wildcard"/>
		<map:selectors    default="browser"/>

		<map:actions>
			<map:action name="astrogrid-explorer" src="org.astrogrid.portal.cocoon.explorer.ExplorerAction"/>
		</map:actions>
	</map:components>

<!-- =========================== Views =================================== -->

	<map:views>
	</map:views>

<!-- =========================== Resources ================================= -->

	<map:resources>
	</map:resources>

<!-- =========================== Pipelines ================================= -->

	<map:pipelines>
		<map:pipeline>

			<!-- Test page -->
			<map:match pattern="test">
				<!-- Generate our test page -->
				<map:generate  src="common/xsp/test.xsp" type="serverpages"/>
				<!-- Serialize as HTML -->
				<map:transform src="common/xsl/xml-html.xsl"/>
				<map:serialize type="html"/>
			</map:match>

			<!-- Explorer pages -->
			<map:match pattern="explorer**">

				<!-- Index page redirect -->
				<map:match pattern="explorer">
					<map:redirect-to uri="explorer/index"/>
				</map:match>

				<!-- Main pages -->
				<map:match pattern="explorer/*.000">
					<!-- Call our explorer action -->
					<map:act type="astrogrid-explorer">
						<!-- Generate our page XML -->
						<map:generate  src="explorer/xsp/{../1}.xsp" type="serverpages"/>
					</map:act>
					<!-- Serialize as HTML -->
					<map:transform src="common/xsl/xml-html.xsl"/>
					<map:serialize type="html"/>
				</map:match>

				<map:match pattern="explorer/*.001">
					<!-- Call our explorer action -->
					<map:act type="astrogrid-explorer">
						<!-- Generate our page XML -->
						<map:generate  src="explorer/xsp/{../1}.xsp" type="serverpages"/>
						<!-- Convert the data into a page -->
						<map:transform src="explorer/xsl/{../1}.xsl">
							<map:parameter name="action"  value="{action}"/>
							<map:parameter name="confirm" value="{confirm}"/>
						</map:transform>
					</map:act>
					<!-- Serialize as HTML -->
					<map:transform src="common/xsl/xml-html.xsl"/>
					<map:serialize type="html"/>
				</map:match>

				<map:match pattern="explorer/*.002">
					<!-- Call our explorer action -->
					<map:act type="astrogrid-explorer">
						<!-- Generate our page XML -->
						<map:generate  src="explorer/xsp/{../1}.xsp" type="serverpages"/>
						<!-- Convert the data into a page -->
						<map:transform src="explorer/xsl/{../1}.xsl">
							<map:parameter name="action"  value="{action}"/>
							<map:parameter name="confirm" value="{confirm}"/>
						</map:transform>
					</map:act>
					<!-- Wrap the page in our HTML template -->
					<map:transform src="common/xsl/template.xsl"/>
					<!-- Encode our href URLs -->
					<map:transform type="encodeURL"/>
					<!-- Serialize as HTML -->
					<map:transform src="common/xsl/xml-html.xsl"/>
					<map:serialize type="html"/>
				</map:match>

				<map:match pattern="explorer/*.003">
					<!-- Call our explorer action -->
					<map:act type="astrogrid-explorer">
						<!-- Generate our page XML -->
						<map:generate  src="explorer/xsp/{../1}.xsp" type="serverpages"/>
						<!-- Convert the data into a page -->
						<map:transform src="explorer/xsl/{../1}.xsl">
							<map:parameter name="action"  value="{action}"/>
							<map:parameter name="confirm" value="{confirm}"/>
						</map:transform>
					</map:act>
					<!-- Wrap the page in our HTML template -->
					<map:transform src="common/xsl/template.xsl"/>
					<!-- Encode our href URLs -->
					<map:transform type="encodeURL"/>
					<!-- Serialize as HTML -->
					<map:serialize type="html"/>
				</map:match>

				<map:match pattern="explorer/images/*.gif">
					<map:read src="explorer/images/{1}.gif" mime-type="images/gif"/>
				</map:match>

			</map:match>

		</map:pipeline>
	</map:pipelines>
</map:sitemap>
