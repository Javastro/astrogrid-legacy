<?xml version="1.0" encoding="UTF-8"?>
<!--+
    | <cvs:source>$Source: /Users/pharriso/Work/ag/repo/git/astrogrid-mirror/astrogrid/portalB/src/cocoon/Attic/sitemap.xmap,v $</cvs:source>
    | <cvs:date>$Author: dave $</cvs:date>
    | <cvs:author>$Date: 2003/06/29 02:45:22 $</cvs:author>
    | <cvs:version>$Revision: 1.4 $</cvs:version>
    | <cvs:log>
    | $Log: sitemap.xmap,v $
    | Revision 1.4  2003/06/29 02:45:22  dave
    | Fixed display styles in explorer and add VOTable transform
    |
    | Revision 1.3  2003/06/27 03:17:38  dave
    | Simplified page path in sitemap
    |
    | Revision 1.2  2003/06/27 02:43:18  dave
    | Added images to tree nodes
    |
    | Revision 1.1  2003/06/26 14:15:10  dave
    | Added explorer pages and actions to Cocoon
    |
    | </cvs:log>
    |
    | Sub sitemap for Astrogrid services.
    |
    +-->
<map:sitemap xmlns:map="http://apache.org/cocoon/sitemap/1.0">
<!-- =========================== Components ================================ -->

	<map:components>
		<map:generators   default="file"/>
		<map:transformers default="xslt"/>
		<map:readers      default="resource"/>
		<map:serializers  default="html"/>
		<map:matchers     default="wildcard"/>
		<map:selectors    default="browser"/>

		<map:actions>
			<map:action name="astrogrid-explorer" src="org.astrogrid.portal.cocoon.explorer.ExplorerAction"/>
		</map:actions>
	</map:components>

<!-- =========================== Views =================================== -->

	<map:views>

		<!-- Original XML displayed as XML -->
		<map:view name="000" from-label="000">
			<map:serialize type="xml"/>
		</map:view>

		<!-- Original XML, displayed as XML/HTML -->
		<map:view name="001" from-label="001">
			<!-- Convert into XML/HTML -->
			<map:transform src="common/xsl/xml-html.xsl"/>
			<map:serialize type="html"/>
		</map:view>

		<!-- XML processed into a page, displayed as XML/HTML -->
		<map:view name="002" from-label="002">
			<!-- Convert into XML/HTML -->
			<map:transform src="common/xsl/xml-html.xsl"/>
			<map:serialize type="html"/>
		</map:view>

		<!-- Page wrapped in our template, displayed as XML/HTML -->
		<map:view name="003" from-label="003">
			<!-- Convert into XML/HTML -->
			<map:transform src="common/xsl/xml-html.xsl"/>
			<map:serialize type="html"/>
		</map:view>
	</map:views>

<!-- =========================== Resources ================================= -->

	<map:resources>
	</map:resources>

<!-- =========================== Pipelines ================================= -->

	<map:pipelines>
		<map:pipeline>

			<!-- Explorer pages -->
			<map:match pattern="explorer**">

				<!-- Explorer page -->
				<map:match pattern="explorer">
					<!-- Call our explorer action -->
					<map:act type="astrogrid-explorer">
						<!-- Generate our page XML -->
						<map:generate src="explorer/xsp/explorer.xsp" type="serverpages" label="000, 001"/>
						<!-- Convert the data into a page -->
						<map:transform src="explorer/xsl/explorer.xsl" label="002">
							<map:parameter name="action"  value="{action}"/>
							<map:parameter name="confirm" value="{confirm}"/>
						</map:transform>
					</map:act>
					<!-- Wrap the page in our HTML template -->
					<map:transform src="common/xsl/template.xsl" label="003"/>
					<!-- Serialize as HTML -->
					<map:serialize type="html"/>
				</map:match>

				<!-- Explorer images -->
				<map:match pattern="explorer/images/*.gif">
					<map:read src="explorer/images/{1}.gif" mime-type="images/gif"/>
				</map:match>

				<!-- VoTable view pages -->
				<map:match pattern="explorer/view/http:/**">
					<map:generate src="http://{1}"/>
					<!-- Convert the VoTable data into HTML -->
					<map:transform src="explorer/xsl/votable.xsl" label="002"/>
					<!-- Wrap the page in our HTML template -->
					<map:transform src="common/xsl/template.xsl" label="003"/>
					<!-- Serialize as HTML -->
					<map:serialize type="html"/>
				</map:match>

				<!-- VoTable test data -->
				<map:match pattern="explorer/data/*">
					<!-- Generate our XML data -->
					<map:generate src="explorer/xml/votable.{1}.xml" label="000, 001"/>
					<!-- Convert the VoTable data into HTML -->
					<map:transform src="explorer/xsl/votable.xsl" label="002"/>
					<!-- Wrap the page in our HTML template -->
					<map:transform src="common/xsl/template.xsl" label="003"/>
					<!-- Serialize as HTML -->
					<map:serialize type="html"/>
				</map:match>

				<!-- MySpace data -->
				<map:match pattern="explorer/myspace/*">
					<!-- Generate our XML data -->
					<map:generate src="/var/projects/astrogrid/astrogrid/portalB/build/myspace/live/service/temp/{1}" label="000, 001"/>
					<!-- Serialize as XML -->
					<map:serialize type="xml"/>
				</map:match>

			</map:match>

		</map:pipeline>
	</map:pipelines>
</map:sitemap>
