<?xml version="1.0" encoding="UTF-8"?>
<!-- edited with XMLSPY v2004 rel. 3 U (http://www.xmlspy.com) by Paul Harrison (Jodrell Bank Observatory) -->
<CommandLineExecutionControllerConfig xmlns="http://www.astrogrid.org/schema/CommonExecutionArchitectureBase/v1" xmlns:agpd="http://www.astrogrid.org/schema/AGParameterDefinition/v1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	
	
	<!-- put the real applications here - note that they are not autodeployed, so the paths are fixed strings - this is more of a registry test....-->
	<Application name="REGAUTHORITY.SExtractor" instanceClass="org.astrogrid.applications.commandline.sextractor.SExtractor">
		<!--This is the application to concentrate on for the end of this iteration-->
		<Parameters>
			<!-- temporarily turn the images into direct file references - for performance during the AVO demo -->
			<CmdLineParameterDefn name="DetectionImage" type="binary" commandPosition="1"  fileRef="false">
				<agpd:UI_Name>Detection Image</agpd:UI_Name>
				<agpd:UI_Description>The image that is used to detect sources. Basic position, shape and size informtaion is derived from this image</agpd:UI_Description>
			</CmdLineParameterDefn>
			<CmdLineParameterDefn name="PhotoImage" type="binary" commandPosition="2" fileRef="true">
				<agpd:UI_Name>Measurement Image</agpd:UI_Name>
				<agpd:UI_Description>The Image that is used to measure photometric parameters</agpd:UI_Description>
			</CmdLineParameterDefn>
			<CmdLineParameterDefn name="config_file" type="binary" commandSwitch="c" fileRef="true">
				<agpd:UI_Name>Configuration File</agpd:UI_Name>
				<agpd:UI_Description>File containing the main configuration parameters for SExtractor</agpd:UI_Description>
			</CmdLineParameterDefn>
			<CmdLineParameterDefn name="PARAMETERS_NAME" type="binary" fileRef="true">
				<agpd:UI_Name>Parameter File</agpd:UI_Name>
				<agpd:UI_Description>A File containing the list of catalogue paramters that should be computed</agpd:UI_Description>
			</CmdLineParameterDefn>
			<CmdLineParameterDefn name="CATALOG_NAME" type="VOTable" fileRef="true">
				<agpd:UI_Name>Derived output catalogue</agpd:UI_Name>
				<agpd:UI_Description>The catalogue of images derived from the input images</agpd:UI_Description>
			</CmdLineParameterDefn>
		</Parameters>
		<Interfaces>
			<Interface name="Simple">
				<input>
					<pref ref="DetectionImage"/>
					<pref ref="PhotoImage"/>
					<pref ref="config_file"/>
					<pref ref="PARAMETERS_NAME"/>
				</input>
				<output>
					<pref ref="CATALOG_NAME"/>
				</output>
			</Interface>
		</Interfaces>
		<ExecutionPath>/home/applications/tools/sextractor-2.3/sex</ExecutionPath>
	</Application>
	<Application name="REGAUTHORITY.HyperZ" instanceClass="org.astrogrid.applications.commandline.hyperz.HyperZ">
		<!--HyperZ is another tool that will be driven by config files - however this might not be the full set necessary to run this tool.-->
		<Parameters>
			<CmdLineParameterDefn name="config_file" type="binary" commandPosition="1">
				<agpd:UI_Name>Configuration File</agpd:UI_Name>
				<agpd:UI_Description>A HyperZ configuration file</agpd:UI_Description>
			</CmdLineParameterDefn>
			<CmdLineParameterDefn name="input_catalog" type="VOTable" commandSwitch="CATALOG_FILE">
				<agpd:UI_Name>Magnitude Catalogue</agpd:UI_Name>
				<agpd:UI_Description>The input catalogue of measured magnitude</agpd:UI_Description>
			</CmdLineParameterDefn>
			<CmdLineParameterDefn name="output_catalog" type="VOTable" commandSwitch="OUTPUT_CATALOG">
				<agpd:UI_Name>Redshift Catalogue</agpd:UI_Name>
				<agpd:UI_Description>The catalogue of estimated redshifts</agpd:UI_Description>
			</CmdLineParameterDefn>
		</Parameters>
		<Interfaces>
			<Interface name="simple">
				<input>
					<pref ref="config_file"/>
					<pref ref="input_catalog"/>
				</input>
				<output>
					<pref ref="output_catalog"/>
				</output>
			</Interface>
		</Interfaces>
		<ExecutionPath>/home/applications/tools/ZPHOT/hyperzwrapper.sh</ExecutionPath>
	</Application>
	<Application name="REGAUTHORITY.CrossMatcher" instanceClass="org.astrogrid.applications.commandline.dft.Dft">
		<!--This is Patricio's data federation tool that will be needed for the january demo I believe - It is more complicated than those above in that it has more different types of parameter. Additionally I think that it would be good for the UI to be able to look into the VOTables to give the user a list of columns to chose from - otherwise this would be a very painful process for the user.-->
		<!-- these parameters are incorrect in the latest verison of the tool -->
		<Parameters>
			<CmdLineParameterDefn name="targets" type="VOTable" switchType="keyword">
				<agpd:UI_Name>Target votable</agpd:UI_Name>
				<agpd:UI_Description>The VOTable file containing the target sources</agpd:UI_Description>
			</CmdLineParameterDefn>
			<CmdLineParameterDefn name="matches" type="VOTable" switchType="keyword">
				<agpd:UI_Name>Match VOTable</agpd:UI_Name>
				<agpd:UI_Description>The VOTable file containing the sources to match</agpd:UI_Description>
			</CmdLineParameterDefn>
			<CmdLineParameterDefn name="merged_output" type="VOTable" commandPosition="1">
				<agpd:UI_Name>Resulting VOTable</agpd:UI_Name>
				<agpd:UI_Description>The VOTable file containing result of the match</agpd:UI_Description>
			</CmdLineParameterDefn>
			<CmdLineParameterDefn name="matchRadius" type="double" commandSwitch="String" fileRef="false">
				<agpd:UI_Name>Match Radius</agpd:UI_Name>
				<agpd:UI_Description>??</agpd:UI_Description>
			</CmdLineParameterDefn>
			<CmdLineParameterDefn name="radMax" type="double" commandSwitch="String" fileRef="false">
				<agpd:UI_Name>Maximum search radius</agpd:UI_Name>
				<agpd:UI_Description>??</agpd:UI_Description>
			</CmdLineParameterDefn>
			<CmdLineParameterDefn name="output" type="text" commandSwitch="String" fileRef="false">
				<agpd:UI_Name>output type</agpd:UI_Name>
				<agpd:UI_Description>This can be one of HTML VOTable of Ascii, with the default being VOTable</agpd:UI_Description>
			
				<agpd:DefaultValue>VOTable</agpd:DefaultValue>
				<agpd:OptionList>
					<agpd:OptionVal>HTML
					</agpd:OptionVal>
					<agpd:OptionVal>VOTable</agpd:OptionVal>
					<agpd:OptionVal>Ascii</agpd:OptionVal>
				</agpd:OptionList>
				
			</CmdLineParameterDefn>
			<CmdLineParameterDefn name="maxMatches" type="integer" fileRef="false">
				<agpd:UI_Name>maximum number of matches per target</agpd:UI_Name>
				<agpd:UI_Description>maximum number of matches per target</agpd:UI_Description>
			</CmdLineParameterDefn>
		</Parameters>
		
		<Interfaces>
			<Interface name="simple">
				<input>
					<pref ref="targets" maxoccurs="0"/>
					<pref ref="matches" maxoccurs="0"/>
				</input>
				<output>
					<pref ref="merged_output"/>
				</output>
			</Interface>
		</Interfaces>
		<ExecutionPath>/home/applications/tools/dft/bin/dft</ExecutionPath>
	</Application>
	<Application name="REGAUTHORITY.BPZ">
		<!--Another photometric redshift tool - need to complete the parameter definitions...-->
		<Parameters>
			<CmdLineParameterDefn type="text" name="SPECTRA">
				<agpd:UI_Name>Spectra</agpd:UI_Name>
				<agpd:UI_Description>template list</agpd:UI_Description>
				<agpd:DefaultValue>CWWSB.list</agpd:DefaultValue>
			</CmdLineParameterDefn>
           <CmdLineParameterDefn type="text" name="PRIOR" fileRef="false">
			<agpd:UI_Name>PRIOR</agpd:UI_Name>
			<agpd:UI_Description>prior name</agpd:UI_Description>
			<agpd:DefaultValue>hdfn</agpd:DefaultValue>
			
		   </CmdLineParameterDefn>
		   <CmdLineParameterDefn type="double" name="DZ" fileRef="false">
			   <agpd:UI_Name>DZ</agpd:UI_Name>
			   <agpd:UI_Description>redshift resolution</agpd:UI_Description>
			   <agpd:DefaultValue>0.01</agpd:DefaultValue>
		   </CmdLineParameterDefn>
		   <CmdLineParameterDefn type="double" name="ZMIN" fileRef="false">
			    <agpd:UI_Name>ZMIN</agpd:UI_Name>
				<agpd:UI_Description>minimum redshift</agpd:UI_Description>
				<agpd:DefaultValue>0.01</agpd:DefaultValue>
		   </CmdLineParameterDefn>
		   <CmdLineParameterDefn type="double" name="ZMAX" fileRef="false">
			<agpd:UI_Name>ZMAX</agpd:UI_Name>
			<agpd:UI_Description>maximum redshift</agpd:UI_Description>
			<agpd:DefaultValue>6.5</agpd:DefaultValue>
		   </CmdLineParameterDefn>
		   <CmdLineParameterDefn type="boolean" name="MAG"  fileRef="false">
		   <agpd:UI_Name>MAG</agpd:UI_Name>
			<agpd:UI_Description>Data in magnitudes?</agpd:UI_Description>
			<agpd:DefaultValue>yes</agpd:DefaultValue>
		   </CmdLineParameterDefn>
		   <CmdLineParameterDefn type="double" name="ODDS"  fileRef="false">
			<agpd:UI_Name>ODDS</agpd:UI_Name>
			<agpd:UI_Description>Odds threshold: affects confidence limits definition</agpd:UI_Description>
			<agpd:DefaultValue>0.95</agpd:DefaultValue>
		   </CmdLineParameterDefn>
		   <CmdLineParameterDefn type="integer" name="INTERP"  fileRef="false">
			<agpd:UI_Name>INTERP</agpd:UI_Name>
			<agpd:UI_Description>Number of interpolated templates between each of the original ones</agpd:UI_Description>
			<agpd:DefaultValue>0</agpd:DefaultValue>
		   </CmdLineParameterDefn>
		   <CmdLineParameterDefn type="text" name="EXCLUDE"  fileRef="false">
			<agpd:UI_Name>EXCLUDE</agpd:UI_Name>
			<agpd:UI_Description>Filters to be excluded from the estimation</agpd:UI_Description>
			<agpd:DefaultValue>none</agpd:DefaultValue>
		   </CmdLineParameterDefn>
		   <CmdLineParameterDefn type="boolean" name="NEW_AB"  fileRef="false">
			<agpd:UI_Name>NEW_AB</agpd:UI_Name>
			<agpd:UI_Description>If yes, generate new AB files even if they already exist</agpd:UI_Description>
			<agpd:DefaultValue>no</agpd:DefaultValue>
		   </CmdLineParameterDefn>
		   <CmdLineParameterDefn type="boolean" name="CHECK"  fileRef="false">
			   <agpd:UI_Name>CHECK</agpd:UI_Name>
			   <agpd:UI_Description>Perform some checks, compare observed colors with templates, etc.</agpd:UI_Description>
			   <agpd:DefaultValue>no</agpd:DefaultValue>
		   </CmdLineParameterDefn>
		   <CmdLineParameterDefn type="boolean" name="VERBOSE"  fileRef="false">
			 <agpd:UI_Name>VERBOSE</agpd:UI_Name>
			 <agpd:UI_Description>Print estimated redshifts to the standard output</agpd:UI_Description>
			 <agpd:DefaultValue>yes</agpd:DefaultValue>
		   </CmdLineParameterDefn>
		   <CmdLineParameterDefn type="boolean" name="PROBS"  fileRef="false">
			 <agpd:UI_Name>PROBS</agpd:UI_Name>
			 <agpd:UI_Description>Save all the galaxy probability distributions (very large file created)</agpd:UI_Description>
		   </CmdLineParameterDefn>
		   <CmdLineParameterDefn type="boolean" name="PROBS_LITE"  fileRef="false">
			<agpd:UI_Name>PROBS_LITE</agpd:UI_Name>
			<agpd:UI_Description>Save only the final probability distribution</agpd:UI_Description>
			<agpd:DefaultValue>no</agpd:DefaultValue>
		   </CmdLineParameterDefn>
		   <CmdLineParameterDefn type="boolean" name="GET_Z"  fileRef="false">
			<agpd:UI_Name>GET_Z</agpd:UI_Name>
			<agpd:UI_Description>Actually obtain photo-z</agpd:UI_Description>
			<agpd:DefaultValue>yes</agpd:DefaultValue>
		   </CmdLineParameterDefn>
		   <CmdLineParameterDefn type="boolean" name="ONLY_TYPE"  fileRef="false">
			<agpd:UI_Name>ONLY_TYPE</agpd:UI_Name>
			<agpd:UI_Description>Use spectroscopic redshifts instead of photo-z</agpd:UI_Description>
			<agpd:DefaultValue>no</agpd:DefaultValue>
		   </CmdLineParameterDefn>
		   <CmdLineParameterDefn type="boolean" name="MADAU"  fileRef="false">
			<agpd:UI_Name>MADAU</agpd:UI_Name>
			<agpd:UI_Description>Apply Madau correction to spectra</agpd:UI_Description>
			<agpd:DefaultValue>yes</agpd:DefaultValue>
		   </CmdLineParameterDefn>
		   <CmdLineParameterDefn type="double" name="Z_THR"  fileRef="false">
			<agpd:UI_Name>Z_THR</agpd:UI_Name>
			<agpd:UI_Description>Integrate likelihood for z&gt;z_thr</agpd:UI_Description>
			<agpd:DefaultValue>0</agpd:DefaultValue>
		   </CmdLineParameterDefn>
		   <CmdLineParameterDefn type="boolean" name="COLOR"  fileRef="false">
			<agpd:UI_Name>COLOR</agpd:UI_Name>
			<agpd:UI_Description>Use colors instead of fluxes</agpd:UI_Description>
			<agpd:DefaultValue>no</agpd:DefaultValue>
		   </CmdLineParameterDefn>
		   <CmdLineParameterDefn type="boolean" name="PLOTS"  fileRef="false">
			<agpd:UI_Name>PLOTS</agpd:UI_Name>
			<agpd:UI_Description>produce plots</agpd:UI_Description>
			<agpd:DefaultValue>no</agpd:DefaultValue>
		   </CmdLineParameterDefn>
		</Parameters>
		<Interfaces>
			<!--could have an interface that used a config file also-->
			<Interface name="primary">
				<input><pref ref="DZ"  minOccurs="0"/>
					<!-- still need to finish this -->
					</input>
				<output/>
			</Interface>
		</Interfaces>
		<ExecutionPath>/home/applications/tools/bpz/bpz.py</ExecutionPath>
	</Application>
	<Application name="REGAUTHORITY.swarp">
		<!--can resample images - only define the very simplest interface at the moment - using a parameter files-->
		<Parameters>
			<CmdLineParameterDefn name="Image" type="FITS" commandPosition="1">
				<agpd:UI_Name>Detection Image</agpd:UI_Name>
				<agpd:UI_Description>The image that is used to detect sources. Basic position, shape and size informtaion is derived from this image</agpd:UI_Description>
			</CmdLineParameterDefn>
			<CmdLineParameterDefn name="config_file" type="binary" commandSwitch="c">
				<agpd:UI_Name>Configuration File</agpd:UI_Name>
				<agpd:UI_Description>File containing the main configuration parameters for Swarp</agpd:UI_Description>
			</CmdLineParameterDefn>
			<CmdLineParameterDefn name="IMAGEOUT_NAME" type="FITS">
				<agpd:UI_Name>Output Image</agpd:UI_Name>
				<agpd:UI_Description>The resampled and possibly coadded output image</agpd:UI_Description>
			</CmdLineParameterDefn>
		</Parameters>
		<Interfaces>
			<Interface name="Simple">
				<input>
					<pref ref="Image"/>
					<pref ref="config_file"/>
				</input>
				<output>
					<pref ref="IMAGEOUT_NAME"/>
				</output>
			</Interface>
		</Interfaces>
		<ExecutionPath>/home/applications/tools/swarp-2.10/bin/swarp</ExecutionPath>
	</Application>
	<Application name="REGAUTHORITY.annz">
		<Parameters>
			<CmdLineParameterDefn name="INPUT_PHOTOM" type="binary" commandPosition="1"/>
			<CmdLineParameterDefn name="OUTPUT" type="binary" commandPosition="2"/>
			<CmdLineParameterDefn name="NET_WEIGHT" type="binary" commandPosition="3"/>
		</Parameters>
		<Interfaces>
			<Interface name="simple">
				<input>
					<pref ref="INPUT_PHOTOM"/>
					<pref maxoccurs="0" ref="NET_WEIGHT"/>
				</input>
				<output>
					<pref ref="OUTPUT"/>
				</output>
			</Interface>
		</Interfaces>
		<ExecutionPath>/home/applications/tools/annz/bin/annz_test</ExecutionPath>
	</Application>
</CommandLineExecutionControllerConfig>
