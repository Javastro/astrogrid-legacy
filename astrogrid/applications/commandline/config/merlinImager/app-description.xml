<?xml version="1.0" encoding="iso-8859-1"?>
<!--$Id: app-description.xml,v 1.2 2008/09/03 14:18:45 pah Exp $-->
<!-- Config file for the real applications that have been wrapped so far -->
<CommandLineExecutionControllerConfig xmlns="http://www.astrogrid.org/schema/CEAImplementation/v1"
    xmlns:ceab="http://www.astrogrid.org/schema/CommonExecutionArchitectureBase/v1"
    xmlns:agpd="http://www.astrogrid.org/schema/AGParameterDefinition/v1"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.astrogrid.org/schema/CEAImplementation/v1
    ./src/workflow-objects/schema/CEAImplementation.xsd">
    <!-- put the real applications here - note that they are not autodeployed, so the paths are fixed strings - this is more of a registry test....-->
    <!-- Replace if necessary with name and entry for tool to extract MERLIN images from archive calibrated visibility data -->
    <!-- Do RA and Dec types allow input forms given? if not use "text". -->
    <Application name="org.astrogrid/MERLINImager">
        <!-- Anita Richards 11 Nov 2005-->
        <ceab:Parameters>
            <!-- Input on the command-line would be of form ./merlin_archive.py   
                RA=23:55:03.3820 Dec=+28:38:01.050 Equinox=J Name= Freq=4994.0 Ftol= ImageSize=10 Resolution=0.1 Start=910101  End=20101212
                MERLINImages=MERLINImages.vot
              -->
            <CmdLineParameterDefn name="RA" type="RA" fileRef="false" switchType="keyword">
                <agpd:UI_Name>RA</agpd:UI_Name>
                <agpd:UI_Description>RA in sexagesimal (colon-separated) or in decimal degrees e.g.
                    23:55:03.382 or 358.764092 If blank, MERLIN Name will be used. </agpd:UI_Description>
                <agpd:DefaultValue>0.0</agpd:DefaultValue>
            </CmdLineParameterDefn>
            <CmdLineParameterDefn name="Dec" type="Dec" fileRef="false" switchType="keyword">
                <agpd:UI_Name>Dec</agpd:UI_Name>
                <agpd:UI_Description>RA and Dec. in sexagesimal (colon-separated) or in decimal
                    degrees e.g. +28:38:01.05 or +28.633625 If blank, MERLIN Name will be used. </agpd:UI_Description>
                <agpd:DefaultValue>0.0</agpd:DefaultValue>
            </CmdLineParameterDefn>
            <CmdLineParameterDefn name="Equinox" type="text" fileRef="false" switchType="keyword">
                <agpd:UI_Name>Equinox</agpd:UI_Name>
                <agpd:UI_Description>Equinox - J for J2000 or B for B1950, Default J All images are
                    returned in J2000 </agpd:UI_Description>
                <agpd:DefaultValue>J</agpd:DefaultValue>
            </CmdLineParameterDefn>
            <CmdLineParameterDefn name="Name" type="text" fileRef="false" switchType="keyword">
                <agpd:UI_Name>MERLIN name</agpd:UI_Name>
                <agpd:UI_Description>Exact MERLIN source name (if unsure use position instead). </agpd:UI_Description>
                <agpd:DefaultValue>NULL</agpd:DefaultValue>
            </CmdLineParameterDefn>
            <CmdLineParameterDefn name="Freq" type="double" fileRef="false" switchType="keyword">
                <agpd:UI_Name>Frequency</agpd:UI_Name>
                <agpd:UI_Description>Frequency (MHz) e.g. 4994 Must be in ranges 1370-1430,
                    1550-1730, 4500-5200 or 6000-7000 MHz. Default = all available frequencies. </agpd:UI_Description>
                <agpd:DefaultValue>5000</agpd:DefaultValue>
                <agpd:Units>MHz</agpd:Units>
            </CmdLineParameterDefn>
            <CmdLineParameterDefn name="Ftol" type="double" fileRef="false" switchType="keyword">
                <agpd:UI_Name>Ftol</agpd:UI_Name>
                <agpd:UI_Description>Frequency tolerance (MHz) e.g. 100 Default = all available
                    frequencies. </agpd:UI_Description>
                <agpd:DefaultValue>5000</agpd:DefaultValue>
                <agpd:Units>MHz</agpd:Units>
            </CmdLineParameterDefn>
            <CmdLineParameterDefn name="ImageSize" type="double" fileRef="false"
                switchType="keyword">
                <agpd:UI_Name>Image Size</agpd:UI_Name>
                <agpd:UI_Description>Image size (arcsec). Will be rounded if necessary to ranges
                    approx. 20-368 arcsec at 1370-1730 MHz or 5-98 arcsec at 4500-7000 MHz Default =
                    smallest available size. </agpd:UI_Description>
                <agpd:DefaultValue>1</agpd:DefaultValue>
                <agpd:Units>arcsec</agpd:Units>
            </CmdLineParameterDefn>
            <CmdLineParameterDefn name="Resolution" type="double" fileRef="false"
                switchType="keyword">
                <agpd:UI_Name>Resolution</agpd:UI_Name>
                <agpd:UI_Description>Resolution (arcsec). Will be rounded if necessary to within
                    ranges approx. 0.11-2.4 arcsec at 1370-1730 MHz or 0.03-0.72 arcsec at 4500-7000
                    MHz Default = natural resolution. </agpd:UI_Description>
                <agpd:DefaultValue>0.1</agpd:DefaultValue>
                <agpd:Units>arcsec</agpd:Units>
            </CmdLineParameterDefn>
            <CmdLineParameterDefn name="Start" type="text" fileRef="false" switchType="keyword">
                <agpd:UI_Name>Start</agpd:UI_Name>
                <agpd:UI_Description>Earliest time to consider YYYYMMDD . Default = 19910101 </agpd:UI_Description>
                <agpd:DefaultValue>19910101</agpd:DefaultValue>
            </CmdLineParameterDefn>
            <CmdLineParameterDefn name="End" type="text" fileRef="false" switchType="keyword">
                <agpd:UI_Name>End</agpd:UI_Name>
                <agpd:UI_Description>Latest time to consider YYYYMMDD . Default = 20201212 </agpd:UI_Description>
                <agpd:DefaultValue>20201212</agpd:DefaultValue>
            </CmdLineParameterDefn>
            <!-- The output will be one VOTable containing image URLs.  I also want to send back a log/metadata file -->
            <!-- which could be pointed to in the same list, or it could be returned directly. -->
            <CmdLineParameterDefn name="MERLINImages" type="VOTable" fileRef="true"
                switchType="keyword">
                <agpd:UI_Name>MERLIN Images List</agpd:UI_Name>
                <agpd:UI_Description>Name for VOTable which will contain image URLs</agpd:UI_Description>
                <agpd:DefaultValue>MERLINImages.vot</agpd:DefaultValue>
            </CmdLineParameterDefn>
            <!-- Is next entry unneccesary as we only use VOTable for images list? -->
            <CmdLineParameterDefn name="output" type="text" fileRef="false" switchType="keyword">
                <agpd:UI_Name>output type</agpd:UI_Name>
                <agpd:UI_Description>This can be one of HTML VOTable or Ascii, with the default
                    being VOTable</agpd:UI_Description>
                <agpd:DefaultValue>VOTable</agpd:DefaultValue>
                <agpd:OptionList>
                    <agpd:OptionVal>HTML </agpd:OptionVal>
                    <agpd:OptionVal>VOTable</agpd:OptionVal>
                    <agpd:OptionVal>Ascii</agpd:OptionVal>
                </agpd:OptionList>
            </CmdLineParameterDefn>
        </ceab:Parameters>
        <Interfaces xmlns="http://www.astrogrid.org/schema/CommonExecutionArchitectureBase/v1">
            <Interface name="full">
                <input>
                    <pref ref="RA" minoccurs="0" maxoccurs="1"/>
                    <pref ref="Dec" minoccurs="0" maxoccurs="1"/>
                    <pref ref="Equinox" minoccurs="0" maxoccurs="1"/>
                    <pref ref="Name" minoccurs="0" maxoccurs="1"/>
                    <pref ref="Freq" minoccurs="0" maxoccurs="1"/>
                    <pref ref="Ftol" minoccurs="0" maxoccurs="1"/>
                    <pref ref="ImageSize" minoccurs="0" maxoccurs="1"/>
                    <pref ref="Resolution" minoccurs="0" maxoccurs="1"/>
                    <pref ref="Start" minoccurs="0" maxoccurs="1"/>
                    <pref ref="End" minoccurs="0" maxoccurs="1"/>
                </input>
                <output>
                    <pref ref="MERLINImages" minoccurs="1" maxoccurs="1"/>
                </output>
            </Interface>
        </Interfaces>
        <!-- Execution path TBD -->
        <ExecutionPath>/scratch/aife_2/MERLIN/ARCHIVE/IMAGING/merlin_archive.py</ExecutionPath>
        <LongName>MERLIN Imager</LongName>
        <Description>The MERLIN Imager extracts images from calibrated radio interferometry data,
            where available.</Description>
        <ReferenceURL>http://www.merlin.ac.uk/archive/MERLINImager.html</ReferenceURL>
    </Application>
</CommandLineExecutionControllerConfig>
<!--  move back to 
agrid@aife:/home/agrid/MERLINImager.xml

and restart the cea application in the Tomcat manager,

then republish the registry entry from the cea web app management pages.
-->
