<?xml version="1.0" encoding="ISO-8859-1"?>
<document>
	<properties>
		<author email="gtr@ast.cam.ac.uk">Guy Rixon</author>
		<title>Self-testing</title>
	</properties>
	<body>
		<section name="Self-testing">
			<p> The CL-CEC web-application includes web-pages and those pages include test functions. To
				get at the web pages, go with your web browser to a URL made up of the address of your
				server computer and the context path of the web-application. E.g. 
				<pre>
http://your.server.address:8080/CL-CEC-1/
				</pre>
			</p>
			<subsection name="Testing Axis">
				<p> The CL-CEC contains the Apache Axis technology for web services. If Axis is not working,
					then the CEC does not work. You should test Axis as soon as you have the CL-CEC installed. </p>
				<p>Run the Axis tests using the "axis check" command from the left-hand side-bar. </p>
				<p> The test checks for the presence of JARs of code. You need all the core libraries to be
					present; the optional libraries are not required. </p>
				<img src="axis-happy.gif" alt="Screen-shot of successful Axis test."/>
				<p> If Axis is not happy, there are three possibilities.
				</p>
				<ul>
					<li>The WAR for the web-application may be faulty. Please report a bug to AstroGrid.</li>
					<li>You may have Axis-related parts installed in your copy of Tomcat. Check the
					common directories of Tomcat for any JARs with similar names to those in the CL-CEC
						web-application.</li>
					<li>Your copy of Java may be broken or may be inapproriate for the CL-CEC. Please make sure 
						that you are using Java 1.4.x and not Java 1.5.x. Check for any JAR files added to the 
					  Java installation that may be subverting the web-application.</li>
				</ul>I
			</subsection>
			<subsection name="Test-run applications">
				<p> When you have the CL-CEC configured with a list of applications, you can test run those
					applications from the web pages built into the CL-CEC. This tests the configuration.
				</p>
				<p>Run the application tests using the "test-run" command from the left-hand side-bar. </p>
				<p>
					On the next page, you will select an application and an interface for that application.
				</p>
				<img src="test-run-1.gif" alt="Screen-shot of test-run page."/>
				<p>
					Press the select button to move on. On the next page you will enter the parameters for the
					application.
				</p>
				<img src="test-run-2.gif" alt="Screenshot of test-run page"/>
				<p>
					Press the execute button to go on. This takes you to a status page in which the headline status
					should progress from "pending" through "initializing" to "running", and then to "completed" or
					"error".
				</p>
				<p>
					The error page is very uninformative.
				</p>
				<img src="test-run-error.gif" alt="Screen-shot of test-run error-page"/>
				<p>
					To find out what went wrong, you will need to loook at the logs directory of Tomcat and read the
					file cea-commandline.log.
				</p>
				<p>
					If the test suceeds, the values of the output parameters will be written at the bottom of the
					status page. This happens even if the output parameters are, say, FITS files, so might take some
					time. As soon as the parameters start to appear you know that the CL-CEC considers the application
					to have run successfully.
				</p>
				<p>
					If the test run fails, there are two likely causes:
				</p>
				<ol>
					<li>The application-description configuration-file is wrong.</li>
					<li>The values of the environment entries cea.job.records and cea.job.temp.files are wrong.</li>
				</ol>
				<p>
					This local test does not use the resource registry, so the environment entries to do with the
					registry are not relevant here.
				</p>
			</subsection>
		</section>
	</body>
</document>
