<?xml version="1.0" ?>
<!-- extension maven script -->
<project xmlns:j="jelly:core"  xmlns:maven="jelly:maven" xmlns:deploy="deploy" default="jar:jar">
<!-- NWW: no - not gone mad. but reactor tag doesn't seem to want to work. just finishes in the
middle to commandline tests - no jar produced, no error messages. so written all out in full for now 
	JDT: seems to work OK now - perhaps Maven 1.0.2 fixed it-->
<goal name="astrogrid-deploy-snapshot">
   <echo message="Master Project: astrogrid-deploy-snapshot"/>
   
   <maven:reactor
     basedir="${basedir}"
     postProcessing="false"
     includes="*/project.xml"
     goals="astrogrid-deploy-snapshot"
     banner="Deploying snapshots"
     ignoreFailures="true" />
   <!--
     <maven:maven descriptor="${basedir}/client/project.xml"
        goals="astrogrid-deploy-snapshot" ignoreFailures="false" />
     <maven:maven descriptor="${basedir}/server/project.xml"
        goals="astrogrid-deploy-snapshot" ignoreFailures="false" />
     <maven:maven descriptor="${basedir}/commandline/project.xml"
        goals="astrogrid-deploy-snapshot" ignoreFailures="false" />
     <maven:maven descriptor="${basedir}/http/project.xml"
        goals="astrogrid-deploy-snapshot" ignoreFailures="false" />-->
</goal>
<goal name="astrogrid-install-snapshot">
   <echo message="Master Project: astrogrid-install-snapshot"/>
   
   <maven:reactor
     basedir="${basedir}"
     postProcessing="false"
     includes="*/project.xml"
     goals="astrogrid-install-snapshot"
     banner="installing snapshots"
     ignoreFailures="true" />
   <!--
     <maven:maven descriptor="${basedir}/client/project.xml"
        goals="astrogrid-install-snapshot" ignoreFailures="false" />
     <maven:maven descriptor="${basedir}/server/project.xml"
        goals="astrogrid-install-snapshot" ignoreFailures="false" />
     <maven:maven descriptor="${basedir}/commandline/project.xml"
        goals="astrogrid-install-snapshot" ignoreFailures="false" />
     <maven:maven descriptor="${basedir}/http/project.xml"
        goals="astrogrid-install-snapshot" ignoreFailures="false" />
        -->
</goal>

<goal name="astrogrid-build-snapshot">
        <echo message="Master Project: astrogrid-build-snapshot" />

   <maven:reactor
     basedir="${basedir}"
     postProcessing="false"
     includes="*/project.xml"
     goals="astrogrid-build-snapshot"
     banner="building snapshots"
     ignoreFailures="true" />
     <!--
     <maven:maven descriptor="${basedir}/client/project.xml"
        goals="astrogrid-build-snapshot" ignoreFailures="false" />
     <maven:maven descriptor="${basedir}/server/project.xml"
        goals="astrogrid-build-snapshot" ignoreFailures="false" />
     <maven:maven descriptor="${basedir}/commandline/project.xml"
        goals="astrogrid-build-snapshot" ignoreFailures="false" />
     <maven:maven descriptor="${basedir}/http/project.xml"
        goals="astrogrid-build-snapshot" ignoreFailures="false" />
        -->
</goal>

<!-- artifact -->
<goal name="astrogrid-deploy-artifact">
   <echo message="Master Project: astrogrid-deploy-artifact"/>
   
   <maven:reactor
     basedir="${basedir}"
     postProcessing="false"
     includes="*/project.xml"
     goals="astrogrid-deploy-artifact"
     banner="Deploying artifacts"
     ignoreFailures="true" />
   <!--
     <maven:maven descriptor="${basedir}/client/project.xml"
        goals="astrogrid-deploy-artifact" ignoreFailures="false" />
     <maven:maven descriptor="${basedir}/server/project.xml"
        goals="astrogrid-deploy-artifact" ignoreFailures="false" />
     <maven:maven descriptor="${basedir}/commandline/project.xml"
        goals="astrogrid-deploy-artifact" ignoreFailures="false" />
     <maven:maven descriptor="${basedir}/http/project.xml"
        goals="astrogrid-deploy-artifact" ignoreFailures="false" />
        -->
</goal>
<goal name="astrogrid-install-artifact">
   <echo message="Master Project: astrogrid-install-artifact"/>

   <maven:reactor
     basedir="${basedir}"
     postProcessing="false"
     includes="*/project.xml"
     goals="astrogrid-install-artifact"
     banner="installing artifacts"
     ignoreFailures="false" />


</goal>

<goal name="astrogrid-build-artifact">
        <echo message="Master Project: astrogrid-build-artifact" />

   <maven:reactor
     basedir="${basedir}"
     postProcessing="false"
     includes="*/project.xml"
     goals="astrogrid-build-artifact"
     banner="building artifacts"
     ignoreFailures="true" />
	<!--
     <maven:maven descriptor="${basedir}/client/project.xml"
        goals="astrogrid-build-artifact" ignoreFailures="false" />
     <maven:maven descriptor="${basedir}/server/project.xml"
        goals="astrogrid-build-artifact" ignoreFailures="false" />
     <maven:maven descriptor="${basedir}/commandline/project.xml"
        goals="astrogrid-build-artifact" ignoreFailures="false" />
     <maven:maven descriptor="${basedir}/http/project.xml"
        goals="astrogrid-build-artifact" ignoreFailures="false" />
        -->
</goal>

<!-- site -->
<goal name="astrogrid-build-site">
   <echo message="Master Project: astrogrid-build-site"/>
   <attainGoal name="multiproject:site" />
</goal>
<goal name="astrogrid-deploy-site" prereqs="astrogrid-build-site">
   <echo message="Master Project: astrogrid-deploy-site"/>
   <attainGoal name="site:sshdeploy" />
</goal>
<goal name="astrogrid-clean">
   <echo message="Master Project: astrogrid-clean"/>
   <attainGoal name="multiproject:clean" />
   <attainGoal name="clean" />
</goal>

</project>
