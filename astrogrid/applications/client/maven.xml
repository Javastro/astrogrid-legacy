<?xml version="1.0"?>
<!-- extension maven script -->
<project xmlns:j="jelly:core" xmlns:maven="jelly:maven" xmlns:artifact="artifact" default="jar:jar">
  <goal name="astrogrid-build-artifact" prereqs="jar" />
  <goal name="astrogrid-install-artifact" prereqs="jar:install,dist:build-bin">
        <artifact:install
                artifact="${maven.dist.dir}/${maven.final.name}.zip"
                type="zip"
                project="${pom}"
        />
  </goal>
  <goal name="astrogrid-install-snapshot" prereqs="jar:install-snapshot,dist:build-bin">
        <artifact:install-snapshot
                artifact="${maven.dist.dir}/${maven.final.name}.zip"
                type="zip"
                project="${pom}"
        />
  </goal>
  <goal name="astrogrid-build-snapshot" prereqs="jar:snapshot" />
  <goal name="astrogrid-deploy-snapshot" prereqs="jar:deploy-snapshot,dist:build-bin">
        <!-- can't use dist:deploy-bin-snapshot here, as then put in 'distributions' part of repo - and hard to get it out again-->
        <artifact:deploy-snapshot
                artifact="${maven.dist.dir}/${maven.final.name}.zip"
                type="zip"
                project="${pom}"
        />
  </goal>
  <goal name="astrogrid-deploy-artifact" prereqs="jar:deploy,dist:build-bin" >
        <!-- ditto with dist:deploy-bin -->
        <artifact:deploy
                artifact="${maven.dist.dir}/${maven.final.name}.zip"
                type="zip"
                project="${pom}"
        />
  </goal>
  <!-- nice addon unit test -->
  <postGoal name="maven-junit-report-plugin:report">
    <attainGoal name="full-junit-report" />
  </postGoal>
  <goal name="full-junit-report">
  <mkdir dir="${basedir}/target/docs/junit-full" />${systemScope.setProperty('javax.xml.transform.TransformerFactory','org.apache.xalan.processor.TransformerFactoryImpl')}
  <junitreport todir="${basedir}/target">
    <fileset dir="${basedir}/target/test-reports">
      <include name="TEST-*.xml" />
    </fileset>
    <report format="frames" styledir="${basedir}/../src/xslt" todir="${basedir}/target/docs/junit-full" />
  </junitreport></goal>
</project>