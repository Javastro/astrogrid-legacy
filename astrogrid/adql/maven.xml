<?xml version="1.0" ?>
<!-- extension maven script -->
<project xmlns:j="jelly:core"  
	     xmlns:maven="jelly:maven" 
	     xmlns:deploy="deploy"
	     xmlns:ant="jelly:ant">
	
<!-- AdqlStoX specific goals -->
	
<goal name="generate-tree" >

	<j:set var="maven.javacc.javacc.grammar" 
               value="${maven.gen.src}/org/astrogrid/adql/AdqlStoX.jj" />
	<j:set var="maven.javacc.jjtree.grammar" 
               value="${maven.gen.src}/org/astrogrid/adql/AdqlStoX.jjt" />
    <ant:touch file="${maven.javacc.jjtree.grammar}" />
	<echo>maven.javacc.jjtree.grammar: ${maven.javacc.jjtree.grammar}</echo>
	<echo>maven.javacc.javacc.grammar: ${maven.javacc.javacc.grammar}</echo>
	<echo>maven.javacc.jjtree.package: ${maven.javacc.jjtree.package}</echo>
	<echo>maven.javacc.javacc.package: ${maven.javacc.javacc.package}</echo>
	<attainGoal name="javacc" />	
</goal>
	
<!-- astrogrid standard goals -->

<goal name="astrogrid-clean" prereqs="clean"/>

<goal name="astrogrid-install-artifact">
        <attainGoal name="clean" />    
        <attainGoal name="generate-tree" />
        <attainGoal name="jar:install" />
</goal>
	
	
    <!--+
        | Prepare our test resources.
        +-->
    <preGoal name="test:test-resources">
        <ant:echo message=""/>
        <ant:echo message="Artifact : ${pom.artifactId}"/>
        <ant:echo message="Preparing test-resources ...."/>
    </preGoal>

	
    <preGoal name="test:prepare-filesystem">
        <ant:echo message=""/>
        <ant:echo message="Artifact : ${pom.artifactId}"/>
        <ant:echo message="Preparing test file system ...."/>
    </preGoal>

</project>
