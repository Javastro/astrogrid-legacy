<?xml version="1.0" encoding="ISO-8859-1" ?>
<document>
    <properties>
        <title>AstroGrid community install</title>
    </properties>
    <body>
    <section name="Installation">
      <p>
        Normal installation is as follows.
      </p>
      <ul>
        <li>Tomcat 5.0.x (5.0.28 recommended) as the web server, run from a non-privileged account.</li>
        <li>An AstroGrid community web-application running in Tomcat</li>
        <li>HSQLDB (included in the AstroGrid WAR) as the DBMS.</li>
        <li>MyProxy installed as a separate, non-HTTP service, run by root.</li>
        <li>A local certificate authority installed in the web-application.</li>
      </ul>
      <p>
        That arranagement is document in these page. Other approaches are
        possible, at your own risk. Please contact AstroGrid before trying 
        anything unusual; we may be able to help you past the difficulties.
      </p>
      
      <subsection name="Preparing Tomcat">
        <p>
          Install Apache Tomcat following its own instructions. In Tomcat's
          list of known users (the file tomcat-users.xml in the normal
          configuration; note that this set of users governs admin access
          to Tomcat, not membership of the IVO community), make sure that there
          is at least one username with the <i>admin</i> and <i>manager</i>
          roles, and that you know the password for this username.
        </p>
      </subsection>
      
      <subsection name="Installing the WAR">
        <p>
          Download the WAR from the AstroGrid site. Choose a name for your
          installation; just "community" is fine if you will only have one
          of them; otherwise, pick a name that doesn't clash with what you
          already have installed. Rename the WAR accordingly.
        </p>
        <p>
          Now copy the WAR into Tomcat's webapps directory. Wait 30 seconds.
          Now check in Tomcat's manager application (look on Tomcat's front
          page to find the link to the manager; you will need to give a password).
          You should see your web-application installed and running.
        </p>
      </subsection>
      
      <subsection name="Installing the DB software">
        <p>
          The DB software is supplied in the WAR which you have just installed.
          You need to move it to a location where Tomcat can read it.
        </p>
        <p>
          Look in Tomcat's directory <i>webapps</i> and find the directory
          holding the community web-application. In that directory, find the
          subdirectory <i>WEB-INF/lib</i>. In there is the DB software: the
          file <i>hsqldb-v.jar</i> where v stands for the version number.
          Move this file into Tomcat's directory <i>common/lib/</i>.
        </p>
          Now restart Tomcat so that it loads the new JAR. 
        
        <p>
          If you already have in <i>common/lib</i> an HSQLDB jar of a different
          version, then you must delete it before you restart Tomcat.
        </p>
      </subsection>
      
      <subsection name="MyProxy installation">
        <p>
          You need to install a MyProxy service to work with the community
          web-application. 
          <a href="http://grid.ncsa.uiuc.edu/myproxy/">MyProxy</a> is a non-Java 
          product from NCSA, and you will have to install it separately from
          the AstroGrid Java software. At the present time, you will also
          have to download, and possibly build from source,
          a suitable copy of Myproxy; apologies for this.
          In later versions, AstroGrid may be able to package MyProxy for
          easier installation.
        </p>
        <p>
          The standard distribution of MyProxy is the one in
          <a href="http://www.globus.org/toolkit/">Globus Toolkit 4</a>.
        </p>
      </subsection>
      
      <subsection name="Certificate-authority installation">
        <p>
          You may want to run a local certificate authority (CA) within your community. 
          This is optional, but you may need one for full operation.
          Please see the <a href="CA-installation.html">CA installation guide</a> 
          for details.
        </p>
      </subsection>
    </section>
   </body>
</document>