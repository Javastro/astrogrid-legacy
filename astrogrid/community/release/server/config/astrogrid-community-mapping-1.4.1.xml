<?xml version="1.0"?>
<!--+
    | <cvs:source>$Source: /Users/pharriso/Work/ag/repo/git/astrogrid-mirror/astrogrid/community/release/server/config/Attic/astrogrid-community-mapping-1.4.1.xml,v $</cvs:source>
    | <cvs:author>$Author: dave $</cvs:author>
    | <cvs:date>$Date: 2004/06/18 13:45:20 $</cvs:date>
    | <cvs:version>$Revision: 1.2 $</cvs:version>
    | <cvs:log>
    |   $Log: astrogrid-community-mapping-1.4.1.xml,v $
    |   Revision 1.2  2004/06/18 13:45:20  dave
    |   Merged development branch, dave-dev-200406081614, into HEAD
    |
    |   Revision 1.1.70.1  2004/06/17 13:38:59  dave
    |   Tidied up old CVS log entries
    |
    | </cvs:log>
    |
    +-->
<mapping>

    <!-- JDO and XML Mapping for Community -->
    <class name="org.astrogrid.community.policy.data.CommunityData" identity="ident">
        <map-to table="communities" xml="community"/>
        <field name="ident" type="string">
            <sql name="ident" type="char"/>
            <bind-xml node="attribute"/>
        </field>
        <field name="serviceUrl" type="string">
            <sql name="service" type="char"/>
            <bind-xml node="element"/>
        </field>
        <field name="managerUrl" type="string">
            <sql name="manager" type="char"/>
            <bind-xml node="element"/>
        </field>
        <field name="authenticationUrl" type="string">
            <sql name="identity" type="char"/>
            <bind-xml node="element"/>
        </field>
        <field name="description" type="string">
            <sql name="description" type="char"/>
            <bind-xml node="element"/>
        </field>
    </class>

    <!-- JDO and XML Mapping for Accounts -->
    <class name="org.astrogrid.community.policy.data.AccountData" identity="ident">
        <map-to table="accounts" xml="account"/>
        <field name="ident" type="string">
            <sql name="ident" type="char"/>
            <bind-xml node="attribute"/>
        </field>
        <field name="password" type="string">
            <sql name="password" type="char"/>
            <bind-xml node="element"/>
        </field>        
        <field name="description" type="string">
            <sql name="description" type="char"/>
            <bind-xml node="element"/>
        </field>
    </class>
    
    <!-- JDO and XML Mapping for Accounts -->
    <class name="org.astrogrid.community.policy.data.ResourceData" identity="ident">
        <map-to table="resources" xml="resource"/>
        <field name="ident" type="string">
            <sql name="ident" type="char"/>
            <bind-xml node="attribute"/>
        </field>
        <field name="description" type="string">
            <sql name="description" type="char"/>
            <bind-xml node="element"/>
        </field>
    </class>
    
    
    <!-- JDO and XML Mapping for Groups -->
    <class name="org.astrogrid.community.policy.data.GroupData" identity="ident">
        <map-to table="groups" xml="group"/>
        <field name="ident" type="string">
            <sql name="ident" type="char"/>
            <bind-xml node="attribute"/>
        </field>
        <field name="description" type="string">
            <sql name="description" type="char"/>
            <bind-xml node="element"/>
        </field>
        <field name="type" type="string">
            <sql name="type" type="char"/>
            <bind-xml node="element"/>
        </field>
    </class>

    <!-- JDO and XML Mapping for Group members -->
    <class name="org.astrogrid.community.policy.data.GroupMemberData" identity="account group">
        <map-to table="members" xml="member"/>
        <field name="account" type="string">
            <sql name="accountident" type="char"/>
            <bind-xml node="attribute"/>
        </field>
        <field name="group" type="string">
            <sql name="groupident" type="char"/>
            <bind-xml node="attribute"/>
        </field>
    </class>

    <!-- JDO and XML Mapping for Permissions -->
    <class name="org.astrogrid.community.policy.data.PolicyPermission" identity="resource group action">
        <map-to table="permissions" xml="permission"/>
        <field name="resource" type="string">
            <sql name="resourceid" type="char"/>
            <bind-xml node="attribute"/>
        </field>
        <field name="group" type="string">
            <sql name="groupid" type="char"/>
            <bind-xml node="attribute"/>
        </field>
        <field name="action" type="string">
            <sql name="action" type="char"/>
            <bind-xml node="attribute"/>
        </field>
        <field name="status" type="integer">
            <sql name="status" type="integer"/>
            <bind-xml node="attribute"/>
        </field>
        <field name="reason" type="string">
            <sql name="reason" type="char"/>
            <bind-xml node="element"/>
        </field>
    </class>

<!--+
    | JDO and XML Mapping for SecurityToken.
    +-->
    <class name="org.astrogrid.community.authentication.data.SecurityToken" identity="token">
        <map-to table="securitytokens" xml="token"/>
        
        <field name="token" type="string">
            <sql name="token" type="char"/>
            <bind-xml node="element"/>
        </field>
        <field name="target" type="string">
            <sql name="target" type="char"/>
            <bind-xml node="element"/>
        </field>
        <field name="account" type="string">
            <sql name="account" type="char"/>
            <bind-xml node="element"/>
        </field>
        <field name="used" type="boolean">
            <sql name="used" type="bit"/>
            <bind-xml node="element"/>
        </field>
        <field name="expirationDate" type="date">
            <sql name="expirationdate" type="timestamp"/>
            <bind-xml node="element"/>
        </field>
        <field name="startDate" type="date">
            <sql name="startdate" type="timestamp"/>
            <bind-xml node="element"/>
        </field>
    </class>
</mapping>
