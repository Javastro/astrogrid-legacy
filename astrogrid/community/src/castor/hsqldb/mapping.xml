<?xml version="1.0"?>
<!--+
    | <cvs:source>$Source: /Users/pharriso/Work/ag/repo/git/astrogrid-mirror/astrogrid/community/src/castor/hsqldb/Attic/mapping.xml,v $</cvs:source>
    | <cvs:author>$Author: pah $</cvs:author>
    | <cvs:date>$Date: 2003/09/15 21:51:45 $</cvs:date>
    | <cvs:version>$Revision: 1.13 $</cvs:version>
    | <cvs:log>
    |   $Log: mapping.xml,v $
    |   Revision 1.13  2003/09/15 21:51:45  pah
    |   authentication database backend tested
    |
    |   Revision 1.12  2003/09/15 14:04:32  pah
    |   using ident as the primary key in the securitytokens table
    |
    |   Revision 1.11  2003/09/09 19:20:20  KevinBenson
    |   added resources to the mapping file
    |
    |   Revision 1.10  2003/09/09 16:42:48  KevinBenson
    |   added password field
    |
    |   Revision 1.9  2003/09/09 13:48:09  dave
    |   Added addGroupMember - only local accounts and groups to start with.
    |
    |   Revision 1.8  2003/09/09 10:02:17  dave
    |   Fixed problems introduced by conflicts.
    |
    |   Revision 1.7  2003/09/08 21:01:28  dave
    |   Added PATCH to build.xml to include classes in Castor mapping - still broke though
    |
    |   Revision 1.6  2003/09/08 20:28:50  dave
    |   Added CommunityIdent, with isLocal() and isValid()
    |
    |   Revision 1.5  2003/09/08 11:01:35  KevinBenson
    |   A check in of the Authentication authenticateToken roughdraft and some changes to the groudata and community data
    |   along with an AdministrationDelegate
    |
    |   Revision 1.4  2003/09/06 20:10:06  dave
    |   Split PolicyManager into separate components.
    |
    |   Revision 1.3  2003/09/04 23:33:05  dave
    |   Implemented the core account manager methods - needs data object to return results
    |
    |   Revision 1.2  2003/09/03 06:39:13  dave
    |   Rationalised things into one set of SOAP stubs and one set of data objects for both client and server.
    |
    |   Revision 1.1  2003/08/28 17:33:56  dave
    |   Initial policy prototype
    |
    | </cvs:log>
    |
    +-->
<mapping>

	<!-- JDO and XML Mapping for Community -->
	<class name="org.astrogrid.community.policy.data.CommunityData" identity="ident">
		<map-to table="communities" xml="community"/>
		<field name="ident" type="string">
			<sql name="ident" type="char"/>
			<bind-xml node="attribute"/>
		</field>
		<field name="serviceUrl" type="string">
			<sql name="service" type="char"/>
			<bind-xml node="element"/>
		</field>
		<field name="managerUrl" type="string">
			<sql name="manager" type="char"/>
			<bind-xml node="element"/>
		</field>
		<field name="authenticationUrl" type="string">
			<sql name="identity" type="char"/>
			<bind-xml node="element"/>
		</field>
		<field name="description" type="string">
			<sql name="description" type="char"/>
			<bind-xml node="element"/>
		</field>
	</class>

	<!-- JDO and XML Mapping for Accounts -->
	<class name="org.astrogrid.community.policy.data.AccountData" identity="ident">
		<map-to table="accounts" xml="account"/>
		<field name="ident" type="string">
			<sql name="ident" type="char"/>
			<bind-xml node="attribute"/>
		</field>
		<field name="password" type="string">
			<sql name="password" type="char"/>
			<bind-xml node="element"/>
		</field>		
		<field name="description" type="string">
			<sql name="description" type="char"/>
			<bind-xml node="element"/>
		</field>
	</class>
	
	<!-- JDO and XML Mapping for Accounts -->
	<class name="org.astrogrid.community.policy.data.ResourceData" identity="ident">
		<map-to table="resources" xml="resource"/>
		<field name="ident" type="string">
			<sql name="ident" type="char"/>
			<bind-xml node="attribute"/>
		</field>
		<field name="description" type="string">
			<sql name="description" type="char"/>
			<bind-xml node="element"/>
		</field>
	</class>
	
	
	<!-- JDO and XML Mapping for Groups -->
	<class name="org.astrogrid.community.policy.data.GroupData" identity="ident">
		<map-to table="groups" xml="group"/>
		<field name="ident" type="string">
			<sql name="ident" type="char"/>
			<bind-xml node="attribute"/>
		</field>
		<field name="description" type="string">
			<sql name="description" type="char"/>
			<bind-xml node="element"/>
		</field>
		<field name="type" type="string">
			<sql name="type" type="char"/>
			<bind-xml node="element"/>
		</field>
	</class>

	<!-- JDO and XML Mapping for Group members -->
	<class name="org.astrogrid.community.policy.data.GroupMemberData" identity="account group">
		<map-to table="members" xml="member"/>
		<field name="account" type="string">
			<sql name="accountident" type="char"/>
			<bind-xml node="attribute"/>
		</field>
		<field name="group" type="string">
			<sql name="groupident" type="char"/>
			<bind-xml node="attribute"/>
		</field>
	</class>

	<!-- JDO and XML Mapping for Permissions -->
	<class name="org.astrogrid.community.policy.data.PolicyPermission" identity="resource group action">
		<map-to table="permissions" xml="permission"/>
		<field name="resource" type="string">
			<sql name="resourceid" type="char"/>
			<bind-xml node="attribute"/>
		</field>
		<field name="group" type="string">
			<sql name="groupid" type="char"/>
			<bind-xml node="attribute"/>
		</field>
		<field name="action" type="string">
			<sql name="action" type="char"/>
			<bind-xml node="attribute"/>
		</field>
		<field name="status" type="integer">
			<sql name="status" type="integer"/>
			<bind-xml node="attribute"/>
		</field>
		<field name="reason" type="string">
			<sql name="reason" type="char"/>
			<bind-xml node="element"/>
		</field>
	</class>

<!--+
	| JDO and XML Mapping for SecurityToken.
	+-->
	<class name="org.astrogrid.community.authentication.data.SecurityToken" identity="token">
		<map-to table="securitytokens" xml="token"/>
		
		<field name="token" type="string">
			<sql name="token" type="char"/>
			<bind-xml node="element"/>
		</field>
		<field name="target" type="string">
			<sql name="target" type="char"/>
			<bind-xml node="element"/>
		</field>
		<field name="account" type="string">
			<sql name="account" type="char"/>
			<bind-xml node="element"/>
		</field>
		<field name="used" type="boolean">
			<sql name="used" type="bit"/>
			<bind-xml node="element"/>
		</field>
		<field name="expirationDate" type="date">
			<sql name="expirationdate" type="timestamp"/>
			<bind-xml node="element"/>
		</field>
		<field name="startDate" type="date">
			<sql name="startdate" type="timestamp"/>
			<bind-xml node="element"/>
		</field>
	</class>
</mapping>
