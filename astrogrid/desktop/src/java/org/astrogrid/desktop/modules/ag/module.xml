<?xml version="1.0" ?>
<!--can't dtd validate - need to replace with schema later.
	<!DOCTYPE module PUBLIC "-//Astrogrid//DTD Desktop Module 1.0//EN" "file:///home/noel/eclipse/desktop/src/java/org/astrogrid/desktop/framework/descriptors/module-descriptor.dtd">
-->
<module name="astrogrid">
	<description>Astrogrid Components</description>
	<property>
		<key>icon</key>
		<value>logo1.gif</value>
	</property>
	<component name="community" 
		implementationClass="org.astrogrid.desktop.modules.ag.CommunityImpl" 
		interfaceClass="org.astrogrid.desktop.modules.ag.Community" >
		<description>User Authentication and Management</description>
	<property>
		<key>icon</key>
		<value>personal.png</value>
	</property>		
		<method name="login">
			<description>Login to astrogrid</description>	
			<return>
				<description>success code</description>
				<property>
					<key>system.xmlrpc.type</key>
					<value>boolean</value>
				</property>
			</return>
			<parameter name="username">
				<description>user to log in as</description>
			</parameter>
			<parameter name="password">
				<description>password for this user</description>
			</parameter>
			<parameter name="community">
				<description>community the user belongs to</description>
			</parameter>
		</method>
		<method name="guiLogin">
			<description>Open Login Dialogue</description>
	<property>
		<key>icon</key>
		<value>connect_creating.png</value>
	</property>					
			<property>
				<key>system.ui.menu.entry</key>
				<value>Login..</value>
			</property>
		</method>
		<method name="logout">
			<description>Logout of astrogrid</description>
	<property>
		<key>icon</key>
		<value>connect_no.png</value>
	</property>					
			<property>
				<key>system.ui.menu.entry</key>
				<value>Logout</value>
			</property>
		</method>
		<method name="isLoggedIn">
			<description>Verify that user is logged in</description>
			<return>
				<description>true if logged in</description>
				<property>
					<key>system.xmlrpc.type</key>
					<value>boolean</value>
				</property>
			</return>
		</method>
	</component>
	<component name="jobs" 
		implementationClass="org.astrogrid.desktop.modules.ag.JobsImpl" 
		interfaceClass="org.astrogrid.desktop.modules.ag.Jobs">
		<description>Submit and manage workflows</description>
	<property>
		<key>icon</key>
		<value>thread_view.gif</value>
	</property>				
		<method name="list">
			<description>list users jobs</description>
	<property>
		<key>icon</key>
		<value>flatLayout.gif</value>
	</property>					
			<property>
				<key>system.ui.menu.entry</key>
				<value>List Jobs</value>
			</property>
			<return>
				<description>list of job identifiers</description>
				<property>
					<key>system.xmlrpc.type</key>
					<value>array</value>
				</property>
			</return>
		</method>
		<method name="getJob">
			<description>Retrieve a workflow transcript</description>
	<property>
		<key>icon</key>
		<value>Resource.gif</value>
	</property>	
			<property>
				<key>system.ui.menu.entry</key>
				<value>Get Job</value>								
			</property>		
			<property>
				<key>system.ui.result.browser</key>
				<value>true</value>								
			</property>					
			<return>
				<description>a workflow document</description>
			</return>
			<parameter name="jobURN">
				<description>identifier of job to retreive</description>
			</parameter>
		</method>
		<method name="getJobSummary">
			<description>Retrieve a summary for a job</description>
	<property>
		<key>icon</key>
		<value>info_obj.gif</value>
	</property>							
			<property>
				<key>system.ui.menu.entry</key>
				<value>Get Job Summary</value>								
			</property>					
			<return>
				<description>a summary of the jobs progress</description>
			</return>
			<parameter name="jobURN">
				<description>identifier of job to retreive</description>
			</parameter>
		</method>
		<method name="cancelJob">
			<description>Cancel a running Job</description>
	<property>
		<key>icon</key>
		<value>stop.gif</value>
	</property>					
			<property>
				<key>system.ui.menu.entry</key>
				<value>Cancel Job</value>								
			</property>					
			<parameter name="jobURN">
				<description>identifier of job to cancel</description>
			</parameter>
		</method>
		<method name="deleteJob">
			<description>Delete a completed Job</description>
	<property>
		<key>icon</key>
		<value>delete_obj.gif</value>
	</property>					
			<property>
				<key>system.ui.menu.entry</key>
				<value>Delete Job</value>								
			</property>					
			<parameter name="jobURN">
				<description>identifier of job to delete</description>
			</parameter>
		</method>
		<method name="submitJob">
			<description>Submit a workflow for execution</description>
			<return>
				<description>unique identifier of the new job</description>
			</return>
			<parameter name="workflow">
				<description>Workflow document to execute</description>
			</parameter>
		</method>
	<method name="submitJobFile">
			<description>Submit a workflow for execution</description>
	<property>
		<key>icon</key>
		<value>run_tool.gif</value>
	</property>					
			<property>
				<key>system.ui.menu.entry</key>
				<value>Submit Job</value>								
			</property>					
			<return>
				<description>unique identifier of the new job</description>
			</return>
			<parameter name="url">
				<description>URL Reference (ftp://, http://, file://) of file containing workflow document to execute</description>
			</parameter>
		</method>		
	</component>
	
	<component name="registry" 
		implementationClass="org.astrogrid.desktop.modules.ag.RegistryImpl" 
		interfaceClass="org.astrogrid.desktop.modules.ag.Registry" >
		<description>Interrogate and browse the registry</description>
	<property>
		<key>icon</key>
		<value>java_lib_obj.gif</value>
	</property>				
		<method name="resolveIdentifier">
			<description>Resolve a service ivorn to a web service 
				endpoint</description>
	<property>
		<key>icon</key>
		<value>link_obj.gif</value>
	</property>						
			<property>
				<key>system.ui.menu.entry</key>
				<value>Resolve Identifier</value>								
			</property>						
			<return>
				<description>url of endpoint</description>
			</return>
			<parameter name="ivorn">
				<description>identifier of the service to resolve</description>
			</parameter>
		</method>
		<method name="getRecord">
			<description>Retrieve the registry entry for an ivorn</description>
	<property>
		<key>icon</key>
		<value>xml.gif</value>
	</property>					
			<property>
				<key>system.ui.menu.entry</key>
				<value>View Record</value>								
			</property>			
			<property>
				<key>system.ui.result.browser</key>
				<value>true</value>								
			</property>						
			<return>
				<description>XML Query results</description>
				<property>
					<key>system.result.transformer</key>
					<value>
						org.astrogrid.desktop.modules.system.transformers.XmlDocumentResultTransformerSet</value>
				</property>
			</return>
			<parameter name="ivorn">
				<description>identifier of the registry entry to 
					return</description>
			</parameter>
		</method>
		<method name="search">
			<description>Query the registry</description>
	<property>
		<key>icon</key>
		<value>search.gif</value>
	</property>					
			<property>
				<key>system.ui.menu.entry</key>
				<value>Perform Query</value>								
			</property>			
			<property>
				<key>system.ui.result.browser</key>
				<value>true</value>								
			</property>				
			<return>
				<description>XML Query results</description>
				<property>
					<key>system.result.transformer</key>
					<value>
						org.astrogrid.desktop.modules.system.transformers.XmlDocumentResultTransformerSet</value>
				</property>
			</return>
			<parameter name="sadql">
				<description>Query to execute (String form of 
					ADQL)</description>
			</parameter>
		</method>
	</component>
	<component name="applications" 
		interfaceClass="org.astrogrid.desktop.modules.ag.Applications" 
		implementationClass="org.astrogrid.desktop.modules.ag.ApplicationsImpl" 
		>
		<description>Query the application registry</description>
		<method name="list">
			<description>list names of registered applications</description>
			<property>
				<key>system.ui.menu.entry</key>
				<value>List Application Names</value>
			</property>
			<return>
				<description>list of application ivorns</description>
				<property>
					<key>system.xmlrpc.type</key>
					<value>array</value>
				</property>
			</return>
		</method>
		<method name="fullList">
			<description>list details of registered applications</description>
			<property>
				<key>system.ui.menu.entry</key>
				<value>List Application Details</value>
			</property>
			<return>
				<description>list of application information</description>
				<property>
					<key>system.xmlrpc.type</key>
					<value>array</value>
				</property>
			</return>
		</method>
		<method name="getRegEntry">
			<description>Return full registry entry for an 
				application</description>
			<property>
				<key>system.ui.menu.entry</key>
				<value>View Record</value>								
			</property>			
			<property>
				<key>system.ui.result.browser</key>
				<value>true</value>								
			</property>					
			<return>
				<description>XML of registry entry</description>
				<property>
					<key>system.result.transformer</key>
					<value>
						org.astrogrid.desktop.modules.system.transformers.XmlDocumentResultTransformerSet</value>
				</property>
			</return>
			<parameter name="applicationName">
				<description>registry key of the application to query 
					for</description>
			</parameter>
		</method>
		<method name="getInfo">
			<description>Return information about an application</description>
			<property>
				<key>system.ui.menu.entry</key>
				<value>View Details</value>								
			</property>			
			<property>
				<key>system.ui.result.browser</key>
				<value>true</value>								
			</property>				
			<return>
				<description>Description of an application</description>
			</return>
			<parameter name="applicationName">
				<description>registry key of the application to query 
					for</description>
			</parameter>
		</method>
		<method name="getToolTemplate">
			<description>Return a template tool document for an 
				application</description>
			<property>
				<key>system.ui.menu.entry</key>
				<value>Create Template Tool</value>								
			</property>			
			<property>
				<key>system.ui.result.browser</key>
				<value>true</value>								
			</property>					
			<return>
				<description>Tool Document</description>
				<property>
					<key>system.result.transformer</key>
					<value>
						org.astrogrid.desktop.modules.system.transformers.CastorResultTransformerSet</value>
				</property>
			</return>
			<parameter name="applicationName">
				<description>name of the application to build a tool 
					for</description>
			</parameter>
			<parameter name="applicationName">
				<description>name of the interface to use - use 'default' for 
					default interface</description>
			</parameter>
		</method>
		<method name="validateTool">
			<description>Validate a tool document against an application 
				description</description>						
			<return>
				<description>true if valid. otherwise some kind of 
					exception.</description>
				<property>
					<key>system.xmlrpc.type</key>
					<value>boolean</value>
				</property>
			</return>
			<parameter name="applicationName">
				<description>name of the application to validate 
					against</description>
			</parameter>
			<parameter name="document">
				<description>the tool document to validate</description>
			</parameter>
		</method>
		<method name="validateToolFile">
			<description>Validate a tool document (referenced by url) against 
				an application description</description>
			<property>
				<key>system.ui.menu.entry</key>
				<value>Validate Tool</value>								
			</property>					
			<return>
				<description>true if valid. otherwise some kind of 
					exception.</description>
				<property>
					<key>system.xmlrpc.type</key>
					<value>boolean</value>
				</property>
			</return>
			<parameter name="applicationName">
				<description>name of the application to validate 
					against</description>
			</parameter>
			<parameter name="documentURL">
				<description>URL pointing to the tool document to 
					validate</description>
			</parameter>
		</method>
	</component>
	
	<component name="vospace" 
		implementationClass="org.astrogrid.desktop.modules.ag.VospaceImpl" 
		interfaceClass="org.astrogrid.desktop.modules.ag.Vospace" >
		<description>Access remote storage</description>
	<property>
		<key>icon</key>
		<value>repo_rep.gif</value>
	</property>			
		<method name="home">
			<desciption>access ivorn of home</desciption>
	<property>
		<key>icon</key>
		<value>home_nav.gif</value>
	</property>				
			<property>
				<key>system.ui.menu.entry</key>
				<value>Show Home Ivorn</value>
			</property>
		</method>
		<method name="node">
			<desciption>access a node</desciption>
	<property>
		<key>icon</key>
		<value>properties.gif</value>
	</property>							
			<property>
				<key>system.ui.menu.entry</key>
				<value>Show Node Properties</value>								
			</property>				
			<return>
				<description>representation of this node</description>
				<property>
					<key>system.xmlrpc.type</key>
					<value>struct</value>
				</property>
			</return>
			<parameter name="ivorn">
				<description>Ivorn of node to retreive</description>
			</parameter>
		</method>
		<method name="exists">
			<description>verify a filemanager ivorn exists</description>		
			<return>
				<description>true if it exists</description>
				<property>
					<key>system.xmlrpc.type</key>
					<value>boolean</value>
				</property>
			</return>
			<parameter name="ivorn">
				<description>Ivorn of node to retreive</description>
			</parameter>
		</method>
		<method name="getType">
			<description>check type of a filemanager node</description>
			<return>
				<description>file or folder</description>
			</return>
			<parameter name="ivorn">
				<description>Ivorn of node to retreive</description>
			</parameter>
		</method>
		<method name="newFile">
			<description>create a new filemanager file.</description>
			<return>
				<description>ivorn of the new file</description>
			</return>
			<parameter name="parentIvorn">
				<description>Ivorn of parent node</description>
			</parameter>
			<parameter name="name">
				<description>name of the new file</description>
			</parameter>
		</method>
		<method name="newFolder">
			<description>create a new filemanager folder.</description>
			<return>
				<description>ivorn of the new folder</description>
			</return>
			<parameter name="parentIvorn">
				<description>Ivorn of parent node</description>
			</parameter>
			<parameter name="name">
				<description>name of the new folder</description>
			</parameter>
		</method>
		<method name="readContent">
			<description>read contents of a filemanager node.</description>
	<property>
		<key>icon</key>
		<value>Resource.gif</value>
	</property>							
			<property>
				<key>system.ui.menu.entry</key>
				<value>Read Node Contents</value>								
			</property>							
			<property>
				<key>system.ui.result.browser</key>
				<value>true</value>								
			</property>				
			<return>
				<description>URL from which contents can be readr</description>
			</return>
			<parameter name="ivorn">
				<description>Ivorn of node</description>
			</parameter>
		</method>
		<method name="copyContentToURL">			
			<description>copy contents of a filemanager node to a 
				url</description>
	<property>
		<key>icon</key>
		<value>export_log.gif</value>
	</property>					
			<property>
				<key>system.ui.menu.entry</key>
				<value>Copy Node Contents to a URL</value>								
			</property>							
			<parameter name="ivorn">
				<description>Ivorn of node</description>
			</parameter>
			<parameter name="destination">
				<description>location to copy contents to. file://, http:// and 
					ftp:// are supported.</description>
			</parameter>
		</method>
		<method name="copyURLToContent">
			<description>copy contents of a url to a filemanager 
				node</description>
	<property>
		<key>icon</key>
		<value>import_log.gif</value>
	</property>					
			<property>
				<key>system.ui.menu.entry</key>
				<value>Copy URL contents to Node</value>								
			</property>						
			<parameter name="source">
				<description>location to copy contents from: file://, http:// 
					and ftp:// are supported.</description>
			</parameter>
			<parameter name="ivorn">
				<description>Ivorn of node</description>
			</parameter>
		</method>
		<method name="getParent">
			<description>return ivorn of node's parent, (or null)</description>
			<parameter name="ivorn">
				<description>Ivorn of node</description>
			</parameter>
		</method>
		<method name="getParentNode">
			<description>return details of parent node - equivalent to 
				node(n.getParent())</description>
			<return>
				<property>
					<key>system.xmlrpc.type</key>
					<value>struct</value>
				</property>
			</return>
			<parameter name="ivorn">
				<description>Ivorn of node</description>
			</parameter>
		</method>
		<method name="getChildren">
			<description>list children of a node</description>
			<return>
				<description>an array of the ivorns of this node's 
					children</description>
			</return>
			<parameter name="ivorn">
				<description>Ivorn of node</description>
			</parameter>
		</method>
		<method name="getChildrenNodes">
			<description>list children of a node</description>
			<return>
				<description>an array of details of the child 
					nodes</description>
				<property>
					<key>system.xmlrpc.type</key>
					<value>struct</value>
				</property>
			</return>
			<parameter name="ivorn">
				<description>Ivorn of node</description>
			</parameter>
		</method>
		<method name="refresh">
			<description>refresh the definition of a node with the filemanager 
				server</description>
			<parameter name="ivorn">
				<description>Ivorn of node</description>
			</parameter>
		</method>
		<method name="delete">
			<description>delete a node</description>
	<property>
		<key>icon</key>
		<value>delete_obj.gif</value>
	</property>				
			<property>
				<key>system.ui.menu.entry</key>
				<value>Delete Node</value>								
			</property>						
			<parameter name="ivorn">
				<description>Ivorn of node to delete.</description>
			</parameter>
		</method>
		<method name="rename">
			<description>rename a node</description>
			<parameter name="ivorn">
				<description>Ivorn of node to rename.</description>
			</parameter>
			<parameter name="newName">
				<description>new name for node</description>
			</parameter>
		</method>
		<method name="move">
			<description>move a node</description>
			<parameter name="ivorn">
				<description>Ivorn of node to move</description>
			</parameter>
			<parameter name="newParentIvorn">
				<description>Ivorn of new parent node</description>
			</parameter>
			<parameter name="newName">
				<description>new name for node</description>
			</parameter>
		</method>
		<method name="changeStore">
			<description>move content of a node from one filestore to 
				another.</description>
			<parameter name="ivorn">
				<description>Ivorn of node to alter</description>
			</parameter>
			<parameter name="storeIvorn">
				<description>ivorn of filestore to relocate content 
					to</description>
			</parameter>
		</method>
		<method name="copy">
			<description>copy a node</description>
			<parameter name="ivorn">
				<description>Ivorn of node to copy</description>
			</parameter>
			<parameter name="newParentIvorn">
				<description>Ivorn of new parent node</description>
			</parameter>
			<parameter name="newName">
				<description>name for copied node</description>
			</parameter>
		</method>

	</component>
	
	<component name="portal"		
		implementationClass="org.astrogrid.desktop.modules.ag.PortalImpl"
		interfaceClass="org.astrogrid.desktop.modules.ag.Portal"
		>
		<description>Ineract with the web portal</description>
		<method name="openPage">
			<description>open a page in the portal</description>
			<parameter name="page">
				<description>name of the page to open</description>
			</parameter>
			</method>
	</component>
	<!-- startable component that registers required convertors. -->
	<component name="register-converters" 
		implementationClass="org.astrogrid.desktop.modules.ag.RegisterConverters" 
		interfaceClass="org.picocontainer.Startable" >
			<property>
				<key>hidden.component</key>
				<value>true</value>								
			</property>						
	</component>
</module>