From kea@ast.cam.ac.uk Wed Jul 13 11:55:08 2005
Return-Path: <kea@ast.cam.ac.uk>
Received: from gannet.scg.man.ac.uk (gannet.scg.man.ac.uk [130.88.94.110])
	by puk.qc1.net (8.12.10/8.12.10) with ESMTP id j6DAuYCn022482
	for <nw@abercrombiegroup.co.uk>; Wed, 13 Jul 2005 11:56:35 +0100
Received: from star1.jb.man.ac.uk ([130.88.24.176])
	by gannet.scg.man.ac.uk with esmtp (Exim 4.51 (FreeBSD))
	id 1Dsett-000DPY-Tr
	for nw@abercrombiegroup.co.uk; Wed, 13 Jul 2005 11:55:38 +0100
Received: from [130.88.200.93] (helo=serenity.mcc.ac.uk)
	by star1.jb.man.ac.uk with esmtp (Exim 3.03 #2)
	id 1Dsets-0004xC-00; Wed, 13 Jul 2005 11:55:36 +0100
Received: from mailsend.le.ac.uk ([143.210.4.129] helo=artemis.le.ac.uk)
	by serenity.mcc.ac.uk with esmtp (Exim 4.51 (FreeBSD))
	id 1Dseto-0008va-P4; Wed, 13 Jul 2005 11:55:36 +0100
Received: from [143.210.36.63] (helo=mail.star.le.ac.uk)
	by artemis.le.ac.uk with esmtp (Exim 4.44)
	id 1Dsetn-0000pM-0W; Wed, 13 Jul 2005 11:55:32 +0100
Received: by mail.star.le.ac.uk (Postfix)
	id BADA52719FA; Wed, 13 Jul 2005 11:55:30 +0100 (BST)
Delivered-To: astrogrid_eng@star.le.ac.uk
Received: by mail.star.le.ac.uk (Postfix, from userid 65534)
	id AE89A271A03; Wed, 13 Jul 2005 11:55:30 +0100 (BST)
Received: from artemis.le.ac.uk (mailsend.le.ac.uk [143.210.4.129])
	by mail.star.le.ac.uk (Postfix) with ESMTP
	id 64D8E2719FA; Wed, 13 Jul 2005 11:55:30 +0100 (BST)
Received: from ppsw-1.csi.cam.ac.uk ([131.111.8.131])
	by artemis.le.ac.uk with esmtp (Exim 4.44)
	id 1Dseti-0000p0-KK; Wed, 13 Jul 2005 11:55:29 +0100
X-Cam-SpamDetails: Not scanned
X-Cam-AntiVirus: No virus found
X-Cam-ScannerInfo: http://www.cam.ac.uk/cs/email/scanner/
Received: from cass41.ast.cam.ac.uk ([131.111.69.186]:63067)
	by ppsw-1.csi.cam.ac.uk (ppsw.cam.ac.uk [131.111.8.131]:25)
	with esmtp id 1DsetW-0007b9-4m (Exim 4.51)
	(return-path <kea@ast.cam.ac.uk>); Wed, 13 Jul 2005 11:55:14 +0100
Received: from cass123.ast.cam.ac.uk (cass123 [IPv6:2001:630:200:4240:203:baff:fe17:f117])
	by cass41.ast.cam.ac.uk (8.12.10+Sun/8.12.10) with ESMTP id j6DAt8Zu003824;
	Wed, 13 Jul 2005 11:55:08 +0100 (BST)
Received: from cass123.ast.cam.ac.uk (localhost [127.0.0.1])
	by cass123.ast.cam.ac.uk (8.13.3+Sun/8.13.3) with ESMTP id j6DAt8rW020364;
	Wed, 13 Jul 2005 11:55:08 +0100 (BST)
Received: from localhost (kea@localhost)
	by cass123.ast.cam.ac.uk (8.13.3+Sun/8.13.3/Submit) with ESMTP id j6DAt8Di020361;
	Wed, 13 Jul 2005 11:55:08 +0100 (BST)
X-Authentication-Warning: cass123.ast.cam.ac.uk: kea owned process doing -bs
Date: Wed, 13 Jul 2005 11:55:08 +0100 (BST)
From: Kona Andrews <kea@ast.cam.ac.uk>
To: AG Engineers and Scientists -- Anita Richards <amsr@jb.man.ac.uk>,
 AstroGrid Engineers <astrogrid_eng@star.le.ac.uk>,
 eglez@ast.cam.ac.uk,
 Jonathan Tedds <jat@star.le.ac.uk>,
 Nic Walton <naw@ast.cam.ac.uk>,
 Silvia Dalla <s.dalla@manchester.ac.uk>
Subject: workbench reset script (fwd)
Message-ID: <Pine.GSO.4.58.0507131145140.20290@cass123.ast.cam.ac.uk>
MIME-Version: 1.0
Content-Type: MULTIPART/Mixed;
  BOUNDARY="Boundary-00=_fBP1CVNy9johSBX"
Content-ID: <Pine.GSO.4.58.0507131145141.20290@cass123.ast.cam.ac.uk>
X-UoL-Id: 06faaa9649f5614576801aab7d829426@1Dsetn-0000pM-0W@artemis.le.ac.uk
X-UoM: Scanned by the University Mail System. See http://www.mcc.ac.uk/cos/email/scanning for details.
X-UoM: Scanned by the University Mail System. See http://www.mcc.ac.uk/cos/email/scanning for details.
X-UIDL: L&^!!72i!!7gI"!i()"!
X-Spam-Checker-Version: SpamAssassin 3.0.4 (2005-06-05) on 
	localhost.localdomain
X-Spam-Level: 
X-Spam-Status: No, score=-1.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.4
X-UID: 
Status: R
X-Status: NT
X-KMail-EncryptionState:  
X-KMail-SignatureState:  
X-KMail-MDN-Sent:  

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

--Boundary-00=_fBP1CVNy9johSBX
Content-Type: TEXT/PLAIN; CHARSET=US-ASCII
Content-ID: <Pine.GSO.4.58.0507131145142.20290@cass123.ast.cam.ac.uk>
Content-Disposition: INLINE

Hi all,

Attached is a script to reset your workbench to use the galahad registry.
Please try one of the following to change your workbench registry settings:

--------------------------------
Linux instructions:

1.  Save this attached script to disk
2.  Start the workbench
3.  Run the script from a command shell, e.g.

  "python /path/saved/to/reset-desktop-configuration.py"

  (substitute your own path, or run it from the directory where the file
  has been put).
--------------------------------

   OR

--------------------------------
Windows instructions:

1.  Save this attached script to disk
2.  Start the workbench
3.  Double-click on the saved script.  You may not have python installed,
   in which case windows won't know what to do with it;  if not, come and
   see me or follow the manual instructions below.
--------------------------------

   OR

--------------------------------
Manual solution *in the workbench*:

Step 1:
Choose System / COnfiguration / Change a setting

At the first prompt, enter:
  org.astrogrid.registry.query.endpoint
At the second prompt, enter:
  http://galahad.star.le.ac.uk:8080/galahad-registry/services/RegistryQuery

Step 2:
Choose System / COnfiguration / Change a setting

At the first prompt, enter:
  org.astrogrid.registry.admin.endpoint
At the second prompt, enter:
  http://galahad.star.le.ac.uk:8080/galahad-registry/services/RegistryAdmin
--------------------------------


AFTER THE FIX:

You can check the registry settings in the workbench by choosing
System / Configuration / Show settings.

You should not see any references to hydra.star.le.ac.uk in the registry
admin and query endpoints.

Cheers,
Kona.
--
Kona Andrews  ::  AstroGrid Project
Institute of Astronomy  ::  Madingley Road  ::  Cambridge CB3 0HA
Ph. +44 (0)774 765 1877 ::  Fax +44 (0)1223 337 523
--Boundary-00=_fBP1CVNy9johSBX
Content-Type: APPLICATION/X-PYTHON; NAME="reset-desktop-configuration.py"
Content-ID: <Pine.GSO.4.58.0507131145143.20290@cass123.ast.cam.ac.uk>
Content-Description: 
Content-Disposition: ATTACHMENT; FILENAME="reset-desktop-configuration.py"

#!/usr/bin/env python
#reset workbench endpoints.
# 
import xmlrpclib as x
import os
prefix = file(os.path.expanduser("~/.astrogrid-desktop")).next().rstrip()
s = x.Server(prefix + "xmlrpc")
s.system.configuration.setKey(
	"org.astrogrid.registry.query.endpoint"
	 , "http://galahad.star.le.ac.uk:8080/galahad-registry/services/RegistryQuery")
s.system.configuration.setKey(
	"org.astrogrid.registry.admin.endpoint"
	 , "http://galahad.star.le.ac.uk:8080/galahad-registry/services/RegistryAdmin")
s.system.configuration.setKey(
	"jes.job.controller.endpoint"
	 , "http://galahad.star.le.ac.uk:8080/astrogrid-jes/services/JobControllerService"	 
	)	
print "Reset endpoints to"
print "Registry query - http://galahad.star.le.ac.uk:8080/galahad-registry/services/RegistryQuery"
print "Registry admin - http://galahad.star.le.ac.uk:8080/galahad-registry/services/RegistryAdmin"
print "Job Controller - http://galahad.star.le.ac.uk:8080/astrogrid-jes/services/JobControllerService"
print "Don't forget to adjust job controller endpoint to a workgroup server if needed"
print "** Restart your workbench to make the changes take effect **"
	
--Boundary-00=_fBP1CVNy9johSBX--


