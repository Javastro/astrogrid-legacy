<?xml version="1.0"?>
<!DOCTYPE module  [
	<!ENTITY descriptors SYSTEM "classpath:/org/astrogrid/desktop/hivemind/voevent-descriptors.xml">
	]>
<module id="voevent" version="1.0.0" package="uk.ac.estar.voevent">
	
	<!-- new configurations -->
		<!--  none -->
	
	<!-- contributions to existing configurations -->

	<!--  publishing info -->
	<contribution configuration-id="framework.descriptors">
		<acr-module name="voevent" description="Access to services VOEVENT services - AL REFINE THIS.">
		&descriptors;
		</acr-module>
	</contribution>	
		
	<!--  all services to publish to this list -->
	<contribution configuration-id="framework.acrServices">
			<acrService id="inject" interface="Inject" />
	</contribution>
	
	<!--  add credits to the UI -->
	<contribution configuration-id="system.uiStructure" if="not (property system.browser.disabled)">
		<!--  AL - add  nice & small ESTAR & VOEVENT logos in the org.astrogrid.desktop.icons package -->
		<action parentName="projects" name="estarProject" 
			text="EStar" iconName="estar_icon.gif"
			object="service:system.browser" methodName="openURL">
			<tooltip>ESTAR - FILL in TITLE of PAGE</tooltip>			
			<parameter>FILL IN ESTAR URL</parameter>
		</action>		
		<action parentName="projects" name="voeventProject" 
			text="VOEvent" iconName="voevent_icon.gif"
			object="service:system.browser" methodName="openURL">
			<tooltip>VOEVENT - FILL in TITLE of PAGE</tooltip>			
			<parameter>FILL IN VOEVNET URL</parameter>
		</action>	
	</contribution>	
	
	<!-- factory defaults for config values -->
	<contribution configuration-id="hivemind.FactoryDefaults">
		<default symbol="voevent.sample.key" value="example value"/>
	</contribution>

	<!--  list of services to start on system startup (background tasks, network listeners, etc) -->
	<contribution configuration-id="hivemind.EagerLoad">
		<!--  none -->
	</contribution>
	
	<!-- make everything else  eager when testing -->
	<contribution configuration-id="hivemind.EagerLoad" if="property acr.debug">
		<load service-id="inject"/>
	</contribution>	
	
	<!-- services and implementations -->
	
	<service-point id="inject" interface="Inject">
		Injects VOEvents
		<interceptor service-id="system.throbber" />		
		<invoke-factory>
			<construct class="org.astrogrid.desktop.modules.voevent.InjectImpl" >
			<service>ivoa.registry</service>
			<string>${voevent.sample.key}</string>
			</construct>
		</invoke-factory>	
	</service-point>

<!--  null implementation, used if this service is disabled -->
	<implementation service-id="inject" if="property voevent.inject.disabled">
		<invoke-factory service-id="hivemind.lib.PlaceholderFactory" />	
	</implementation>
	
	
	<!--  add further services here  -->
	
 </module>
 