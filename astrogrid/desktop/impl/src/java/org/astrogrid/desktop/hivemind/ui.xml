<?xml version="1.0"?>
<!DOCTYPE module  [
	<!ENTITY descriptors SYSTEM "classpath:/org/astrogrid/desktop/hivemind/ui-descriptors.xml">
	
	]>
<module id="ui" version="1.0.0" package="org.astrogrid.acr.ui">
<!--  PREAMBLE -->
	<dependency module-id="system"/>
	<dependency module-id="framework" />
	<dependency module-id="astrogrid" />
	<dependency module-id="dialogs" />
	<dependency module-id="ivoa" />
	<dependency module-id="cds" />
	<dependency module-id="plastic" />				
			
	<contribution configuration-id="framework.descriptors">
		<acr-module name="ui" description="Applications for working with the VO">
		&descriptors;
		</acr-module>
	</contribution>	
		
	<contribution configuration-id="framework.acrServices">
			<acrService id="astroscope" interface="AstroScope"/>
			<acrService id="helioscope" interface="HelioScope"/>
			<acrService id="lookout" interface="Lookout" />
			<acrService id="applicationLauncher" interface="ApplicationLauncher" />
			<acrService id="myspaceBrowser" interface="MyspaceBrowser" />
			<acrService id="jobMonitor" interface="JobMonitor" />
			<acrService id="registryBrowser" interface="RegistryBrowser" />
	</contribution>

	
<!--  
==============================
UI STRUCTURES
 -->

<!-- assume that if this module is loaded, we're running as workbench -->
	<contribution configuration-id="system.uiStructure">
			<action parentName="help" name="about" text="About AstroGrid Workbench.." onEventDispatchThread="true"
			object="instance:java.lang.String" methodName="concat" iconName="AGlogo16x16.png"
			after="*" > 
			<parameter><![CDATA[
			<html>
			<h1>Astrogrid Workbench v${astrogrid.desktop.version}</h1>		
			<b>http://www.astrogrid.org/desktop</b><br>
			<h2>Contributors</h2>
			<ul>
			 <li>Alasdair Allan</li>
			<li>Elizabeth Auden</li>
			<li>Kona Andrews</li>
			<li>Kevin Benson</li>
			<li>Silvia Dalla</li>
			<li>Gary Gilchrist</li>
			<li>Eduardo Gonzalez</li>
			<li>Norman Gray</li>
			<li>Paul Harrison</li>
			<li>Tony Linde</li>
			<li>Jeff Lusted</li>
			<li>Phil Nicholson</li>
			<li>Keith Noddle</li>
			<li>Jonathan Tedds</li>
			<li>Dave Morris</li>
			<li>Catherine Qin</li>
			<li>Anita Richards</li>
			<li>Guy Rixon</li>
			<li>John Taylor</li>
			<li>Mark Taylor</li>
			<li>Nicholas Walton</li>
			<li>Noel Winstanley</li>
			</ul>			
			<h2>Acknowledgements</h2>
			Contains code and/or integrates with services provided by CADC, CDS, ESA-VO, NVO, Starlink, Plastic, VOTech

			<hr>
			<h2>Build Information</h2>
			Built: ${astrogrid.build.date}<br>
			At: ${astrogrid.build.location}<br>
			With ${astrogrid.build.jdk}<br>
			By: ${astrogrid.build.by}
			</html>
			]]></parameter>
		</action>	
	</contribution>
	
	
<!--  
===============================
ASTROSCOPE
 -->
	<service-point id="astroscope" interface="org.astrogrid.desktop.modules.ui.AstroScopeInternal">
			<interceptor service-id="system.snitchInterceptor" />
		<invoke-factory> 
		<construct class="org.astrogrid.desktop.modules.ui.AstroScopeFactory" >
				<service>system.ui</service> 
				<service>system.configuration</service>
				<service>system.help</service>
				<service>astrogrid.myspace</service>
				<service>dialogs.resourceChooser</service>
				<service>ivoa.registry</service>
				<service>ivoa.siap</service>
				<service>ivoa.cone</service>
				<service>ivoa.ssap</service>
				<service>cds.sesame</service>
				<service>system.tupperware</service>	
				<service>ui.sendTo</service>
				<service>system.snitch</service>
				<service>ui.registryBrowser</service>
<!--				<event-listener service-id="builtin.shutdown" />		-->																															
			</construct>
		</invoke-factory>	
	</service-point>

	<implementation service-id="astroscope" if="property ui.astroscope.disabled">
		<invoke-factory service-id="hivemind.lib.PlaceholderFactory" />	
	</implementation>
	
	<contribution configuration-id="system.uiStructure" if="not (property ui.astroscope.disabled)" >
		<action parentName="discovery" name="astroscope" text="AstroScope" before="helioscope" iconName="astroscope.png"
			object="service:astroscope" methodName="show" help-id="userInterface.astroscopeLauncher">
			<tooltip><![CDATA[
				<html>Search and visualise matches in all <br>
					available image, catalogue and  spectral archives by <br>
					offset from user defined sky position and radius.
					]]></tooltip>
		  </action>
	</contribution>	
		<contribution configuration-id="system.helpmap">
		<item id="userInterface.astroscopeLauncher" url="http://www2.astrogrid.org/science/documentation/data-explore/astroscope" />
		<item id="astroscope.menu.science" url="http://www2.astrogrid.org/science/documentation/data-explore/astroscope" />
		<item id="astroscope.menu.reference" url="http://www2.astrogrid.org/science" />

	</contribution>
	
	<!-- 
	=================================
	HELIOSCOPE
	 -->
	<service-point id="helioscope" interface="org.astrogrid.desktop.modules.ui.HelioScopeInternal">
				<interceptor service-id="system.snitchInterceptor" />
		<invoke-factory>
			<construct class="org.astrogrid.desktop.modules.ui.HelioScopeFactory">
				<service>system.ui</service> 
				<service>system.configuration</service>
				<service>system.help</service>
				<service>astrogrid.myspace</service>
				<service>dialogs.resourceChooser</service>
				<service>ivoa.registry</service>
				<service>astrogrid.stap</service>
				<service>system.tupperware</service>
				<service>ui.sendTo</service>	
				<service>system.snitch</service>			
				<service>ui.registryBrowser</service>									
<!--				<event-listener service-id="builtin.shutdown" />		-->																									
			</construct>
		</invoke-factory>	
	</service-point>

	<implementation service-id="helioscope" if="property ui.helioscope.disabled">
		<invoke-factory service-id="hivemind.lib.PlaceholderFactory" />	
	</implementation>	
	
	<contribution configuration-id="system.uiStructure" if="not (property ui.helioscope.disabled)" >	
		<action parentName="discovery" name="helioscope" text="HelioScope" after="astroscope" before="applicationLauncher1"  iconName="helioscope.png"
			object="service:helioscope" methodName="show" help-id="userInterface.helioscopeLauncher">
			<tooltip><![CDATA[
			<html>Search and visualise matches in all <br>
					available solar archives by<br>
					offset from user defined start and end times
			]]></tooltip>			
		</action>
	</contribution>	
	<contribution configuration-id="system.helpmap">
		<item id="userInterface.helioscopeLauncher" url="http://www2.astrogrid.org/science/documentation/data-explore/helioscope" />
		<item id="helioscope.menu.science" url="http://www2.astrogrid.org/science/documentation/data-explore/helioscope" />
		<item id="helioscope.menu.reference" url="http://www2.astrogrid.org/science" />
		
	</contribution>	
	
	<!--  
	====================================
	LOOKOUT
	 -->		
	<service-point id="lookout" interface="Lookout">
		<interceptor service-id="system.snitchInterceptor" />
		<interceptor service-id="astrogrid.login" />	
		<invoke-factory>
			<construct class="org.astrogrid.desktop.modules.ui.LookoutImpl" >
				<service>system.configuration</service>
				<service>system.help</service>
				<service>system.ui</service>
				<service>astrogrid.recorder</service>
				<service>astrogrid.processManager</service>
				<service>astrogrid.myspace</service>
				<configuration>astrogrid.processStrategies</configuration>
				<service>ui.sendTo</service>
				<service>astrogrid.jobs</service>
				<event-listener service-id="builtin.shutdown" />						
			</construct>
		</invoke-factory>	
	</service-point>

	<implementation service-id="lookout" if="property ui.lookout.disabled">
		<invoke-factory service-id="hivemind.lib.PlaceholderFactory" />	
	</implementation>	

	<contribution configuration-id="system.uiStructure" if="not (property ui.lookout.disabled)" >	
		<action parentName="services" name="lookout" text="Lookout" iconName="lookout.png"
			before="*" 
			object="service:lookout" methodName="show" help-id="userInterface.lookout" >
			<tooltip><![CDATA[
		<html>Monitor the progress of Tasks, Queries and Workflows submitted for<br>
		execution on the AstroGrid system including links to job transcripts.						
			]]></tooltip>
		</action>					
	</contribution>		
	
	<contribution configuration-id="system.helpmap">
		<item id="userInterface.lookout" url="http://www2.astrogrid.org/science/documentation/workbench-system-services/lookout" />
		<item id="lo.folderTree" url="http://www2.astrogrid.org/science/documentation/workbench-system-services/lookout" />
		<item id="lo.messageTable" url="http://www2.astrogrid.org/science/documentation/workbench-system-services/lookout" />		
		<item id="lookout.resultsTable" url="http://www2.astrogrid.org/science/documentation/workbench-system-services/lookout" />
		<item id="lookout.menu.science" url="http://www2.astrogrid.org/science/documentation/workbench-system-services/lookout" />

	</contribution>	
	
	<!-- for backwards compatabiltiy - delegates to lookout -->		
	<service-point id="jobMonitor" interface="JobMonitor">
		<invoke-factory>
			<construct class="org.astrogrid.desktop.modules.ui.LegacyJobMonitor" />
		</invoke-factory>	
	</service-point>

	<implementation service-id="jobMonitor" if="property ui.lookout.disabled"> <!-- disable this if lookout is disabled -->
		<invoke-factory service-id="hivemind.lib.PlaceholderFactory" />	
	</implementation>	

	<!-- 
	=======================================
	TASK LAUNCHER
	 -->
	<service-point id="applicationLauncher" interface="ApplicationLauncher">
		<interceptor service-id="system.snitchInterceptor" />
		<invoke-factory>
			<construct class="org.astrogrid.desktop.modules.ui.ApplicationLauncherFactory">
				<configuration>dialogs.toolEditors</configuration>
				<service>dialogs.resourceChooser</service>
				<service>astrogrid.applications</service>
				<service>astrogrid.myspace</service>
				<service>lookout</service>		
				<service>system.configuration</service>
				<service>system.help</service>
				<service>system.ui</service>
				<service>system.browser</service>
				<object>preference:acr.advanced</object>
<!--				<event-listener service-id="builtin.shutdown" />						-->
			</construct>
		</invoke-factory>	
	</service-point>

	<implementation service-id="applicationLauncher" if="property ui.applicationLauncher.disabled">
		<invoke-factory service-id="hivemind.lib.PlaceholderFactory" />	
	</implementation>	

	<contribution configuration-id="system.uiStructure" if="not (property ui.applicationLauncher.disabled)" >	
		<action parentName="workflow" name="applicationLauncher" text="Task Launcher" iconName="applaunch.png"
			object="service:applicationLauncher" methodName="show" before="*"
			help-id="userInterface.applicationLauncher">
			<tooltip><![CDATA[
		<html>Launches a single task to be executed on the AstroGrid system.<br>
	A task can be either a Query to a data centre or a noninteractive<br>
	Application that, e.g. operates on data files or runs a model.
			]]></tooltip>			
			</action>			
	</contribution>	

		<contribution configuration-id="system.uiStructure" if="not (property ui.applicationLauncher.disabled)" >	
		<action parentName="discovery" name="applicationLauncher1" text="Task Launcher" iconName="applaunch.png"
			object="service:applicationLauncher" methodName="show" after="*"
			help-id="userInterface.applicationLauncher">
			<tooltip><![CDATA[
		<html>Launches a single task to be executed on the AstroGrid system.<br>
	A task can be either a Query to a data centre or a noninteractive<br>
	Application that, e.g. operates on data files or runs a model.
			]]></tooltip>			
			</action>			
	</contribution>
	
	<contribution configuration-id="system.helpmap">
		<item id="userInterface.applicationLauncher" url="http://www2.astrogrid.org/science/documentation/workbench-data-analysis/task-launcher/task-launcher/" />
		<item id="applicationLauncher.menu.science" url="http://www2.astrogrid.org/science/documentation/workbench-data-analysis/task-launcher/task-launcher/" />
		
	</contribution>
	
	<!-- -
	====================================
	SIMPLIFIED APP LAUNCHER	
	 -->
	<service-point id="simpleApplicationLauncher" interface="org.astrogrid.desktop.modules.ui.TaskInvoker">
		<interceptor service-id="system.snitchInterceptor" />
		<invoke-factory>
			<construct class="org.astrogrid.desktop.modules.ui.SimplifiedAppLauncherFactory">
				<configuration>dialogs.regScopeToolEditors</configuration>
				<service>dialogs.resourceChooser</service>
				<service>astrogrid.applications</service>
				<service>astrogrid.myspace</service>
				<service>lookout</service>		
				<service>system.configuration</service>
				<service>system.help</service>
				<service>system.ui</service>
				<service>system.browser</service>
				<object>preference:acr.advanced</object>
<!--				<event-listener service-id="builtin.shutdown" />						-->
			</construct>
		</invoke-factory>	
	</service-point>

	<!-- 
	=======================================
	MYSPACE BROWSER
	 -->
	<service-point id="myspaceBrowser" interface="MyspaceBrowser">
		<interceptor service-id="system.snitchInterceptor" />
		<interceptor service-id="astrogrid.login" />
		<invoke-factory>
			<construct class="org.astrogrid.desktop.modules.ui.VospaceBrowserImpl" > 
<!--don't think it's safe to run multiple myspace browser yet
		<construct class="org.astrogrid.desktop.modules.ui.VoSpaceBrowserFactory"> -->
				<service>system.configuration</service>
				<service>system.help</service>
				<service>system.ui</service>
				<service>astrogrid.myspace</service>
				<service>ui.sendTo</service>
				<service>system.browser</service>
				<service>dialogs.resourceChooser</service>	
				<object>preference:acr.advanced</object>	
				<event-listener service-id="builtin.shutdown" />	
				<event-listener service-id="astrogrid.community" />						
			</construct>
		</invoke-factory>	
	</service-point>

	<implementation service-id="myspaceBrowser" if="property ui.myspaceBrowser.disabled">
		<invoke-factory service-id="hivemind.lib.PlaceholderFactory" />	
	</implementation>
	
		<contribution configuration-id="system.uiStructure" if="not (property ui.myspaceBrowser.disabled)" >	
		<action parentName="workflow" name="myspaceBrowser" text="Myspace" iconName="myspace.png"
			object="service:myspaceBrowser" methodName="show" after="*"
			help-id="userInterface.myspaceBrowser"
			 >			
			<tooltip><![CDATA[
			<html>Login to MySpace for browsing and utilisation of returned datasets,<br>
			queries and workflows in AstroGrid environment.
			]]></tooltip>
		</action>
	</contribution>	
	
	<contribution configuration-id="system.uiStructure" if="not (property ui.myspaceBrowser.disabled)" >	
		<action parentName="services"  name="myspaceBrowser1" text="Myspace" iconName="myspace.png"
			object="service:myspaceBrowser" methodName="show" after="lookout"
			help-id="userInterface.myspaceBrowser"			
			 >			
			<tooltip><![CDATA[
			<html>Login to MySpace for browsing and utilisation of returned datasets,<br>
			queries and workflows in AstroGrid environment.
			]]></tooltip>
		</action>
	</contribution>	
	<contribution configuration-id="system.helpmap">
		<item id="userInterface.myspaceBrowser" url="http://www2.astrogrid.org/science/documentation/workbench-system-services/myspace/myspace-help" />
		<item id="myspaceBrowser.menu.science" url="http://www2.astrogrid.org/science/documentation/workbench-system-services/myspace/myspace-help" />

	</contribution>			
	<!-- 
	==================================
	REGISTRY BROWSER
	 -->
	<service-point id="registryBrowser" interface="RegistryBrowser">
			<interceptor service-id="system.snitchInterceptor" />
		<invoke-factory>
		<construct class="org.astrogrid.desktop.modules.ui.RegistryBrowserFactory" >
				<service>system.help</service>
				<service>system.ui</service>
				<service>system.configuration</service>
				<service>hiveutils.ObjectBuilder</service>
				<!--<event-listener service-id="builtin.shutdown" />						-->
			</construct>
		</invoke-factory>	
	</service-point>

	<implementation service-id="registryBrowser" if="property ui.registryBrowser.disabled">
		<invoke-factory service-id="hivemind.lib.PlaceholderFactory" />	
	</implementation>	
	
	
		<contribution configuration-id="system.uiStructure" if="not (property ui.registryBrowser.disabled)" >	
		<action parentName="services" name="registryBrowser" text="Resources" iconName="resource.png"
			object="service:registryBrowser" methodName="show" after="*" 
			help-id="userInterface.registryBrowser">
			<tooltip><![CDATA[
			<html>Simple text-entry search for available <br>
			services and archives in the VO registry.
			]]></tooltip>			
		</action>
	</contribution>		
	<contribution configuration-id="system.helpmap">
		<item id="userInterface.registryBrowser" url="http://www2.astrogrid.org/science/documentation/workbench-system-services/resources/resources/" />
		<item id="registryBrowser.menu.science" url="http://www2.astrogrid.org/science/documentation/workbench-system-services/resources/resources/" />
	</contribution>	
	
	<!-- 
	==================================
	VOEXPLORER
	 -->
	 <!--  todo add a factory here.. -->
	<service-point id="voexplorer" interface="org.astrogrid.desktop.modules.ui.VOExplorerFactoryInternal">
			<interceptor service-id="system.snitchInterceptor" />
		<invoke-factory>
		<construct class="org.astrogrid.desktop.modules.ui.VOExplorerFactoryImpl" >
				<service>system.configuration</service>
				<service>system.help</service>
				<service>system.ui</service>
				<service>viewsBuilder</service>
				<!--<event-listener service-id="builtin.shutdown" />						-->
			</construct>
		</invoke-factory>	
	</service-point>

	<contribution configuration-id="hivemind.EagerLoad">
		<load service-id="voexplorer" />
	</contribution>
	
	<contribution configuration-id="system.plasticMessageHandlers">
		<object>service:voexplorer</object>
	</contribution>
	
	
	<service-point id="viewsBuilder" interface="org.astrogrid.desktop.hivemind.IterableObjectBuilder">
		Object builder for the set of views in voexplorer.
		<invoke-factory model="singleton">
			<construct class="org.astrogrid.desktop.hivemind.IterableObjectBuilderImpl">
				<log />
				<configuration>voviews</configuration>
				<service>hiveutils.ObjectTranslator</service>
				<service>hiveutils.EventLinker</service>
			</construct>
		</invoke-factory>
	</service-point>
	
	<configuration-point id="voviews" schema-id="hiveutils.ObjectBuilderSchema">
		Configuration point for the list of views available in voexplorer
	</configuration-point>
	
	
	<!--  
	**************************************************
	STORAGE VIEW
	-->
	<contribution configuration-id="voviews">
		<object name="storage" class="org.astrogrid.desktop.modules.ui.voexplorer.StorageView">
			<inject-arg />		
		</object>
	</contribution>
	
	<!--  
	***************************************************
	TASKS VIEW
	-->
	<contribution configuration-id="voviews">
		<object name="task" class="org.astrogrid.desktop.modules.ui.voexplorer.TaskView">
			<inject-arg />
		</object>
	</contribution>
	<!--  
	**************************************************
	RESOURCE VIEW
	-->
	<contribution configuration-id="voviews">
		<object name="resource" class="org.astrogrid.desktop.modules.ui.voexplorer.RegistryView">
			<inject-arg />
			<inject object="service-property:resourceFolders:list" />
			<inject object="object:registryGooglePanel" />
			<inject object="service:taskAggregateBuilder" />
		</object>
	</contribution>		
	
	<service-point id="resourceFolders" visibility="private" interface="org.astrogrid.desktop.modules.ui.voexplorer.resource.folders.ResourceFoldersStorage">
		Loads / saves the list of resource folders.
		<invoke-factory>
			<construct class="org.astrogrid.desktop.modules.ui.voexplorer.resource.folders.ResourceFoldersStorageImpl">
				<service>system.ui</service>
				<object>preference:astrogrid.workdir</object>
			</construct>
		</invoke-factory>
	</service-point>

	<!-- 
	****************************************
	Tasks and aggregates of tasks
	 -->
	 
	<service-point id="taskAggregateBuilder" interface="org.astrogrid.desktop.hivemind.IterableObjectBuilder">
		Object builder for the set of task aggregates in voexplorer
		<invoke-factory model="singleton">
			<construct class="org.astrogrid.desktop.hivemind.IterableObjectBuilderImpl">
				<log />
				<configuration>taskAggregates</configuration>
				<service>hiveutils.ObjectTranslator</service>
				<service>hiveutils.EventLinker</service>
			</construct>
		</invoke-factory>
	</service-point>	
		
	<configuration-point id="taskAggregates" schema-id="hiveutils.ObjectBuilderSchema">
		Configuration point for the list of task aggregates in voexplorer
	</configuration-point>
	
	<contribution configuration-id="taskAggregates">
		<object name="1invoke" class="org.astrogrid.desktop.modules.ui.voexplorer.tasks.TaskAggregate">
			<inject name="title" object="literal:string:Utilize" />
			<inject name="iconName" object="literal:string:run16.png" />
			<inject name="helpId" object="literal:string:resourceActions.invoke" />
			<inject name="special" object="literal:boolean:true" />
			<inject name="tasks" object="service:invokeTasksBuilder" />
		</object>
		<object name="2info" class="org.astrogrid.desktop.modules.ui.voexplorer.tasks.InfoTaskAggregate">
			<inject name="tasks" object="service:infoTasksBuilder" />
		</object>
		<object name="3seealso" class="org.astrogrid.desktop.modules.ui.voexplorer.tasks.TaskAggregate">
			<inject name="title" object="literal:string:See also" />
			<inject name="iconName" object="literal:string:browser16.png" />
			<inject name="helpId" object="literal:string:resourceActions.seeAlso" />
			<inject name="special" object="literal:boolean:true" />
			<inject name="tasks" object="service:seeAlsoTasksBuilder" />			
		</object>
		<object name="4export" class="org.astrogrid.desktop.modules.ui.voexplorer.tasks.ExportTaskAggregate">
			<inject object="service:system.tupperware" />
<!--			<inject object="service:system.plasticList" />-->
			<inject name="tasks" object="service:exportTasksBuilder" />			
		</object>		
	</contribution>
	
	<service-point id="invokeTasksBuilder" interface="org.astrogrid.desktop.hivemind.IterableObjectBuilder">
		Object builder for 'invoke' tasks
		<invoke-factory model="singleton">
			<construct class="org.astrogrid.desktop.hivemind.IterableObjectBuilderImpl">
				<log />
				<configuration>invokeTasks</configuration>
				<service>hiveutils.ObjectTranslator</service>
				<service>hiveutils.EventLinker</service>
			</construct>
		</invoke-factory>
	</service-point>	
		
	<configuration-point id="invokeTasks" schema-id="hiveutils.ObjectBuilderSchema">
		Configuration point for the list of 'invoke' tasks.
	</configuration-point>
		
		<service-point id="infoTasksBuilder" interface="org.astrogrid.desktop.hivemind.IterableObjectBuilder">
		Object builder for the set of 'info' tasks
		<invoke-factory model="singleton">
			<construct class="org.astrogrid.desktop.hivemind.IterableObjectBuilderImpl">
				<log />
				<configuration>infoTasks</configuration>
				<service>hiveutils.ObjectTranslator</service>
				<service>hiveutils.EventLinker</service>
			</construct>
		</invoke-factory>
	</service-point>	
		
	<configuration-point id="infoTasks" schema-id="hiveutils.ObjectBuilderSchema">
		Configuration point for the list of 'info' tasks
	</configuration-point>
	
		<service-point id="seeAlsoTasksBuilder" interface="org.astrogrid.desktop.hivemind.IterableObjectBuilder">
		Object builder for the list of 'see also' tasks
		<invoke-factory model="singleton">
			<construct class="org.astrogrid.desktop.hivemind.IterableObjectBuilderImpl">
				<log />
				<configuration>seeAlsoTasks</configuration>
				<service>hiveutils.ObjectTranslator</service>
				<service>hiveutils.EventLinker</service>
			</construct>
		</invoke-factory>
	</service-point>	
		
	<configuration-point id="seeAlsoTasks" schema-id="hiveutils.ObjectBuilderSchema">
		Configuration point for the list of 'see also' tasks
	</configuration-point>
	
		<service-point id="exportTasksBuilder" interface="org.astrogrid.desktop.hivemind.IterableObjectBuilder">
		Object builder for the set of  'export' tasks
		<invoke-factory model="singleton">
			<construct class="org.astrogrid.desktop.hivemind.IterableObjectBuilderImpl">
				<log />
				<configuration>exportTasks</configuration>
				<service>hiveutils.ObjectTranslator</service>
				<service>hiveutils.EventLinker</service>
			</construct>
		</invoke-factory>
	</service-point>	
		
	<configuration-point id="exportTasks" schema-id="hiveutils.ObjectBuilderSchema">
		Configuration point for the list of metadata tasks
	</configuration-point>	 
	
	<!--  lists of tasks  -->
	<contribution configuration-id="invokeTasks">
		<object name="astroscope" class="org.astrogrid.desktop.modules.ui.voexplorer.tasks.AstroscopeTask">
			<inject object="service:astroscope" />
		</object>
		<object name="helioscope" class="org.astrogrid.desktop.modules.ui.voexplorer.tasks.HelioscopeTask">
			<inject object="service:helioscope" />
		</object>		
		<object name="query" class="org.astrogrid.desktop.modules.ui.voexplorer.tasks.BuildQueryTask" />
		<object name="cone" class="org.astrogrid.desktop.modules.ui.voexplorer.tasks.ConeSearchTask">
			<inject object="service:simpleApplicationLauncher"/>
		</object>
		<object name="cea" class="org.astrogrid.desktop.modules.ui.voexplorer.tasks.CeaTask">
			<inject object="service:simpleApplicationLauncher"/>
		</object>
		<object name="siap" class="org.astrogrid.desktop.modules.ui.voexplorer.tasks.SiapTask">
			<inject object="service:simpleApplicationLauncher"/>
		</object>
		<object name="ssap" class="org.astrogrid.desktop.modules.ui.voexplorer.tasks.SsapTask">
			<inject object="service:simpleApplicationLauncher"/>
		</object>		
		<object name="stap" class="org.astrogrid.desktop.modules.ui.voexplorer.tasks.StapTask">
			<inject object="service:simpleApplicationLauncher"/>
		</object>				
		<object name="web" class="org.astrogrid.desktop.modules.ui.voexplorer.tasks.WebInterfaceTask">
			<inject object="service:system.browser" />
		</object>				
		<object name="script" class="org.astrogrid.desktop.modules.ui.voexplorer.tasks.GenerateScriptTask" />
	</contribution>
	
	<contribution configuration-id="infoTasks">
	</contribution>			

	<contribution configuration-id="seeAlsoTasks">
		<object name="1further" class="org.astrogrid.desktop.modules.ui.voexplorer.tasks.FurtherInfoTask">
			<inject object="service:system.browser"/>
		</object>
		<object name="2contact" class="org.astrogrid.desktop.modules.ui.voexplorer.tasks.ContactTask">
			<inject object="service:system.browser"/>
		</object>	
	</contribution>
	
	<contribution configuration-id="exportTasks">
		<object name="save" class="org.astrogrid.desktop.modules.ui.voexplorer.tasks.SaveResourceTask" >
			<inject object="service:dialogs.resourceChooser" />
			<inject object="service:ivoa.registry" />
			<inject object="service:astrogrid.myspace" />
		</object>
		<object name="saveIds" class="org.astrogrid.desktop.modules.ui.voexplorer.tasks.SaveIdListTask" >
			<inject object="service:dialogs.resourceChooser" />
			<inject object="service:astrogrid.myspace" />
		</object>
	</contribution>
		
	<!--  help links -->
		<contribution configuration-id="system.helpmap">
		<item id="userInterface.voexplorer" url="http://wiki.astrogrid.org/bin/view/Astrogrid/VoExplorer#Overview" />
		<item id="voexplorer.hierarchies" url="http://wiki.astrogrid.org/bin/view/Astrogrid/VoExplorer#Folders"/>

		<item id="voexplorer.actions" url="http://wiki.astrogrid.org/bin/view/Astrogrid/VoExplorer#Actions"/>
		<item id="resourceActions.invoke" url="http://wiki.astrogrid.org/bin/view/Astrogrid/VoExplorer#Invoke_Actions" />
		<item id="resourceActions.info" url="http://wiki.astrogrid.org/bin/view/Astrogrid/VoExplorer#Info_Actions" />
		<item id="resourceActions.seeAlso" url="http://wiki.astrogrid.org/bin/view/Astrogrid/VoExplorer#See_Also_Actions" />
		<item id="resourceActions.metadata" url="http://wiki.astrogrid.org/bin/view/Astrogrid/VoExplorer#Metadata_Actions" />
		
		<item id="resourceTask.astroscope" url="http://wiki.astrogrid.org/bin/view/Astrogrid/VoExplorer#Astroscope" />
		<item id="resourceTask.buildQuery" url="http://wiki.astrogrid.org/bin/view/Astrogrid/VoExplorer#BuildQuery" />
		<item id="resourceTask.cea" url="http://wiki.astrogrid.org/bin/view/Astrogrid/VoExplorer#Invoke_Task"/>
		<item id="resourceTask.cone" url="http://wiki.astrogrid.org/bin/view/Astrogrid/VoExplorer#Catalogue_Search"/>
		<item id="resourceTask.script" url="http://wiki.astrogrid.org/bin/view/Astrogrid/VoExplorer#Generate_Script" />
		<item id="resourceTask.siap" url="http://wiki.astrogrid.org/bin/view/Astrogrid/VoExplorer#Image_Search" />		
		<item id="resourceTask.ssap" url="http://wiki.astrogrid.org/bin/view/Astrogrid/VoExplorer#Spectrum_Search"/>		
		<item id="resourceTask.web" url="http://wiki.astrogrid.org/bin/view/Astrogrid/VoExplorer#Open_Web_Interface"/>		
		
		<item id="resouceFolders" url="http://wiki.astrogrid.org/bin/view/Astrogrid/VoExplorer#Registry_View"/>
		<item id="resouceFolders.buttons" url="http://wiki.astrogrid.org/bin/view/Astrogrid/VoExplorer#Buttons" />
	</contribution>	
	
	
	<!--
	================================
	SEND-TO MENU
	 -->
	<service-point id="sendTo" interface="org.astrogrid.desktop.modules.ui.sendto.SendToMenu">
	<invoke-factory model="primitive">
		<construct class="org.astrogrid.desktop.modules.ui.sendto.SendToMenuImpl">
			<configuration>sendToItems</configuration>
		</construct>
	</invoke-factory>
	</service-point>
	
	<configuration-point id="sendToItems" schema-id="system.objects">
		List of SendToActions and SendToActionFactories used to populate the send-to menu.
	</configuration-point>

	<contribution configuration-id="sendToItems">
		<!-- too likely to fail (large data, or poor job of displaying) so will comment out
		<object>instance:org.astrogrid.desktop.modules.ui.sendto.ShowSTA</object>
		-->
		<object>service:saveSTA</object>
		<object>service:viewBrowserSTA</object>
		<object>service:plasticSTF</object>
		<object>service:votableBroadcastSTA</object>
		<object>service:fitsBroadcastSTA</object>
		<object>service:spectrumBroadcastSTA</object>
	</contribution>	
	
	<!-- actions for the menu -->
	<service-point id="saveSTA" visibility="private"
		interface="org.astrogrid.desktop.modules.ui.sendto.SendToAction">
		<invoke-factory model="primitive">
			<construct class="org.astrogrid.desktop.modules.ui.sendto.SaveSTA">
				<service>dialogs.resourceChooser</service>
				<service>astrogrid.myspace</service>
			</construct>
		</invoke-factory>
	</service-point>

	<service-point id="viewBrowserSTA" visibility="private"
		interface="org.astrogrid.desktop.modules.ui.sendto.SendToAction">
		<invoke-factory model="primitive">
			<construct class="org.astrogrid.desktop.modules.ui.sendto.ViewBrowserSTA">
				<service>system.browser</service>
				<service>framework.htmlResultTransformer</service>
			</construct>
		</invoke-factory>
	</service-point>	

	
		<service-point id="votableBroadcastSTA" visibility="private"
		interface="org.astrogrid.desktop.modules.ui.sendto.SendToAction">
		<invoke-factory model="primitive">
			<construct class="org.astrogrid.desktop.modules.ui.sendto.BroadcastPlasticVotableSTA">
				<service>astrogrid.myspace</service>
				<service>system.tupperware</service>
			</construct>
		</invoke-factory>
	</service-point>	
	
		<service-point id="fitsBroadcastSTA" visibility="private"
		interface="org.astrogrid.desktop.modules.ui.sendto.SendToAction">
		<invoke-factory model="primitive">
			<construct class="org.astrogrid.desktop.modules.ui.sendto.BroadcastPlasticFitsSTA">
				<service>system.tupperware</service>
			</construct>
		</invoke-factory>
	</service-point>	
	
			<service-point id="spectrumBroadcastSTA" visibility="private"
		interface="org.astrogrid.desktop.modules.ui.sendto.SendToAction">
		<invoke-factory model="primitive">
			<construct class="org.astrogrid.desktop.modules.ui.sendto.BroadcastPlasticSpectrumSTA">
				<service>system.tupperware</service>
			</construct>
		</invoke-factory>
	</service-point>	
	
			<service-point id="plasticSTF" visibility="private"
		interface="org.astrogrid.desktop.modules.ui.sendto.SendToActionFactory">
		<invoke-factory model="primitive">
			<construct class="org.astrogrid.desktop.modules.ui.sendto.PlasticSendToActionFactory">
				<service>astrogrid.myspace</service>
				<service>system.tupperware</service>
			</construct>
		</invoke-factory>
	</service-point>		

 </module>
 