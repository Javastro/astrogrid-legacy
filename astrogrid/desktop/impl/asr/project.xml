<?xml version="1.0" encoding="UTF-8"?>
<project xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" >

    <extend>${basedir}/../build/project-template.xml</extend>
        <artifactId>asr</artifactId>
        <name>Astro Runtime (Headless version)</name>
        <description>
	 Astro Runtime - server version
	</description>
        <shortDescription>Astro Runtime - An API for the Virtual Observatory</shortDescription>
 
        <build>
                <!-- asr - run all tests apart from the ones involving ui -->
             <unitTest>
             	<includes>
             		<include>**/All*IntegrationTests.java</include>
             		<include>**/All*UnitTests.java</include>
             	</includes>
             	<excludes>
             		<exclude>**/ui/**</exclude>
             		<exclude>**/dialogs/**</exclude>
             		<exclude>**/adqlEditor/**</exclude>
             		<exclude>**/workflowBuilder/**</exclude>
             	</excludes>
					  <resources>
                                <resource>
                                        <directory>${basedir}/../test/java</directory>
                                        <includes>
                                                <include>**/*.properties</include>
                                                <include>**/*.xml</include>
                                                <include>**/*.xsl</include>
                                                <include>**/*.dtd</include>
                                                <include>**/*.xsd</include>
                                                <include>**/*.vot</include>
                                        </includes>
                                </resource>								
                        </resources>	             	
             </unitTest>
             <!-- modifications to build asr - basically no UI -->
             <sourceModifications>
                  <sourceModification>
                    <className>${ifBuildingASR}</className>
                    <includes>
                    	<include>org/astrogrid/Headless*.java</include>
                    	<include>org/astrogrid/*UnitTest.java</include>
                    	<include>org/astrogrid/*IntegrationTest.java</include>
                    	
                    	<include>org/astrogrid/acr/AllAcrIntegrationTests.java</include>
                    	<include>org/astrogrid/acr/AllAcrUnitTests.java</include>                    	
                    	<include>org/astrogrid/desktop/BuildInprocess*.java</include>
                    	<include>**/alternatives/*.java</include>
                    	<include>**/framework/*.java</include>
                    	<include>**/hivemind/**</include>
                    	
                    	<include>**/modules/**</include>
                    	<include>**/protocol/**</include>
                    	
                    	<include>**/All*IntegrationTests.java</include>
                    	<include>**/All*UnitTests.java</include>
                    </includes>
                    <excludes>
                      <exclude>org/astrogrid/desktop/modules/ui/**</exclude>
                      <exclude>org/astrogrid/desktop/modules/system/HelpServerImpl.java</exclude>
                      <exclude>org/astrogrid/desktop/modules/system/SwingSetup.java</exclude>
                      <exclude>org/astrogrid/desktop/modules/system/UIImpl.java</exclude>
                      <exclude>org/astrogrid/desktop/modules/system/BrowserLauncherBrowserControl.java</exclude>
                      <exclude>org/astrogrid/desktop/modules/ag/LoginDialogue.java</exclude>
                      <exclude>org/astrogrid/desktop/modules/dialogs/**</exclude>
                      <exclude>org/astrogrid/desktop/modules/adqlEditor/**</exclude>
                      <exclude>org/astrogrid/desktop/modules/workflowBuilder/**</exclude>
                      <!-- keep this out - as unfinished, and drags in all xbean stuff -->
                      <exclude>org/astrogrid/desktop/modules/ivoa/SkyNodeImpl.java</exclude>
						<!--  test classes we can't compile or don't want -->
                      <exclude>**/*SystemTest*.java</exclude>
                      <exclude>**/*TransportTest*.java</exclude>              
                  	</excludes>
                  	
                  </sourceModification>
               	</sourceModifications>
                <resources>
                        <resource>
                                <directory>${basedir}/../src/java</directory>
                                <includes>
                                        <include>**/hivemind/*.xml</include>
                                        <include>**/hivedoc/*.*</include>                                        
                                        <include>astrogrid.properties</include>
                                        <include>default-log4j.properties</include>
                                        <include>org/astrogrid/desktop/modules/system/transformers/*.xsl</include>
                                </includes>
                        </resource>
                        <resource><!-- includes custom log4j file for asr variant -->
                        	<directory>${basedir}/resources</directory>
                        	<includes>
                        		<include>*.properties</include>
                        	</includes>
                        </resource>
                </resources>
        </build>

        <dependencies>
<!--  interface zip - only used in packaging. -->
<dependency>
	<groupId>org.astrogrid</groupId>
	<artifactId>acr-interface-zip</artifactId>
	<version>${astrogrid.desktop.version}</version>
	<!--  work-around for maven bug - can't have 2 artifacts with same id, even if they are differtent types -->
	<jar>acr-interface-${astrogrid.desktop.version}.zip</jar>
	<type>zip</type>
	<properties>
		<unzip>true</unzip>
	</properties>
</dependency>
<!--  scripting CDK -->
 <dependency>
       <groupId>org.astrogrid</groupId>
       <artifactId>astrogrid-scripting</artifactId><!--  todo - is this used anywhere? -->
       <version>${astrogrid.scripting.version}</version>
                <properties>
		    <dist.bundle>true</dist.bundle>		
		    <strip>true</strip>    
                </properties>
    </dependency>
        <dependency>
                <groupId>org.astrogrid</groupId>
                <artifactId>astrogrid-cea-server</artifactId>
                <version>${astrogrid.applications.version}</version>
                <properties>
		    <dist.bundle>true</dist.bundle>		    
		    <strip>true</strip>
                </properties>
        </dependency>
        <!-- helper libraries -->
        <dependency>
                <groupId>starlink</groupId>
                <artifactId>stil</artifactId>
               <version>2.6</version>
                <url>http://www.star.bristol.ac.uk/~mbt/stil/</url>
                <properties>
		    <dist.bundle>true</dist.bundle>		    
		    <strip>true</strip>
                </properties>
        </dependency>
    <dependency>
      <artifactId>junit</artifactId>
      <groupId>junit</groupId>
      <version>3.8</version>
      <properties>
		    <dist.bundle>true</dist.bundle>		    
		    <strip>true</strip>
      </properties>
    </dependency>

<!--  WORKFLOW CDK -->
     <!-- workflow objects -->
                <dependency>
                        <groupId>org.astrogrid</groupId>
                        <artifactId>astrogrid-workflow</artifactId>
                        <version>${astrogrid.workflow.version}</version>
                        <url>http://www.astrogrid.org/</url>
                        <properties>
				<dist.bundle>true</dist.bundle>
				<strip>true</strip>
                        </properties>
                </dependency>
        <!-- jes -->
                <dependency>
                           <groupId>org.astrogrid</groupId>
                           <artifactId>astrogrid-jes-delegate</artifactId>
                           <version>${astrogrid.jes.version}</version>
                        <url>http://www.astrogrid.org/</url>
                        <properties>
				<dist.bundle>true</dist.bundle>		
				<strip>true</strip>						
                        </properties>
                    </dependency>
                <dependency>
                           <groupId>org.astrogrid</groupId>
                           <artifactId>astrogrid-workflow-objects</artifactId>
                           <version>${astrogrid.workflowobjects.version}</version>
                        <url>http://www.astrogrid.org/</url>
                        <properties>
				<dist.bundle>true</dist.bundle>			
				<strip>${strip.castor}</strip>                            
                        </properties>
                </dependency>
        <!-- cea client -->
                <dependency>
                           <groupId>org.astrogrid</groupId>
                           <artifactId>astrogrid-cea-client</artifactId>
                           <version>${astrogrid.applications.version}</version>
                        <url>http://www.astrogrid.org/</url>
                        <properties>
				<dist.bundle>true</dist.bundle>	
				<strip>true</strip>                                
                        </properties>
                </dependency>
	  

        <!-- external libs -->
                  <!-- helper for object models -->
                <dependency>
                        <artifactId>commons-jxpath</artifactId>
                        <groupId>commons-jxpath</groupId>
                        <url>http://jakarta.apache.org/commons/</url>
                        <version>1.1-patched</version>
                        <properties>
				<dist.bundle>true</dist.bundle>		
				<strip>${strip.castor}</strip>				
                        </properties>
                </dependency>
                <!-- required by castor -->
                <dependency>
                        <artifactId>castor</artifactId>
                        <groupId>castor</groupId>
                        <version>0.9.5-xml</version>
                        <url>http://castor.exolab.org/</url>
                        <properties>
				<dist.bundle>true</dist.bundle>						
				<strip>${strip.castor}</strip>				
                        </properties>
                </dependency>
               <dependency>
                    <id>regexp</id>
                <version>1.3</version>
                <url>http://jakarta.apache.org/commons/</url>
                        <properties>
				<dist.bundle>true</dist.bundle>				
				<strip>${strip.castor}</strip>			
                        </properties>
                </dependency>
                
                
       <!--  CORE CDK -->

<!-- filemanager -->
    <dependency>
      <artifactId>astrogrid-filemanager-client</artifactId>
      <groupId>org.astrogrid</groupId>
      <version>${astrogrid.filemanager.version}</version>
      <properties>
        <dist.bundle>true</dist.bundle>
        <strip>true</strip>        
      </properties>
    </dependency>

    <dependency>
      <artifactId>astrogrid-filemanager-contract</artifactId>
      <groupId>org.astrogrid</groupId>
      <version>${astrogrid.filemanager.version}</version>
      <properties>
        <dist.bundle>true</dist.bundle>
        <strip>true</strip>        
      </properties>
    </dependency>

<!-- filestore -->
    <dependency>
      <groupId>org.astrogrid</groupId>
      <artifactId>astrogrid-filestore-client</artifactId>
      <version>${astrogrid.filestore.version}</version>
      <type>jar</type>
      <url>http://www.astrogrid.org/</url>
      <properties>
        <dist.bundle>true</dist.bundle>
        <strip>true</strip>        
      </properties>
    </dependency>

    <dependency>
      <groupId>org.astrogrid</groupId>
      <artifactId>astrogrid-filestore-common</artifactId>
      <version>${astrogrid.filestore.version}</version>
      <type>jar</type>
      <url>http://www.astrogrid.org/</url>
      <properties>
        <dist.bundle>true</dist.bundle>
        <strip>true</strip>        
      </properties>
    </dependency>

<!-- community -->
    <dependency>
      <groupId>org.astrogrid</groupId>
      <artifactId>astrogrid-community-common</artifactId>
      <version>${astrogrid.community.version}</version>
      <type>jar</type>
      <url>http://www.astrogrid.org/</url>
      <properties>
        <dist.bundle>true</dist.bundle>
<!--        <strip>${strip.security}</strip>        -->
		<strip>true</strip>
      </properties>
    </dependency>

    <dependency>
      <groupId>org.astrogrid</groupId>
      <artifactId>astrogrid-community-client</artifactId>
      <version>${astrogrid.community.version}</version>
      <type>jar</type>
      <url>http://www.astrogrid.org/</url>
      <properties>
        <dist.bundle>true</dist.bundle>
<!--        <strip>${strip.security}</strip>        -->
			<strip>true</strip>
      </properties>
    </dependency>

    <dependency>
      <groupId>org.astrogrid</groupId>
      <artifactId>astrogrid-community-resolver</artifactId>
      <version>${astrogrid.community.version}</version>
      <type>jar</type>
      <url>http://www.astrogrid.org/</url>
      <properties>
        <dist.bundle>true</dist.bundle>
<!--        <strip>${strip.security}</strip>    -->
			<strip>true</strip>
      </properties>
    </dependency>

    <dependency>
      <artifactId>astrogrid-registry-common</artifactId>
      <groupId>org.astrogrid</groupId>
      <version>${astrogrid.registry.version}</version>
      <url>http://www.astrogrid.org/</url>
      <properties>
        <dist.bundle>true</dist.bundle>
        <strip>true</strip>        
      </properties>
    </dependency>

    <dependency>
      <artifactId>astrogrid-registry-client-lite</artifactId>
      <groupId>org.astrogrid</groupId>
      <version>${astrogrid.registry.version}</version>
      <url>http://www.astrogrid.org/</url>
      <properties>
        <dist.bundle>true</dist.bundle>
        <strip>true</strip>        
      </properties>
    </dependency>

<!-- supporting libraries for registry- don't understand what half of these do,
                TODO: work out which can be removed.-->
    <dependency>
      <groupId>org.astrogrid</groupId>
      <artifactId>astrogrid-pal-oldquery</artifactId>
      <version>${astrogrid.pal.version}</version>
      <type>jar</type>
      <properties>
        <dist.bundle>true</dist.bundle>
        <strip>true</strip>        
      </properties>
    </dependency>

    <dependency>
<!-- dunno if this one is required -->
      <artifactId>astrogrid-slinger-api</artifactId>
      <groupId>org.astrogrid</groupId>
      <version>${astrogrid.slinger.version}</version>
      <properties>
        <dist.bundle>true</dist.bundle>
        <strip>true</strip>        
      </properties>
    </dependency>

    <dependency>
<!-- more crap? -->
      <artifactId>astrogrid-utils</artifactId>
      <groupId>org.astrogrid</groupId>
      <version>${astrogrid.utils.stable}</version>
      <properties>
        <dist.bundle>true</dist.bundle>
        <strip>true</strip>        
      </properties>
    </dependency>

<!-- 3rd party libs-->
<dependency> 
     <!-- jaxp will be native for java 1.5. Until then this is required -->
	 <artifactId>jaxp</artifactId>
	 <groupId>jaxp</groupId>
	 <version>1.4-20050623</version>
	 <type>jar</type>
	 <properties>    	 
      <dist.bundle>true</dist.bundle>
                <strip>${strip.xml}</strip>
	 </properties>		 
 </dependency>
 
    <dependency>
      <groupId>xerces</groupId>
<!--	<artifactId>xercesImpl</artifactId>-->
      <artifactId>xerces</artifactId>
      <version>2.4.0-patched</version>
<!--
	<version>2.7.1</version>
-->
      <type>jar</type>
      <url>http://xml.apache.org/</url>
      <properties>     
        <dist.bundle>true</dist.bundle>
                <strip>${strip.xml}</strip>
      </properties>
    </dependency>

    <dependency>
      <groupId>xalan</groupId>
      <artifactId>xalan</artifactId>
      <version>2.7.0</version>
      <type>jar</type>
      <url>http://xml.apache.org/</url>
      <properties>   
        <dist.bundle>true</dist.bundle>
                <strip>${strip.xml}</strip>
      </properties>
    </dependency>
    
  <dependency>
    <groupId>xalan</groupId>
    <artifactId>serializer</artifactId>
    <version>2.7.0</version>
    <type>jar</type>
    <url>http://xml.apache.org/</url>
    <properties>    
      <dist.bundle>true</dist.bundle>
                <strip>${strip.xml}</strip>
    </properties>
  </dependency>
    
    <dependency>
      <groupId>xml-apis</groupId>
      <artifactId>xml-apis</artifactId>
      <version>1.0.b2-patched</version>
      <type>jar</type>
      <url>http://xml.apache.org/</url>
      <properties>   
        <dist.bundle>true</dist.bundle>
                <strip>${strip.xml}</strip>
      </properties>
    </dependency>

    
    <!-- axis, and the jars it relies upon
    
     -->
    <dependency>
	    <groupId>axis</groupId>
	    <type>jar</type>
	    <artifactId>axis</artifactId>
	    <version>1.3</version>
	    <properties>
        	<dist.bundle>true</dist.bundle>     			    
	    		 <strip>false</strip>	 	
	    </properties>
    </dependency>
    <dependency>
	    <groupId>axis</groupId>
	    <type>jar</type>
	    <artifactId>wsdl4j</artifactId>
	    <version>1.5.1</version>
	    <properties>
	    		 <strip>false</strip>			    
		    <dist.bundle>true</dist.bundle>	    	
	    </properties>
    </dependency>
    <dependency>
	    <groupId>axis</groupId>
	    <type>jar</type>
	    <artifactId>axis-saaj</artifactId>
	    <version>1.3</version>
	    <properties>
	    		 <strip>false</strip>	   
		    <dist.bundle>true</dist.bundle>		    
	    </properties>
    </dependency>
    <dependency>
	    <groupId>axis</groupId>
	    <type>jar</type>
	    <artifactId>axis-jaxrpc</artifactId>
	    <version>1.3</version>
	    <properties>
	    		 <strip>false</strip><!-- was seeing oddities about missing statics -->	    
		    <dist.bundle>true</dist.bundle>	    
	    </properties>
    </dependency>

    <dependency>
	    <groupId>axis</groupId>
	    <type>jar</type>
	    <artifactId>commons-discovery</artifactId>
	    <version>0.2</version>
	    <properties>
	    		 <strip>false</strip>	<!--  causes evil errors - related to missing static methods -->    
		    <dist.bundle>true</dist.bundle>		    
	    </properties>
    	</dependency>    
    <!--  don't want this , but required by globus. -->
    <dependency>
	    <id>log4j</id>	    
	    <version>1.2.8</version>	    
	    <properties>		     
	    		 <strip>false</strip>
		    <dist.bundle>true</dist.bundle>
	    </properties>
    </dependency>    

        <!-- storage -->
<dependency>
	<artifactId>jdbm</artifactId>
	<groupId>jdbm</groupId>
	<version>1.0</version>
	<properties>		
		<dist.bundle>true</dist.bundle>	
		<strip>true</strip>	
	</properties>
</dependency>

<!--  cache - -->
	<dependency>
		<groupId>ehcache</groupId>
		<artifactId>ehcache</artifactId>
		<version>1.2.4</version>
		<properties>
			<dist.bundle>true</dist.bundle>
					    <strip>true</strip>    
		</properties>
	</dependency>

<!-- VFS -->
	<dependency>
		<groupId>commons-vfs</groupId>
		<artifactId>commons-vfs</artifactId>
		<version>1.0</version>
		<properties>
				<dist.bundle>true</dist.bundle>
			    <strip>true</strip>    
		</properties>
	</dependency>	

	<dependency>
		<groupId>commons-net</groupId>
		<artifactId>commons-net</artifactId>
		<version>1.4.1</version>
		<properties>
				<dist.bundle>true</dist.bundle>
			    <strip>true</strip>    
		</properties>
	</dependency>	 
	
	<dependency>
		<groupId>jsch</groupId>
		<artifactId>jsch</artifactId>
		<version>0.1.32</version>
		<url>http://www.jcraft.com/jsch/</url>
		<properties>
				<dist.bundle>true</dist.bundle>
			    <strip>true</strip>    
		</properties>
	</dependency>			
	
	
<!-- security -->
	<dependency>
        		<groupId>org.astrogrid</groupId>
        		<artifactId>astrogrid-security</artifactId>
        		<version>${astrogrid.security.version}</version>
        		<type>jar</type>
	 	<properties>
 			<dist.bundle>true</dist.bundle>
<!-- 			<strip>${strip.security}</strip>-->
				<strip>false</strip>
 		</properties>        		
        	</dependency>
        		 
 <!-- Dependencies introduced by use of MyProxy. -->
 <dependency>
 	<groupId>globus</groupId>
 	<artifactId>cog-jglobus</artifactId>
 	<version>1.2</version>
 	<type>jar</type>
 	<properties>
 		<dist.bundle>true</dist.bundle>
 			<strip>false</strip>
 	</properties>
 </dependency>
 
 <dependency>
 	<groupId>globus</groupId>
 	<artifactId>cog-jgss</artifactId>
 	<version>1.2</version>
 	<type>jar</type>
 	<properties>
 		<dist.bundle>true</dist.bundle>
 			<strip>false</strip>
 	</properties>
 </dependency>

 <dependency>
 	<groupId>globus</groupId>
 	<artifactId>cog-puretls</artifactId>
 	<version>1.2</version>
 	<type>jar</type>
 	<properties>
	    	<!-- add this aftrer the main javaapp process, as a work-around for package capitalization -->
			<bundle.later>true</bundle.later>
		    <uberjar.bundle>false</uberjar.bundle>		  	
 		<dist.bundle>true</dist.bundle>
 			<strip>false</strip>
 	</properties> 	
 </dependency>
<!--  problem here. -->
 <dependency>
   <groupId>globus</groupId>
   <artifactId>cog-cryptix</artifactId>
   <version>1.2</version>
   <type>jar</type>
 	<properties>
 		<dist.bundle>true</dist.bundle>
 			<strip>false</strip>
 	</properties>   
 </dependency>
       
        	<dependency>
        		<groupId>globus</groupId>
        		<artifactId>cog-cryptix32</artifactId>
        		<version>1.2</version>
        		<type>jar</type>
 	<properties>
 		<dist.bundle>true</dist.bundle>
 			<strip>false</strip>
 	</properties>        		
        	</dependency>
        	
        	<dependency>
        		<groupId>globus</groupId>
        		<artifactId>cog-cryptix-asn1</artifactId>
        		<version>1.2</version>
        		<type>jar</type>
 	<properties>
 		<dist.bundle>true</dist.bundle>
 			<strip>false</strip>
 	</properties>        		
        	</dependency>
     	<!-- dependencies for signatures -->
        	<dependency>
        		<groupId>xmlsec</groupId>
        		<artifactId>xmlsec</artifactId>
        		<version>1.3.0</version>
        		<type>jar</type>
 	<properties>
 		<dist.bundle>true</dist.bundle>
 			<strip>false</strip>
 	</properties>        		
        	</dependency>
        	
    <!-- crypto provider that myproxy client requires -->
        	<dependency>
        		<groupId>bouncycastle</groupId>
        		<artifactId>bcprov-jdk14</artifactId>
        		<version>129</version>
        		<type>jar</type>
 	<properties> 	
 		<dist.bundle>true</dist.bundle>
 			<strip>false</strip>	
 	</properties>        		
        	</dependency>

<!--  xfire - also relies upon httpclient - but this is provided by project-template.xml  -->
	<dependency>
		<groupId>xfire</groupId>
		<artifactId>xfire-core</artifactId>
		<version>1.2.2</version> <!--  todo - upgrade to 1.2.4 -->
		<properties>
			<dist.bundle>true</dist.bundle>
			<strip>true</strip>
		</properties>
	</dependency>
	
	<dependency>
		<groupId>jdom</groupId>
		<artifactId>jdom</artifactId>
		<version>1.0</version>
		<properties>
			<dist.bundle>true</dist.bundle>
			<strip>true</strip>
		</properties>		
	</dependency>
	
	<dependency>
		<groupId>stax</groupId>
		<artifactId>stax-api</artifactId>
		<version>1.0.1</version>
		<properties>
			<dist.bundle>true</dist.bundle>
			<strip>false</strip>
		</properties>		
	</dependency>
	
	<dependency>
		<groupId>woodstox</groupId>
		<artifactId>wstx-asl</artifactId>
		<version>3.0.1</version>
		<properties>
			<dist.bundle>true</dist.bundle>
			<strip>false</strip> 
		</properties>		
	</dependency>
	
	<dependency>
		<groupId>activation</groupId>
		<artifactId>activation</artifactId>
		<version>1.0.2</version>
		<properties>
			<dist.bundle>true</dist.bundle>
			<strip>true</strip> 
		</properties>		
	</dependency>
	
    <!-- table manipulation  -->
  
     
        	<dependency>
        		<groupId>starlink</groupId>
        		<artifactId>stilt_astrogrid_convert</artifactId>
        		<version>1.0</version>
        		<properties>
        			<dist.bundle>true</dist.bundle>
        					    <strip>true</strip>    
        		</properties>
        	</dependency>       
 

  

    </dependencies>
</project>
