<?xml version="1.0" encoding="UTF-8"?>
<project xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" >

    <extend>${basedir}/../../../aggregate/cdk/script/project.xml</extend>
        <artifactId>asr</artifactId>
        <currentVersion>${astrogrid.desktop.version}</currentVersion>
        <name>Astro Runtime (Headless version)</name>
        <description>
	 Astro Runtime - server version
	</description>
        <shortDescription>Astro Runtime - An API for the Virtual Observatory</shortDescription>
 
        <build>
                <sourceDirectory>${basedir}/../src/java</sourceDirectory>
                <!-- modifications to compile the hub portion -->
                <sourceModifications>
                  <sourceModification>
                    <className>${ifBuildingASR}</className>
                    <excludes>
                      <exclude>org/astrogrid/desktop/*.java</exclude>
                      <exclude>org/astrogrid/desktop/modules/ui/**</exclude>
                      <exclude>org/astrogrid/desktop/modules/system/HelpServerImpl.java</exclude>
                      <exclude>org/astrogrid/desktop/modules/system/SwingSetup.java</exclude>
                      <exclude>org/astrogrid/desktop/modules/system/UIImpl.java</exclude>
                      <exclude>org/astrogrid/desktop/modules/system/BrowserLauncherBrowserControl.java</exclude>
                      <exclude>org/astrogrid/desktop/modules/ag/LoginDialogue.java</exclude>
                      <exclude>org/astrogrid/desktop/modules/dialogs/**</exclude>
                      <exclude>org/astrogrid/desktop/modules/adqlEditor/**</exclude>
                      <exclude>org/astrogrid/desktop/modules/workflowBuilder/**</exclude>
                      <!-- keep this out - as unfinished, and drags in all xbean stuff -->
                      <exclude>org/astrogrid/desktop/modules/ivoa/SkyNodeImpl.java</exclude>
                  	</excludes>
                  	
                  </sourceModification>
               	</sourceModifications>
                <resources>
                        <resource>
                                <directory>${basedir}/../src/java</directory>
                                <includes>
                                        <include>**/hivemind/*.xml</include>
                                        <include>astrogrid.properties</include>
                                        <include>default-log4j.properties</include>
                                        <include>org/astrogrid/desktop/modules/system/transformers/*.xsl</include>
                                </includes>
                        </resource>
                        <resource>
                        	<directory>${basedir}/resources</directory>
                        	<includes>
                        		<include>*.properties</include>
                        	</includes>
                        </resource>
                </resources>
        </build>

        <!--  defines reports to place in the distro -->
    <reports>
        <report>maven-javadoc-plugin</report>
        <report>maven-jxr-plugin</report>
        <report>maven-license-plugin</report>
    </reports>

        <dependencies>



<!-- public interfaces of the acr -->
	<dependency>
		<groupId>org.astrogrid</groupId>
		<artifactId>acr-interface</artifactId>
		<version>${astrogrid.desktop.version}</version>
		<properties>
			<dist.bundle>true</dist.bundle>		
			<strip>false</strip>
		</properties>
	</dependency>

  <dependency>
		<groupId>votech-ds6</groupId>
                        <artifactId>plastic</artifactId>
		<version>0.5.1</version>
                        <url>http://plastic.sourceforge.net</url>
		<properties>
			<dist.bundle>true</dist.bundle>
			<strip>true</strip>			
		</properties>						
   </dependency>		
	

        	<dependency>
        		<groupId>org.astrogrid</groupId>
        		<artifactId>astrogrid-security</artifactId>
        		<version>${astrogrid.security.version}</version>
        		<type>jar</type>
	 	<properties>
 			<dist.bundle>true</dist.bundle>
 			<strip>${strip.security}</strip>
 		</properties>        		
        	</dependency>
        		  
  <!-- storage -->
<dependency>
	<artifactId>jdbm</artifactId>
	<groupId>jdbm</groupId>
	<version>1.0</version>
	<properties>		
		<dist.bundle>true</dist.bundle>	
		<strip>true</strip>	
	</properties>
</dependency>

<!--  cache - -->
	<dependency>
		<groupId>ehcache</groupId>
		<artifactId>ehcache</artifactId>
		<version>1.2.3</version>
		<properties>
			<dist.bundle>true</dist.bundle>
					    <strip>true</strip>    
		</properties>
	</dependency>

 <!-- jakarta commons -->

 <dependency>
	 <artifactId>commons-beanutils</artifactId>
	 <groupId>commons-beanutils</groupId>
	 <version>1.6</version>
	 <type>jar</type>
	 <properties>		 
		 <dist.bundle>true</dist.bundle>
		 <strip>true</strip>
	 </properties>		 
 </dependency>
 
 <dependency>
	 <artifactId>commons-lang</artifactId>
	 <groupId>commons-lang</groupId>
	 <version>2.0</version>
	 <type>jar</type>
	 <properties>		 
		 <dist.bundle>true</dist.bundle>
		 <strip>true</strip>
	 </properties>		 
        </dependency>  
        
	  <dependency>
	  	<artifactId>commons-cli</artifactId>
	  	<groupId>commons-cli</groupId>
	  	<version>1.0</version>
	  	<properties>			
		<dist.bundle>true</dist.bundle>			
		<strip>true</strip>
	  	</properties>
	  </dependency>

<!-- container system - hivemind     -->
<!--  don't plan to mess with these - too important.-->
<dependency>
	<groupId>hivemind</groupId>
	<artifactId>hivemind</artifactId>
	<version>1.1.1</version>
	<properties>			
		<dist.bundle>true</dist.bundle>	
				 <strip>false</strip> <!--  too precious, not much to remove -->		
	</properties>
</dependency>
<dependency>
	<groupId>hivemind</groupId>
	<artifactId>hivemind-lib</artifactId>
	<version>1.1.1</version>
	<properties>
		<dist.bundle>true</dist.bundle>
				 <strip>false</strip> <!--  too precious and xml driven -->			
	</properties>	
</dependency>

<dependency>
	<groupId>javassist</groupId>
	<artifactId>javassist</artifactId>
	<version>3.0</version>
	<properties>
				 <strip>false</strip> <!--  not worth stripping. -->	
		<dist.bundle>true</dist.bundle>	
	</properties>
</dependency>
 <dependency>
	 <id>oro</id>
	 <version>2.0.7</version>
	 <properties>
				 <strip>false</strip> <!--  too hard to strip. -->		
		 <dist.bundle>true</dist.bundle>
	 </properties>	 
 </dependency>
 
 <!-- jetty webserver -->
 <dependency> 
	 <groupId>jetty</groupId>
	 <artifactId>org.mortbay.jetty</artifactId>
	 <version>5.1.2</version>
	 <!-- upgrade to 5.1.11 ? -->
	 <type>jar</type>
	 <properties>
		 <dist.bundle>true</dist.bundle>
		 <strip>true</strip>
	 </properties>
 </dependency>
 <dependency>
	 <artifactId>servletapi</artifactId>
	 <groupId>servletapi</groupId>
	 <version>2.3</version>	
	 <properties>
		 <dist.bundle>true</dist.bundle>	
		 <strip>true</strip>
	 </properties>	 
    </dependency>
    
    <dependency>
	    <artifactId>rmi-lite</artifactId>
	    <groupId>rmilite</groupId>
	    <version>1.0</version>
	    <properties>
		    <dist.bundle>true</dist.bundle>	
		    <strip>false</strip><!--small and perfectly formed -->
	    </properties>
</dependency> 
<dependency> 
	<groupId>xmlrpc</groupId>
	<artifactId>xmlrpc</artifactId>
	<version>1.2-b1</version>
	<type>jar</type>
	<properties>
		<dist.bundle>true</dist.bundle>		
		<strip>false</strip><!-- true causes a NPE, and only saves 30K -->
	</properties>
</dependency>
<!-- end of jetty servers -->

    <!-- extra widgets: statusBar and ButtonBar . -->
   <dependency>
        <groupId>l2fprod</groupId>
        <artifactId>l2fprod-common-buttonbar</artifactId>
        <version>6.11</version> 
	<properties>
		<dist.bundle>${ifBuildingASR.getValue() != 'true'}</dist.bundle>
		<uberjar.bundle>${ifBuildingASR.getValue() != 'true'}</uberjar.bundle>
		<strip>true</strip>	
	 </properties>	 	
    </dependency>
    
   <dependency>
        <groupId>l2fprod</groupId>
        <artifactId>l2fprod-common-tasks</artifactId>
        <version>6.11</version> 
	<properties>
		<dist.bundle>${ifBuildingASR.getValue() != 'true'}</dist.bundle>
		<uberjar.bundle>${ifBuildingASR.getValue() != 'true'}</uberjar.bundle>
		<strip>true</strip>	
	 </properties>	 	
    </dependency>   
    
       <dependency>
        <groupId>l2fprod</groupId>
        <artifactId>l2fprod-common-shared</artifactId>
        <version>6.11</version> 
	<properties>
		<dist.bundle>${ifBuildingASR.getValue() != 'true'}</dist.bundle>
		<uberjar.bundle>${ifBuildingASR.getValue() != 'true'}</uberjar.bundle>
		<strip>true</strip>	
	 </properties>	 	
    </dependency>    
      
 <!-- concurrent stuff-->
    <dependency>
	    <artifactId>concurrent</artifactId>
	    <groupId>concurrent</groupId>
	    <version>1.3.4</version>
	    <properties>
	    	<!-- add this aftrer the main javaapp process, as a work-around for package capitalization -->
			<bundle.later>true</bundle.later>
		    <uberjar.bundle>false</uberjar.bundle>		    
		    <dist.bundle>true</dist.bundle>
			<strip>true</strip>    
	 </properties>	 	    
 </dependency>    
<!-- security -->
 <!-- Dependencies introduced by use of MyProxy. -->
 <dependency>
 	<groupId>globus</groupId>
 	<artifactId>cog-jglobus</artifactId>
 	<version>1.2</version>
 	<type>jar</type>
 	<properties>
 		<dist.bundle>true</dist.bundle>
 			<strip>true</strip>
 	</properties>
 </dependency>
 
 <dependency>
 	<groupId>globus</groupId>
 	<artifactId>cog-jgss</artifactId>
 	<version>1.2</version>
 	<type>jar</type>
 	<properties>
 		<dist.bundle>true</dist.bundle>
 			<strip>true</strip>
 	</properties>
 </dependency>

 <dependency>
 	<groupId>globus</groupId>
 	<artifactId>cog-puretls</artifactId>
 	<version>1.2</version>
 	<type>jar</type>
 	<properties>
	    	<!-- add this aftrer the main javaapp process, as a work-around for package capitalization -->
			<bundle.later>true</bundle.later>
		    <uberjar.bundle>false</uberjar.bundle>		  	
 		<dist.bundle>true</dist.bundle>
 			<strip>true</strip>
 	</properties> 	
 </dependency>
<!--  problem here. -->
 <dependency>
   <groupId>globus</groupId>
   <artifactId>cog-cryptix</artifactId>
   <version>1.2</version>
   <type>jar</type>
 	<properties>
 		<dist.bundle>true</dist.bundle>
 			<strip>true</strip>
 	</properties>   
 </dependency>
       
        	<dependency>
        		<groupId>globus</groupId>
        		<artifactId>cog-cryptix32</artifactId>
        		<version>1.2</version>
        		<type>jar</type>
 	<properties>
 		<dist.bundle>true</dist.bundle>
 			<strip>true</strip>
 	</properties>        		
        	</dependency>
        	
        	<dependency>
        		<groupId>globus</groupId>
        		<artifactId>cog-cryptix-asn1</artifactId>
        		<version>1.2</version>
        		<type>jar</type>
 	<properties>
 		<dist.bundle>true</dist.bundle>
 			<strip>true</strip>
 	</properties>        		
        	</dependency>
     	<!-- dependencies for signatures -->
        	<dependency>
        		<groupId>xmlsec</groupId>
        		<artifactId>xmlsec</artifactId>
        		<version>1.3.0</version>
        		<type>jar</type>
 	<properties>
 		<dist.bundle>true</dist.bundle>
 			<strip>true</strip>
 	</properties>        		
        	</dependency>
        	
    <!-- crypto provider that myproxy client requires -->
        	<dependency>
        		<groupId>bouncycastle</groupId>
        		<artifactId>bcprov-jdk14</artifactId>
        		<version>129</version>
        		<type>jar</type>
 	<properties> 	
 		<dist.bundle>true</dist.bundle>
 			<strip>true</strip>	
 	</properties>        		
        	</dependency>


	<dependency>
		<groupId>xfire</groupId>
		<artifactId>xfire-core</artifactId>
		<version>1.2.2</version>
		<properties>
			<dist.bundle>true</dist.bundle>
			<strip>true</strip>
		</properties>
	</dependency>
	
	<dependency>
		<groupId>commons-codec</groupId>
		<artifactId>commons-codec</artifactId>
		<version>1.3</version>
		<properties>
			<dist.bundle>true</dist.bundle>
			<strip>true</strip>
		</properties>		
	</dependency>
	
	<dependency>
		<groupId>commons-httpclient</groupId>
		<artifactId>commons-httpclient</artifactId>
		<version>3.0</version>
		<properties>
			<dist.bundle>true</dist.bundle>
			<strip>true</strip>
		</properties>		
	</dependency>

	<dependency>
		<groupId>jdom</groupId>
		<artifactId>jdom</artifactId>
		<version>1.0</version>
		<properties>
			<dist.bundle>true</dist.bundle>
			<strip>true</strip>
		</properties>		
	</dependency>
	
	<dependency>
		<groupId>stax</groupId>
		<artifactId>stax-api</artifactId>
		<version>1.0.1</version>
		<properties>
			<dist.bundle>true</dist.bundle>
			<strip>true</strip>
		</properties>		
	</dependency>
	
	<dependency>
		<groupId>woodstox</groupId>
		<artifactId>wstx-asl</artifactId>
		<version>3.0.1</version>
		<properties>
			<dist.bundle>true</dist.bundle>
			<strip>false</strip><!--  all spi driven - a nightmare to strip --> 
		</properties>		
	</dependency>
	
	<dependency>
		<groupId>activation</groupId>
		<artifactId>activation</artifactId>
		<version>1.0.2</version>
		<properties>
			<dist.bundle>true</dist.bundle>
			<strip>true</strip> 
		</properties>		
	</dependency>
	
    <!-- table manipulation  -->
  
     
        	<dependency>
        		<groupId>starlink</groupId>
        		<artifactId>stilt_astrogrid_convert</artifactId>
        		<version>1.0</version>
        		<properties>
        			<dist.bundle>true</dist.bundle>
        					    <strip>true</strip>    
        		</properties>
        	</dependency>       
 
  <!-- JDIC components - a bit tricky, because of binary nature.. 
-->
 <dependency>
	 <artifactId>jdic</artifactId>
	 <groupId>jdic</groupId>
	 <version>0.9.1</version>
	 <properties>
		 <dist.bundle>true</dist.bundle>
		 <uberjar.bundle>${isBuildingWorkbench.getValue() == 'true'}</uberjar.bundle>
		 <strip>true</strip>
	 </properties>
 </dependency>
 <!--NB: comment out following two when generating dependencies on macosx -->
 <!--
 <dependency>
	 <artifactId>jdic_stub_${ag.os.name}</artifactId>
	 <groupId>jdic</groupId>
	 <version>0.9.1</version>
	 <properties>
		 <dist.bundle>true</dist.bundle>
		 <uberjar.bundle>${isBuildingWorkbench.getValue() == 'true'}</uberjar.bundle>
	 </properties>	 
 </dependency>
-->  
<!-- NB - this is the jar of native libs, that needs to be locally installed. 
      not a real dependency as such - and not needed for development
      -->
 <!--<dependency>
	 <artifactId>jdic_native_${ag.os.name}_${ag.os.arch}</artifactId>
	 <groupId>jdic</groupId>
	 <version>0.9.1</version>
	 <properties>
		 <dist.bundle>true</dist.bundle>
		 <uberjar.bundle>${isBuildingWorkbench.getValue() == 'true'}</uberjar.bundle>
	 </properties>	 
 </dependency>
--> 
<!-- end of jdic -->
  

<!-- used within development only -->

	<!--  jar shrinking -->
    	    <dependency>
	<groupId>proguard</groupId>
	<artifactId>proguard</artifactId>
	<version>3.6</version>
	<properties>
		<uberjar.bundle>false</uberjar.bundle>
	</properties>
</dependency>	         
<!-- make an OSX app -->
	<dependency>
		<groupId>jarbundler</groupId>
		<artifactId>jarbundler</artifactId>
		<version>1.4</version><!--  more recent versions don't seem to work
		 with the version of ant inside maven - and this does the job  -->
		<properties>
			<uberjar.bundle>false</uberjar.bundle>
		</properties>
		<url>http://informagen.com/JarBundler/</url>
	</dependency>	        	
<!--  make a platform-independent installer -->
	<dependency>
		<groupId>izpack</groupId>
		<artifactId>standalone-compiler</artifactId>
		<version>3.8.2</version>
		<properties>
			<uberjar.bundle>false</uberjar.bundle>
		</properties>
		<url>http://www.izforge.com/izpack/</url>
		</dependency>    	      		        
    	      		   
    </dependencies>
</project>
