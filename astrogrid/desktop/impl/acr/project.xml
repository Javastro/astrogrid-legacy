<?xml version="1.0" encoding="UTF-8"?>
<project xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" >

    <extend>${basedir}/../asr/project.xml</extend>
        <artifactId>acr</artifactId>
        <name>Astro Runtime</name>
        <description>
	 Astro Runtime
	</description>
      <shortDescription>Astro Runtime - An API for the Virtual Observatory</shortDescription>
 
 
        <build>
                <!-- asr - run all tests apart from the ones involving ui -->
             <unitTest>
             	<includes>
             		<include>**/All*IntegrationTests.java</include>
             		<include>**/All*UnitTests.java</include>
             	</includes>
             	<excludes>
             		<exclude>**/ui/**</exclude>
             		<exclude>**/workflowBuilder/**</exclude>
             	</excludes>
					  <resources>
                                <resource>
                                        <directory>${basedir}/../test/java</directory>
                                        <includes>
                                                <include>**/*.properties</include>
                                                <include>**/*.xml</include>
                                                <include>**/*.xsl</include>
                                                <include>**/*.dtd</include>
                                                <include>**/*.xsd</include>
                                                <include>**/*.vot</include>
                                        </includes>
                                </resource>								
                        </resources>	             	
             </unitTest>        
                <!-- modifications to compile the acr portion -->
                <sourceModifications>
                  <sourceModification>
                    <className>${ifBuildingACR}</className>
                    <includes>
                    	<include>org/astrogrid/Astro*.java</include>
                    	<include>org/astrogrid/*UnitTest.java</include>
                    	<include>org/astrogrid/*IntegrationTest.java</include>
                    	
                    	<include>org/astrogrid/acr/AllAcrIntegrationTests.java</include>
                    	<include>org/astrogrid/acr/AllAcrUnitTests.java</include>                    	
                    	<include>org/astrogrid/desktop/BuildInprocess*.java</include>
                    	
                    	<include>**/alternatives/*.java</include>
                    	<include>**/framework/*.java</include>
                    	<include>**/hivemind/**</include>
                    	
                    	<include>**/modules/**</include>
                    	<include>**/protocol/**</include>
                    	
                    	<include>**/All*IntegrationTests.java</include>
                    	<include>**/All*UnitTests.java</include>                    	
                    </includes>
                    <excludes>
                      <exclude>org/astrogrid/desktop/modules/ui/**</exclude>                
                      <exclude>org/astrogrid/desktop/modules/workflowBuilder/**</exclude>
                      <exclude>org/astrogrid/desktop/modules/dialogs/Script*</exclude>
                      <exclude>org/astrogrid/desktop/modules/ivoa/SkyNodeImpl.java</exclude>                     
						<!--  test classes we can't compile or don't want -->
                      <exclude>**/*SystemTest*</exclude>
                      <exclude>**/*TransportTest*</exclude>          
                  	</excludes>
                  </sourceModification>
               	</sourceModifications>
                <resources>
                        <resource>
                                <directory>${basedir}/../src/java</directory>
                                <includes>
                                        <include>**/hivemind/*.xml</include>
                                        <include>**/hivedoc/*.*</include>                                        
                                        <include>astrogrid.properties</include>
                                        <include>default-log4j.properties</include>
                                        <include>org/astrogrid/desktop/modules/system/transformers/*.xsl</include>
                                        <include>org/astrogrid/acr-splash.gif</include>
          								<include>org/astrogrid/desktop/icons/*.gif</include> 
          								<include>org/astrogrid/desktop/icons/*.png</include> 
          								<include>org/astrogrid/desktop/icons/*.jpg</include>
          						</includes>
                        </resource>
                        
                </resources>
        </build>

        <dependencies>
  
 <!-- text editing extension -->
  <dependency>
	 <groupId>jedit</groupId>
	 <artifactId>jedit-syntax</artifactId>
	 <version>1.0</version>
	 <type>jar</type>
	 <properties>	 
		 <dist.bundle>true</dist.bundle>
		 <strip>true</strip>
	 </properties>
	</dependency>
 
 <!-- compiler and xmlbeans for adql -->
  <dependency>
  <!-- This is the Adql/s to Adql/x compiler  -->
	 <artifactId>astrogrid-adqlstox</artifactId>
	 <groupId>org.astrogrid</groupId>
	 <version>${astrogrid.adqlstox.version}</version>
	 <type>jar</type>
     <properties>
		 <dist.bundle>true</dist.bundle>
		 <strip>${strip.xmlbeans}</strip>
	 </properties>			 
  </dependency>
  <dependency>
  <!-- This is the minimum required for xmlbeans.
          If we expand usage (eg: use of xpath) more jars will be required -->
	 <artifactId>xbean</artifactId>
	 <groupId>xmlbeans</groupId>
	 <version>2.0.0</version>
	 <type>jar</type>
     <properties>
		 <dist.bundle>true</dist.bundle>
		 <strip>${strip.xmlbeans}</strip>
	 </properties>			 
  </dependency>
  <dependency>
     <!-- These are the generated beans for adql -->
	 <artifactId>astrogrid-adql_v1_0a1</artifactId>
	 <groupId>org.astrogrid</groupId>
	 <version>${astrogrid.adql_v1_0a1.version}</version>
	 <type>jar</type>
	 <properties>
		 <dist.bundle>true</dist.bundle>
		 <strip>${strip.xmlbeans}</strip>
	 </properties>		 
 </dependency>
 <!-- end compiler and beans for adql -->
   
 
    </dependencies>
</project>
