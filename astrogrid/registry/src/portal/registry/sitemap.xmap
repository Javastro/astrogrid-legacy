<?xml version="1.0"?>

<map:sitemap xmlns:map="http://apache.org/cocoon/sitemap/1.0">

   <map:components>
      <map:generators default="file"/>
      <map:transformers default="xslt"/>
      <map:readers default="resource"/>
      <map:serializers default="html"/>
      <map:selectors default="browser"/>
      <map:matchers default="wildcard"/>
   </map:components>

   <map:pipelines>
      <map:pipeline>
         <map:match pattern="">
            <map:redirect-to uri="../agindex.html"/>
         </map:match>

         <!-- Registry Browser -->
         <map:match pattern="browse">
            <map:generate type="serverpages" src="xsp/browse.xsp"/>
            <map:transform src="../common/xsl/browse.xsl"/> 
            <map:serialize type="html"/>
         </map:match>
         
         <map:match pattern="action">
            <map:generate type="serverpages" src="xsp/action.xsp"/>
            <map:transform src="../common/xsl/action.xsl"/> 
            <map:serialize type="html"/>
         </map:match>

         <!-- Registry Update -->
         <map:match pattern="admin">
            <map:generate type="serverpages" src="xsp/admin.xsp"/>
            <map:transform src="xsl/admin.xsl"/> 
            <map:serialize type="html"/>
         </map:match>
         
         <map:match pattern="adminaction">
            <map:generate type="serverpages" src="xsp/adminaction.xsp"/>
            <map:transform src="xsl/adminaction.xsl"/> 
            <map:serialize type="html"/>
         </map:match>
         
         <map:match pattern="update">
            <map:generate type="serverpages" src="xsp/update.xsp"/>
            <map:transform src="xsl/update.xsl"/> 
            <map:serialize type="html"/>
         </map:match>

         <!-- HTML pages -->
         <map:match pattern="*.html">
            <map:read mime-type="text/html" src="html/{1}.html"/>
         </map:match>

         <map:match pattern="*.xml">
            <map:generate type="file" src="xml/{1}.xml"/>
            <map:transform src="../common/xsl/astrogrid.xsl"/> 
            <map:serialize type="html"/>
         </map:match>

         <!-- Site XSP files -->
         <map:match pattern="*.xsp">
            <map:generate type="serverpages" src="xsp/{1}.xsp"/>
            <map:transform src="xsl/{1}.xsl"/> 
            <map:serialize type="html"/>
         </map:match>

         <!-- Site images -->
         <map:match pattern="*.gif">
            <map:read src="../images/{1}.gif" mime-type="images/gif"/>
         </map:match>
         <map:match pattern="*.png">
            <map:read src="../images/{1}.png" mime-type="images/png"/>
         </map:match>

      </map:pipeline>
   </map:pipelines>
</map:sitemap>
