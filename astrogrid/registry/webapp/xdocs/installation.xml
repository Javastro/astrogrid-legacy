<?xml version="1.0" encoding="ISO-8859-1" ?>
<document>
    <properties>
        <title>AstroGrid registry installation</title>
    </properties>
    <body>
    <section name="Installation">
    <p>
    <i>Definition 'Context Name' - is your webapp name (hence usually the unpacked directory name in the webapps).  This will be used
a lot in various registry documentation usually with curly brackets.</i>
    <br /><i>As Noted now on the main docs page, if you plan on being a Full Registry or Larger Publishing Registry (holding thousands of Resources) or simply want your db on a seperate machine.  Then
      recommend installing the db externally please read <a href="external_eXist.html">Using external eXist</a>.</i><br />
    </p>    
      <p>
         The installations below have mainly been tested on tomcat versions 5.0.19-5.0.28 java1.4, 5.5.17-5.5.19 with java.1.5.  But the "Manual Installation" could be carried out on 
 other servlet/j2ee containers and would welcome success or failure stories relating to other containers.  <br />For the purpose of most instructions here the guide will refer to tomcat.<br />
        <br />
        <i><b>Note:</b>tomcat 5.0 users using java1.5 has been done and requires a system property to be set:<br />
        javax.xml.transform.TransformerFactory=com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl<br />
        </i>
		<strong>Be sure to read the bottom section if you know your deploying this in a servlet container that will "NOT" unpack the war file.</strong><br />
		Unpacking is usually a term of unzipping/extracting the war and is something typical that tomcat does when deploying a war file.
      <br />
      Download Location of war: http://www.astrogrid.org/maven/org.astrogrid/wars/
      <br />See astrogrid-registry-???.war  where ??? is a version number.  Look at dates for latest release.<br />
		Below is just for installation see <a href='configure.html'>configure</a> for how to configure the registry.
      </p>
      <subsection name="Manual installation/Drop-In - Preferred">
      <p>
         Most of the work is in the configure page, for installation. 
         <ul>
            <li>Take the war file and rename it if you do not like the name (be sure to keep the .war ending).  Typical names are "astrogrid-registry.war" or "registry.war"</li>
                <li>Now simply drop it into the webapps directory under where your tomcat is installed.</li>
                <li>Tomcat by default should unpack the war file into a directory in that webapps directory.  Directory Name should be the same as the war file minus the ".war" part.</li>			
                <li><strong>If you see a directory then your done go to Configuration.</strong></li>
                <li>If it does not unpack it then you may have it turned off in your tomcat or your using a different servlet container that does not unpack the war files "see bottom section if you know it does not unpack wars".</li>
				<li>Normally tomcat should unpack it and unzip it in the webapps directory</li>
				<li>If you don't have access to the server to drop in the war file, but have access to tomcat manager then here is another way:</li>
                <li>Go to your tomcat manager and login.  A link is found at the main tomcat page example if tomcat is on the local/same machine with default port set: http://localhost:8080</li>
                <li>If you relize you don't know how to login, then you will need to view a particular file located where you installed tomcat at: {tomcat install}/conf/tomcat-users.xml or ask your admin.</li>
                <li>Unless your admin has setup tomcat to run on ldap or relational db for users; then this file should give you the username, password, and there roles for logging in (you are interested in the users for the ability to access the 'manager' role).</li>
                <li>If this is a brand new tomcat then you will need to make a "manager" role and add it to a user or create a user in this file.  You may need to restart tomcat for changes to take effect.</li>
         </ul>
      </p>
      </subsection>      
	  <subsection name="Handling Packed wars">
		<p>This section is for servlet containers that do not unpack the war file.  Essentially this means you cannot use the
           embedded eXist database in the war app and will require you either to use the database externally which installation
           instructions are given <a href="external_eXist.html">here</a> or
           downloading the eXist component to work in embed mode which have the instructions below:
			<ul>
			  <li>Find the eXist zip file corresponding to this release ex: astrogrid-registry-xmldb_exist-1.2.zip located at: <a href='http://www.astrogrid.org/maven/org.astrogrid/zips'>Zips Directory</a></li>
			  <li>Now unzip it in some directory where you want your database.</li>
			  <li>Now a property must be set "reg.custom.exist.configuration" property and point to this directory plus conf.xml ex: /exist/db/conf.xml.</li>
			  <li>Your Done Go to Configure section.</li>
			</ul>
		</p>
	  </subsection>
    </section>
   </body>
</document>