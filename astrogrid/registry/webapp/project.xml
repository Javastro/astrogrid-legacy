<?xml version="1.0" encoding="UTF-8"?>
<!--+
    | Maven project description for the AstroGrid registry webapp.
    |
    +-->
<project
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:noNamespaceSchemaLocation="maven-project.xsd">

    <!--+
        | Extend the common project descriptor.
        +-->
    <extend>../maven/project.xml</extend>

    <!--+
        | The current version of the Maven project descriptor.
        +-->
    <pomVersion>3</pomVersion>

    <!--+
        | The short name of the project.
        | This is used when naming jars and distribution files.
        +-->
    <id>astrogrid-registry-webapp</id>

    <!--+
        | The full name of the project.
        | This is used when generating JavaDoc titles.
        +-->
    <name>AstroGrid registry webapp</name>

    <!--+
        | A short description of the project.
        | The short description should be limited to a single line.
        +-->
    <shortDescription>
       The Astrogrid Registry server .jar file bundled into a .war with axis
    </shortDescription>

    <!--+
        | A detailed description of the project.
        | This is used to generate the front page of the projects web site. 
        +-->
    <description>
        <![CDATA[
	<p>
		The webapp portion breaks down an axis and registry-server installation war file.  With web services already deployed,
		which can then be grabbed and placed in the web apps for deployment.
	</p>
	<section name="Builds">
		<p>			
			Here are the maven goals for building the registry, it has a one extra goal compared to the other sub-projects.
			<ul>
				<li>clean - cleans out and removes all previous builds.</li>
				<li>install-snapshot - Builds all the necessry jar and war files.</li>
				<li>astrogrid-deploy-snapshot - Builds and deploys the snapshot onto the repository.</li>
				<li>astrogrid-deploy-site - Generates reports and documents to be deployed on the site repository.</li>
			</ul>
		</p>
	</section>
	<section name="Installation">
		<p>			
			After the builds a war file is produced in the "target" area.  This war file can be dropped into the webapps
			portion of your java server (servlet container) such as tomcat.			
			directory. Once installed as a System property or JNDI entry in the web.xml file located in the 
			astrogrid-registry-webapp/WEB-INF/web.xml file there needs to be a "org.astrogrid.config.url" pointing to a config file.  
			An example config file is given in
			cvs under the registry/server/config directory.  
			Currently the config file requires pointing to a xml file which will be your
			registry, this will be factored out as we come online with the eXist XMLDB.  Once the properties are set you
			need to restart the server.
		</p>
	</section>
		]]>        
    </description>

    <!--+
        | Our cvs repository location.
        +-->
    <repository>
        <connection>
            scm:cvs:pserver:anoncvs@cvs.astrogrid.org:/devel:astrogrid/registry/webapp
        </connection>
        <developerConnection>
            scm:cvs:ext:${maven.username}@cvs.astrogrid.org:/devel:astrogrid/registry/webapp
        </developerConnection>
    </repository>

    <!--+
        | The external libraries required to build our component.
        +-->
    <dependencies>
    
        <dependency>
            <groupId>astrogrid-common</groupId>
            <artifactId>astrogrid-common</artifactId>
            <version>SNAPSHOT</version>
            <type>jar</type>
            <properties>
                <war.bundle>true</war.bundle>
            </properties>            
            <url>http://www.astrogrid.org/</url>
        </dependency>
    
        <dependency>
            <groupId>astrogrid-registry</groupId>
            <artifactId>astrogrid-registry-common</artifactId>
            <version>SNAPSHOT</version>
            <type>jar</type>
            <url>http://www.astrogrid.org/</url>
            <properties>
                <war.bundle>true</war.bundle>
            </properties>
        </dependency>
        <!--+
            | The Registry server components.
            +-->
        <dependency>
            <groupId>astrogrid-registry</groupId>
            <artifactId>astrogrid-registry-server</artifactId>
            <version>SNAPSHOT</version>
            <type>jar</type>
            <url>http://www.astrogrid.org/</url>
            <properties>
                <war.bundle>true</war.bundle>
            </properties>
        </dependency>
        
        <dependency>
        	<artifactId>commons-jxpath</artifactId>
            <groupId>commons-jxpath</groupId>
            <version>1.1</version>
            <properties>
            	<war.bundle>true</war.bundle>
            </properties>            
        </dependency>
        
        <dependency>
        	<artifactId>jakarta-regexp</artifactId>
            <groupId>jakarta-regexp</groupId>
            <version>1.3</version>
            <properties>
            	<war.bundle>true</war.bundle>
            </properties>            
        </dependency>
               
        <!-- required by castor -->
        <dependency>
            <artifactId>castor</artifactId>
            <groupId>castor</groupId>
            <version>0.9.5</version>
            <jar>castor-0.9.5-xml.jar</jar>
            <properties>
            	<war.bundle>true</war.bundle>
            </properties>            
        </dependency>
                        
        <dependency>
        	<id>xerces</id>
            <version>2.4.0</version>
            <properties>
            	<war.bundle>true</war.bundle>
            </properties>
        </dependency>
        
        <dependency>
       		<id>xml-apis</id>
          	<version>1.0.b2</version>
          	<properties>
          		<war.bundle>true</war.bundle>
          	</properties>
        </dependency>
        
        <dependency>
            <id>ipsi</id>
            <version>1.0.2</version>
            <url>http://www.astrogrid.org/</url>
          	<properties>
          		<war.bundle>true</war.bundle>
          	</properties>            
        </dependency>

		<!---+
			Commenting this out, because wsdl4j is already going into the lib directory with 
			axis.  Lets leave it here for now just in the odd case they ever take it out of the axis
			deployment then we might know what happens if it breaks.		
        <dependency>
           <id>wsdl4j</id>
           <version>1.4</version>
          	<properties>
          		<war.bundle>true</war.bundle>
          	</properties>           
        </dependency>
        +-->
    </dependencies>

    <!--+
        | The build properties for our project.
        +-->
    <build>
        <!--+
            | The location of our Java source code.
            +-->
        <sourceDirectory>src/java</sourceDirectory>
        <!--+
            | The location of our JUnit source code.
            +-->
        <unitTestSourceDirectory>src/junit</unitTestSourceDirectory>
        <!--+
            | Our JUnit test classes.
            +-->
        <unitTest>
            <!--+
                | Which tests to include.
                +-->
            <includes>
                <include>**/*Test.java</include>
            </includes>
            <!--+
                | Which tests to exclude.
                +-->
            <excludes>
                <exclude>**/*Test.frog</exclude>
            </excludes>
            <!--+
                | The resources for our tests.
            +-->
            <resources>
                <resource>
                </resource>
            </resources>

        </unitTest>
    </build>
    <reports>
        <report><!--few reports for this subproject-->
            maven-changelog-plugin
        </report>
    </reports>    

</project>






