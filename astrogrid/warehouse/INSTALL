This file describes the installation of the front-end web-service for
AstroGrid's Grid Data Warehouse. The service is installed from the file 
warehouse.war, which you should download from AstroGrid, into 
Jakarta-Tomcat. In principle, you can install the service in any J2EE 
web-container, but the detailed instructions below are specific to Tomcat.

The main configuration-file is included in warehouse.war but must be 
extracted and installed separately. The WAR is structurally a jar file, so 
jar tools can be used. On Unix or Linux, use the jar command: 

  jar xf warehouse.war WEB-INF/classes/AstroGridConfig.properties

On Windows, extract AstroGridConfig.properties using WinZip.

Copy AstroGridConfig.properties to $CATALINA_HOME/conf/ where 
$CATALINA_HOME stands for the absolute path to the Tomcat installation.

Load warehouse.war using Tomcat's manager interface (see the Tomcat 
manual). This will create a web-application called warehouse.

Now stop the warehouse web-application, using the manager interface.
This prevents users from running the web-application until you have it 
properly configured.

Open Tomcat's administration interface (see the Tomcat manual). In the
tree display at the left of the screen, open the "Environment Entities"
object in the "Resources" section. From the drop-down menu, labelled
"Available Actions", select "Create New Env Entry". Make an entry as
follows:

   * name  = org.astrogrid.config.url
   * type  = java.lang.String
   * value = $CATALINA_HOME/conf/AstroGridConfig.properties 
   * description = Path to AstroGrid central configuration.

but you must replace $CATALINA_HOME with the full path to the Tomcat 
directory when typing the entry.

Edit the warehouse configuration if needed to suit your site. Q.v. the 
configuration guide (the file CONFIG in the installation kit).  The 
default configuration is correct for operation with the GDW back-end
service on hydra.star.le.ac.uk.

Go back to the manager interface and start the warehouse web-application.
This makes it available to users over the Internet.

Check the installation.

   1 Validate the Axis installation: all the core jars should be
     present, but some optional jars may be missing.

   2 View the list of available services: AxisDataServer should be 
     present.

   3 Submit a test query using the web form; the ADQL linked from 
     the query page is suitable for the GDW database at Leicester.
