<?xml version="1.0" ?>
<project xmlns:j="jelly:core" xmlns:maven="jelly:maven" xmlns:ant="jelly:ant" 
    xmlns:deploy="deploy" xmlns:util="jelly:util" xmlns:doc="doc">
 
 <preGoal name="java:jar-resources">
  	<filter token="VERSION" value="${pom.currentVersion}"/>
    <tstamp>
            <format property="now" pattern="dd/MMM/yyyy HH:mm"/>
    </tstamp>
    <filter token="NOW" value="${now}"/>
 </preGoal>
 

    <!--+
        | Build and install our artifact 
        +-->
    <goal name="astrogrid-install-artifact">
    	<attainGoal name="javaapp:install"/>
    </goal>

    <!--+
        | Build and install our snapshot 
        +-->
    <goal name="astrogrid-install-snapshot">
        	<attainGoal name="javaapp:install-snapshot"/>
    </goal>

    <!--+
        | Build and deploy our artifact 
        +-->
    <goal name="astrogrid-deploy-artifact">
        	<attainGoal name="javaapp:deploy"/>
    </goal>

    <!--+
        | Build and deploy our snapshot 
        +-->
    <goal name="astrogrid-deploy-snapshot">
        	<attainGoal name="javaapp:deploy-snapshot"/>
    </goal>
    
        <!--temp fix to problem that can't download war from behind firewall-->
    <preGoal name="jar:jar">
    	<deploy:copy-deps todir="tmp" />
    	<copy toDir="${maven.build.dest}" file="tmp/astrogrid-filestore-deploy-script-${pom.currentVersion}.jar"/>
    </preGoal>
    <!--temp fix to problem that can't download war from behind firewall-->
    <preGoal name="javaapp:jar">
    	<deploy:copy-deps todir="tmp" />
    	<copy toDir="${maven.javaapp.app.dir}/antscript" file="tmp/astrogrid-filestore-deploy-script-${pom.currentVersion}.jar"/>
    </preGoal>    
 
</project>