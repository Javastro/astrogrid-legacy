<HTML>
<STYLE>
A:link {text-decoration: underline; color: darkmagenta;}
A:visited {text-decoration: underline; color: darkmagenta;}
#f0 { font-family: "Helvetica"; font-size: 10pt;  }
#f1 { font-family: "SansSerif"; font-size: 10pt;  }
#f2 { font-family: "SansSerif"; font-size: 8pt;  }
#f3 { font-family: "SansSerif"; font-size: 14pt; font-style: italic; font-weight: bold; color: #FFFFFF;  }
#f4 { font-family: "SansSerif"; font-size: 12pt; font-weight: bold; color: #FFFFFF;  }
#f5 { font-family: "SansSerif"; font-size: 12pt; font-style: italic;  }
#f6 { font-family: "SansSerif"; font-size: 12pt; font-weight: bold;  }
#f7 { font-family: "SansSerif"; font-size: 8pt; font-weight: bold;  }
#f8 { font-family: "SansSerif"; font-size: 10pt; font-style: italic; font-weight: bold;  }
#f9 { font-family: "SansSerif"; font-size: 11pt; font-style: italic; font-weight: bold;  }
#f10 { font-family: "SansSerif"; font-size: 10pt; font-style: italic;  }
#f11 { font-family: "SansSerif"; font-size: 10pt; font-weight: bold;  }
#f12 { font-family: "SansSerif"; font-size: 9pt; font-style: italic; font-weight: bold;  }
#f13 { font-family: "SansSerif"; font-size: 9pt; font-weight: bold;  }
#f14 { font-family: "SansSerif"; font-size: 9pt;  }
#f15 { font-family: "SansSerif"; font-size: 8pt; font-style: italic;  }
#f16 { font-family: "monospace"; font-size: 9pt;  }
#f17 { font-family: "SansSerif"; font-size: 9pt; font-weight: bold; color: #800080;  }
#f18 { font-family: "SansSerif"; font-size: 8pt; font-style: italic; font-weight: bold;  }
</STYLE>
<BODY BGCOLOR="white">
<BASEFONT ID="f0">
<DIV STYLE="margin-left:2pt;margin-top:5pt;"><IMG SRC="doc-images/ActivityDiagram8.png"> <FONT ID="f6">Activity Diagram</FONT> <FONT ID="f5"><U>select-archive-from-registry</U></FONT></DIV>
<DIV STYLE="margin-left:3pt;margin-top:4pt;"><FONT ID="f2">package:</FONT> <FONT ID="f7"><A HREF="Package.html">use-cases</A></FONT></DIV>
<DIV STYLE="margin-top:16pt;margin-left:2pt;"><IMG SRC="doc-images/select-archive-from-registry_ActivityDiagram.gif" USEMAP="#M1"><MAP NAME="M1"><AREA SHAPE="rect" COORDS="164,391,355,407" HREF="select-archive-from-registry.html#R1"><AREA SHAPE="rect" COORDS="290,230,440,246" HREF="select-archive-from-registry.html#R2"><AREA SHAPE="rect" COORDS="110,310,198,378" HREF="select-archive-from-registry.html#R3"><AREA SHAPE="rect" COORDS="60,50,253,78" HREF="select-archive-from-registry.html#R4"><AREA SHAPE="rect" COORDS="60,420,253,448" HREF="select-archive-from-registry.html#R5"><AREA SHAPE="rect" COORDS="60,250,253,278" HREF="select-archive-from-registry.html#R6"><AREA SHAPE="rect" COORDS="60,190,253,218" HREF="select-archive-from-registry.html#R7"><AREA SHAPE="rect" COORDS="60,120,253,148" HREF="select-archive-from-registry.html#R8"></MAP></DIV>
<DIV STYLE="margin-top:16pt;margin-left:2pt;"><FONT ID="f8" STYLE="background-color:#DCDCDC;">Diagram Contents Summary</FONT></DIV>
<DIV STYLE="margin-left:10pt;margin-top:8pt;"><IMG SRC="doc-images/tv-activity8.png"> <FONT ID="f7">Activity </FONT><FONT ID="f2"><U><A HREF="select-archive-from-registry.html#R6">Display matching archives</A></U></FONT></DIV>
<DIV STYLE="margin-left:10pt;margin-top:2pt;"><IMG SRC="doc-images/tv-activity8.png"> <FONT ID="f7">Activity </FONT><FONT ID="f2"><U><A HREF="select-archive-from-registry.html#R8">Enter selection criteria</A></U></FONT></DIV>
<DIV STYLE="margin-left:10pt;margin-top:2pt;"><IMG SRC="doc-images/tv-activity8.png"> <FONT ID="f7">Activity </FONT><FONT ID="f2"><U><A HREF="select-archive-from-registry.html#R4">Navigate to registry page</A></U></FONT></DIV>
<DIV STYLE="margin-left:10pt;margin-top:2pt;"><IMG SRC="doc-images/tv-activity8.png"> <FONT ID="f7">Activity </FONT><FONT ID="f2"><U><A HREF="select-archive-from-registry.html#R5">Select archive from list</A></U></FONT></DIV>
<DIV STYLE="margin-left:10pt;margin-top:2pt;"><IMG SRC="doc-images/tv-activity8.png"> <FONT ID="f7">Activity </FONT><FONT ID="f2"><U><A HREF="select-archive-from-registry.html#R7">Send query to registry</A></U></FONT></DIV>
<DIV STYLE="margin-left:10pt;margin-top:3pt;"><IMG SRC="doc-images/tv-decision6.png"> <FONT ID="f7">Decision </FONT><FONT ID="f2"><U><A HREF="select-archive-from-registry.html#R3">Decision1</A></U></FONT></DIV>
<DIV STYLE="margin-top:12pt;margin-left:2pt;"><TABLE BORDER="0" CELLSPACING="0" CELLPADDING="2" WIDTH="98%"><TR BGCOLOR="#C0C0C0"><TD><FONT ID="f9">Activity Detail</FONT></TD></TR></TABLE></DIV>
<DIV STYLE="margin-left:2pt;margin-top:11pt;"><IMG SRC="doc-images/Activity8.png"> <FONT ID="f11"><A NAME="R6"></A>Activity </FONT><FONT ID="f10">Display matching archives</FONT></DIV>
<DIV STYLE="margin-top:8pt;margin-left:17pt;"><FONT ID="f2"><p> 
Portal has a reply from the registry web-service listing resources that match a query to the registry. Portal derives from this a web page listings the results. 
</p> 
<p> 
The page includes the controls for setting new query criteria. If User doesn't like the results so far, User may repeat the registry query. 
</p> 
<p> 
The list of results are general resources known to the registry. They are not all archives unless User has cleverly set the criteria to exlude all other kinds of resources. 
</p> 
<p> 
For each resource, the page shows an identifier (actually the resources IVORN in URL form),a title and a one-line description. There are also two buttons, one lablled "update" and one labelled "View full XML". The latter shows the raw XML of the registry entry in the default presentation of User's web-browser. Astonishingly, the update button lets User change the resource's entry in the registry. 
</p></FONT></DIV>
<DIV STYLE="margin-top:13pt;margin-left:17pt;"><FONT ID="f12" STYLE="background-color:#DCDCDC;">Transition links</FONT></DIV>
<DIV STYLE="margin-left:23pt;margin-top:8pt;"><FONT ID="f14"><A NAME="R9"></A>to</FONT><FONT ID="f14"> </FONT><FONT ID="f13">Decision</FONT><FONT ID="f14"> </FONT><FONT ID="f14"><U><A HREF="select-archive-from-registry.html#R3">Decision1</A></U></FONT></DIV>
<DIV STYLE="margin-left:2pt;margin-top:16pt;"><IMG SRC="doc-images/Activity8.png"> <FONT ID="f11"><A NAME="R8"></A>Activity </FONT><FONT ID="f10">Enter selection criteria</FONT></DIV>
<DIV STYLE="margin-top:8pt;margin-left:17pt;"><FONT ID="f2"><p>  
User is viewing the query-registry form. This form has  
three controls arranged to set a single criterion for a search of registry metadata: (operand) (operator) (value), where the first two are menu boxes and the third is a text-entry box. The operator can be one of "contains", "equals", "not equal", "less than", "greater than" or "after (for dates)". The  
operands are items from the schema defined by IVOA for the "resource metadata"; i.e. they refer to and are named for elements of the XML structure contained in the registry: e.g. AuthorityID, Subject, vs:Waveband. There is no explanation of the terms. 
</p> 
<p> 
There ia an "add more criteria" button. If User presses this, Portal alters the form to include an extra set of operand-operator-value controls plus a menu box setting a boolean condition between the two criteria. 
</p> 
<p> 
User fills in one or more criteria and presses the oddly-named "Go query" button. Portal reads the criteria from the form and stores them internally. 
</p></FONT></DIV>
<DIV STYLE="margin-top:13pt;margin-left:17pt;"><FONT ID="f12" STYLE="background-color:#DCDCDC;">Transition links</FONT></DIV>
<DIV STYLE="margin-left:23pt;margin-top:8pt;"><FONT ID="f14"><A NAME="R10"></A>to</FONT><FONT ID="f14"> </FONT><FONT ID="f13">Activity</FONT><FONT ID="f14"> </FONT><FONT ID="f14"><U><A HREF="select-archive-from-registry.html#R7">Send query to registry</A></U></FONT></DIV>
<DIV STYLE="margin-left:2pt;margin-top:16pt;"><IMG SRC="doc-images/Activity8.png"> <FONT ID="f11"><A NAME="R4"></A>Activity </FONT><FONT ID="f10">Navigate to registry page</FONT></DIV>
<DIV STYLE="margin-top:8pt;margin-left:17pt;"><FONT ID="f2"><p>  
User is viewing any page of the portal that shows the main menu bar. User chooses "Query" from the "Registry" menu. System shows a form for querying the registry. 
</p></FONT></DIV>
<DIV STYLE="margin-top:13pt;margin-left:17pt;"><FONT ID="f12" STYLE="background-color:#DCDCDC;">Transition links</FONT></DIV>
<DIV STYLE="margin-left:23pt;margin-top:8pt;"><FONT ID="f14"><A NAME="R11"></A>to</FONT><FONT ID="f14"> </FONT><FONT ID="f13">Activity</FONT><FONT ID="f14"> </FONT><FONT ID="f14"><U><A HREF="select-archive-from-registry.html#R8">Enter selection criteria</A></U></FONT></DIV>
<DIV STYLE="margin-left:2pt;margin-top:16pt;"><IMG SRC="doc-images/Activity8.png"> <FONT ID="f11"><A NAME="R5"></A>Activity </FONT><FONT ID="f10">Select archive from list</FONT></DIV>
<DIV STYLE="margin-top:8pt;margin-left:17pt;"><FONT ID="f2"><p> 
User is viewing the list of resources matching the last registry-query. User identifies one resource that seems worth querying. 
</p> 
<p> 
User must now write down the identifier of the resource. Portal provides no controls for recording this identifier or passing it to other processes such as forming a query to the chosen archive. 
</p> 
<p> 
Since the recording of the query is manual, user is free to select any number of resources, 
</p></FONT></DIV>
<DIV STYLE="margin-left:2pt;margin-top:16pt;"><IMG SRC="doc-images/Activity8.png"> <FONT ID="f11"><A NAME="R7"></A>Activity </FONT><FONT ID="f10">Send query to registry</FONT></DIV>
<DIV STYLE="margin-top:8pt;margin-left:17pt;"><FONT ID="f2"><p> 
Portal converts the selection criteria stored from the previous step into a query request to the registry web-service. Portal sends the request to the registry service and waits for the reply. 
</p> 
<p> 
The reply is XML: a vodescription element. The schema for vodescription is defined by IVOA. 
</p></FONT></DIV>
<DIV STYLE="margin-top:13pt;margin-left:17pt;"><FONT ID="f12" STYLE="background-color:#DCDCDC;">Transition links</FONT></DIV>
<DIV STYLE="margin-left:23pt;margin-top:8pt;"><FONT ID="f14"><A NAME="R12"></A>to</FONT><FONT ID="f14"> </FONT><FONT ID="f13">Activity</FONT><FONT ID="f14"> </FONT><FONT ID="f14"><U><A HREF="select-archive-from-registry.html#R6">Display matching archives</A></U></FONT></DIV>
<DIV STYLE="margin-top:16pt;margin-left:2pt;"><TABLE BORDER="0" CELLSPACING="0" CELLPADDING="2" WIDTH="98%"><TR BGCOLOR="#C0C0C0"><TD><FONT ID="f9">Decision Detail</FONT></TD></TR></TABLE></DIV>
<DIV STYLE="margin-left:2pt;margin-top:11pt;"><IMG SRC="doc-images/Decision6.png"> <FONT ID="f11"><A NAME="R3"></A>Decision </FONT><FONT ID="f10">Decision1</FONT></DIV>
<DIV STYLE="margin-top:11pt;margin-left:17pt;"><FONT ID="f12" STYLE="background-color:#DCDCDC;">Transition links</FONT></DIV>
<DIV STYLE="margin-left:23pt;margin-top:8pt;"><FONT ID="f14"><A NAME="R1"></A>to</FONT><FONT ID="f14"> </FONT><FONT ID="f13">Activity</FONT><FONT ID="f14"> </FONT><FONT ID="f14"><U><A HREF="select-archive-from-registry.html#R5">Select archive from list</A></U></FONT></DIV>
<DIV STYLE="margin-left:36pt;margin-top:6pt;"><FONT ID="f7">Condition</FONT><FONT ID="f7">:</FONT></DIV>
<DIV STYLE="margin-top:2pt;margin-left:45pt;"><FONT ID="f2">At least one useful archive found</FONT></DIV>
<DIV STYLE="margin-left:23pt;margin-top:16pt;"><FONT ID="f14"><A NAME="R2"></A>to</FONT><FONT ID="f14"> </FONT><FONT ID="f13">Activity</FONT><FONT ID="f14"> </FONT><FONT ID="f14"><U><A HREF="select-archive-from-registry.html#R8">Enter selection criteria</A></U></FONT></DIV>
<DIV STYLE="margin-left:36pt;margin-top:6pt;"><FONT ID="f7">Condition</FONT><FONT ID="f7">:</FONT></DIV>
<DIV STYLE="margin-top:2pt;margin-left:45pt;"><FONT ID="f2">No useful archives found</FONT></DIV>
</BODY>
</HTML>
