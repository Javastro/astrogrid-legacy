<HTML>
<STYLE>
A:link {text-decoration: underline; color: darkmagenta;}
A:visited {text-decoration: underline; color: darkmagenta;}
#f0 { font-family: "Helvetica"; font-size: 10pt;  }
#f1 { font-family: "SansSerif"; font-size: 10pt;  }
#f2 { font-family: "SansSerif"; font-size: 8pt;  }
#f3 { font-family: "SansSerif"; font-size: 14pt; font-style: italic; font-weight: bold; color: #FFFFFF;  }
#f4 { font-family: "SansSerif"; font-size: 12pt; font-weight: bold; color: #FFFFFF;  }
#f5 { font-family: "SansSerif"; font-size: 12pt; font-style: italic;  }
#f6 { font-family: "SansSerif"; font-size: 12pt; font-weight: bold;  }
#f7 { font-family: "SansSerif"; font-size: 8pt; font-weight: bold;  }
#f8 { font-family: "SansSerif"; font-size: 10pt; font-style: italic; font-weight: bold;  }
#f9 { font-family: "SansSerif"; font-size: 11pt; font-style: italic; font-weight: bold;  }
#f10 { font-family: "SansSerif"; font-size: 9pt; font-style: italic; font-weight: bold;  }
#f11 { font-family: "SansSerif"; font-size: 10pt; font-style: italic;  }
#f12 { font-family: "SansSerif"; font-size: 10pt; font-weight: bold;  }
#f13 { font-family: "SansSerif"; font-size: 8pt; font-style: italic;  }
#f14 { font-family: "SansSerif"; font-size: 9pt;  }
#f15 { font-family: "SansSerif"; font-size: 9pt; font-weight: bold;  }
#f16 { font-family: "monospace"; font-size: 9pt;  }
#f17 { font-family: "SansSerif"; font-size: 9pt; font-weight: bold; color: #800080;  }
#f18 { font-family: "SansSerif"; font-size: 8pt; font-style: italic; font-weight: bold;  }
</STYLE>
<BODY BGCOLOR="white">
<BASEFONT ID="f0">
<DIV STYLE="margin-left:2pt;margin-top:5pt;"><IMG SRC="doc-images/UseCaseDiagram4.png"> <FONT ID="f6">UseCase Diagram</FONT> <FONT ID="f5"><U>archive-search-use-cases</U></FONT></DIV>
<DIV STYLE="margin-left:3pt;margin-top:4pt;"><FONT ID="f2">package:</FONT> <FONT ID="f7"><A HREF="Package.html">use-cases</A></FONT></DIV>
<DIV STYLE="margin-top:16pt;margin-left:2pt;"><IMG SRC="doc-images/archive-search-use-cases_UseCaseDiagram.gif" USEMAP="#M1"><MAP NAME="M1"><AREA SHAPE="rect" COORDS="197,263,269,279" HREF="archive-search-use-cases.html#R1"><AREA SHAPE="rect" COORDS="327,263,399,279" HREF="archive-search-use-cases.html#R2"><AREA SHAPE="rect" COORDS="192,119,264,135" HREF="archive-search-use-cases.html#R3"><AREA SHAPE="rect" COORDS="10,240,110,330" HREF="archive-search-use-cases.html#R4"><AREA SHAPE="rect" COORDS="527,260,717,310" HREF="archive-search-use-cases.html#R5"><AREA SHAPE="rect" COORDS="520,190,712,247" HREF="archive-search-use-cases.html#R6"><AREA SHAPE="rect" COORDS="520,110,709,167" HREF="archive-search-use-cases.html#R7"><AREA SHAPE="rect" COORDS="520,50,716,103" HREF="archive-search-use-cases.html#R8"><AREA SHAPE="rect" COORDS="120,50,326,98" HREF="archive-search-use-cases.html#R9"><AREA SHAPE="rect" COORDS="240,160,450,226" HREF="archive-search-use-cases.html#R10"><AREA SHAPE="rect" COORDS="380,320,589,386" HREF="archive-search-use-cases.html#R11"><AREA SHAPE="rect" COORDS="160,320,372,386" HREF="archive-search-use-cases.html#R12"><AREA SHAPE="rect" COORDS="20,140,98,231" HREF="archive-search-use-cases.html#R13"><AREA SHAPE="rect" COORDS="107,30,760,410" HREF="archive-search-use-cases.html#R14"></MAP></DIV>
<DIV STYLE="margin-top:11pt;margin-left:2pt;"><FONT ID="f2">Define a job that the system can execute. 

Researcher defines a workflow to run the archive query. Queries can only be run inside workflows; there is no simpler interface.  

The query has one job-step whose action is the query and the results. The parameters of the job step include the name (IVORN) of the target archive, the data-selection constraints and the location in MySpace for the results. Researcher saves the workflow into MySpace.</FONT></DIV>
<DIV STYLE="margin-top:13pt;margin-left:2pt;"><FONT ID="f8" STYLE="background-color:#DCDCDC;">Diagram Contents Summary</FONT></DIV>
<DIV STYLE="margin-left:11pt;margin-top:6pt;"><IMG SRC="doc-images/tv-actor4.png"> <FONT ID="f7">Actor </FONT><FONT ID="f2"><U><A HREF="archive-search-use-cases.html#R4">External archive</A></U></FONT></DIV>
<DIV STYLE="margin-left:11pt;margin-top:2pt;"><IMG SRC="doc-images/tv-actor4.png"> <FONT ID="f7">Actor </FONT><FONT ID="f2"><U><A HREF="archive-search-use-cases.html#R13">Researcher</A></U></FONT></DIV>
<DIV STYLE="margin-left:11pt;margin-top:2pt;"><IMG SRC="doc-images/tv-system-boundary4.png"> <FONT ID="f7">System Boundary </FONT><FONT ID="f2"><U><A HREF="archive-search-use-cases.html#R14">AstroGrid</A></U></FONT></DIV>
<DIV STYLE="margin-left:31pt;margin-top:2pt;"><IMG SRC="doc-images/UseCase4.png"> <FONT ID="f7">UseCase </FONT><FONT ID="f2"><U><A HREF="archive-search-use-cases.html#R7">Define archive query</A></U></FONT></DIV>
<DIV STYLE="margin-left:31pt;margin-top:2pt;"><IMG SRC="doc-images/UseCase4.png"> <FONT ID="f7">UseCase </FONT><FONT ID="f2"><U><A HREF="archive-search-use-cases.html#R6">Define workflow for query</A></U></FONT></DIV>
<DIV STYLE="margin-left:31pt;margin-top:2pt;"><IMG SRC="doc-images/UseCase4.png"> <FONT ID="f7">UseCase </FONT><FONT ID="f2"><U><A HREF="archive-search-use-cases.html#R5">Execute workflow</A></U></FONT></DIV>
<DIV STYLE="margin-left:31pt;margin-top:2pt;"><IMG SRC="doc-images/UseCase4.png"> <FONT ID="f7">UseCase </FONT><FONT ID="f2"><U><A HREF="archive-search-use-cases.html#R10">Search archive</A></U></FONT></DIV>
<DIV STYLE="margin-left:31pt;margin-top:2pt;"><IMG SRC="doc-images/UseCase4.png"> <FONT ID="f7">UseCase </FONT><FONT ID="f2"><U><A HREF="archive-search-use-cases.html#R11">Search image archive</A></U></FONT></DIV>
<DIV STYLE="margin-left:31pt;margin-top:2pt;"><IMG SRC="doc-images/UseCase4.png"> <FONT ID="f7">UseCase </FONT><FONT ID="f2"><U><A HREF="archive-search-use-cases.html#R12">Search tabular archive</A></U></FONT></DIV>
<DIV STYLE="margin-left:31pt;margin-top:2pt;"><IMG SRC="doc-images/UseCase4.png"> <FONT ID="f7">UseCase </FONT><FONT ID="f2"><U><A HREF="archive-search-use-cases.html#R8">Select archive from registry</A></U></FONT></DIV>
<DIV STYLE="margin-left:31pt;margin-top:2pt;"><IMG SRC="doc-images/UseCase4.png"> <FONT ID="f7">UseCase </FONT><FONT ID="f2"><U><A HREF="archive-search-use-cases.html#R9">Use web portal</A></U></FONT></DIV>
<DIV STYLE="margin-top:13pt;margin-left:2pt;"><TABLE BORDER="0" CELLSPACING="0" CELLPADDING="2" WIDTH="98%"><TR BGCOLOR="#C0C0C0"><TD><FONT ID="f9">Actor Detail</FONT></TD></TR></TABLE></DIV>
<DIV STYLE="margin-left:2pt;margin-top:11pt;"><IMG SRC="doc-images/Actor4.png"> <FONT ID="f12"><A NAME="R4"></A>Actor </FONT><FONT ID="f11">External archive</FONT></DIV>
<DIV STYLE="margin-top:8pt;margin-left:17pt;"><FONT ID="f2">An on-line archive service other than those made with AstroGrid components. The AstroGrid software can drive some external archives that are built according to IVOA standards, e.g. SIAP services.</FONT></DIV>
<DIV STYLE="margin-top:10pt;margin-left:17pt;"><FONT ID="f10" STYLE="background-color:#DCDCDC;">&quot;Communicates&quot; links</FONT></DIV>
<DIV STYLE="margin-left:23pt;margin-top:8pt;"><FONT ID="f14"><A NAME="R15"></A>to</FONT><FONT ID="f14"> </FONT><FONT ID="f15">UseCase</FONT><FONT ID="f14"> </FONT><FONT ID="f14"><U><A HREF="archive-search-use-cases.html#R10">Search archive</A></U></FONT></DIV>
<DIV STYLE="margin-left:2pt;margin-top:16pt;"><IMG SRC="doc-images/Actor4.png"> <FONT ID="f12"><A NAME="R13"></A>Actor </FONT><FONT ID="f11">Researcher</FONT></DIV>
<DIV STYLE="margin-top:8pt;margin-left:17pt;"><FONT ID="f2">An astronomer or solar physicist engaged in scientific research.</FONT></DIV>
<DIV STYLE="margin-top:10pt;margin-left:17pt;"><FONT ID="f10" STYLE="background-color:#DCDCDC;">&quot;Communicates&quot; links</FONT></DIV>
<DIV STYLE="margin-left:23pt;margin-top:8pt;"><FONT ID="f14"><A NAME="R16"></A>to</FONT><FONT ID="f14"> </FONT><FONT ID="f15">UseCase</FONT><FONT ID="f14"> </FONT><FONT ID="f14"><U><A HREF="archive-search-use-cases.html#R10">Search archive</A></U></FONT></DIV>
<DIV STYLE="margin-top:16pt;margin-left:2pt;"><TABLE BORDER="0" CELLSPACING="0" CELLPADDING="2" WIDTH="98%"><TR BGCOLOR="#C0C0C0"><TD><FONT ID="f9">System Boundary Detail</FONT></TD></TR></TABLE></DIV>
<DIV STYLE="margin-left:2pt;margin-top:11pt;"><IMG SRC="doc-images/SystemBoundary4.png"> <FONT ID="f12"><A NAME="R14"></A>System Boundary </FONT><FONT ID="f11">AstroGrid</FONT></DIV>
<DIV STYLE="margin-top:8pt;margin-left:17pt;"><FONT ID="f2">On-line services built out of AstroGrid components. The system is all services that can be reached from an AstroGrid portal. These services  are not necessarily services operated by AstroGrid staff.</FONT></DIV>
<DIV STYLE="margin-left:16pt;margin-top:8pt;"><FONT ID="f7">backgroundColor</FONT><FONT ID="f7">:</FONT></DIV>
<DIV STYLE="margin-top:2pt;margin-left:25pt;"><FONT ID="f2">200,200,200</FONT></DIV>
<DIV STYLE="margin-top:16pt;margin-left:17pt;"><FONT ID="f8" STYLE="background-color:#C0C0C0;">UseCases</FONT></DIV>
<DIV STYLE="margin-left:17pt;margin-top:11pt;"><IMG SRC="doc-images/UseCase4.png"> <FONT ID="f12"><A NAME="R7"></A>UseCase </FONT><FONT ID="f11">Define archive query</FONT></DIV>
<DIV STYLE="margin-top:8pt;margin-left:31pt;"><FONT ID="f2">Record the data-selection parameters for an archive query. 

Queries on tabular archives are defined by writing sADQL. Queries on image archives are defined by choosing search boxes on the sky. 

For the tabular archive, researcher enters sADQL into a web form. (ADQL has a string form, which looks like SQL, and an XML form; sADQL is the string form and is used in the UI.) The ADQL can be typed in, or Researcher can build up the query from a menu of ADQL fragments. 

For the image archive, Researcher specifies, in a web form, the search centre (in J2000 coordinates) and the extent of the search box parallel to the RA and dec axes. 

It is very unclear how the query is associated with a resource chosen from a registry query. 

Researcher saves the query to a file in MySpace. There is no provision for executing the query directly without saving it.</FONT></DIV>
<DIV STYLE="margin-top:7pt;margin-left:30pt;"><FONT ID="f10" STYLE="background-color:#DCDCDC;">Hyperlinks to elements:</FONT></DIV>
<DIV STYLE="margin-left:36pt;margin-top:6pt;"><FONT ID="f2">to </FONT><FONT ID="f7">ActivityDiagram</FONT> <FONT ID="f13"><U><A HREF="define-archive-query.html">define-archive-query</A></U></FONT></DIV>
<DIV STYLE="margin-left:17pt;margin-top:17pt;"><IMG SRC="doc-images/UseCase4.png"> <FONT ID="f12"><A NAME="R6"></A>UseCase </FONT><FONT ID="f11">Define workflow for query</FONT></DIV>
<DIV STYLE="margin-top:8pt;margin-left:31pt;"><FONT ID="f2">Record a workflow to execute an archive query. 

All queries are executed as workflows. An AstroGrid workflow is a form of script which is executed as a batch job. The job contains jo- steps and the query is one such step. Therefore, to run the query, Researcher creates a workflow with just one job-step. 

Researcher uses the portal to create a new workflow and a step within that workflow. These are displayed graphically. Researcher chooses a 'tool' (i.e. type of service from a drop down menu; in this case, Researcher chooses 'sec_dsa' which is the archive query. System then displays a form for setting up the query. 

NB: at the time of writing, 2004-08-23, this does not work in I6! 

Researcher sets the name of an existing query, in MySpace, as the query to be made. Researcher sets the location in MySpace where the results will be written.</FONT></DIV>
<DIV STYLE="margin-top:7pt;margin-left:30pt;"><FONT ID="f10" STYLE="background-color:#DCDCDC;">Hyperlinks to elements:</FONT></DIV>
<DIV STYLE="margin-left:36pt;margin-top:6pt;"><FONT ID="f2">to </FONT><FONT ID="f7">ActivityDiagram</FONT> <FONT ID="f13"><U><A HREF="define-query-workflow.html">define-query-workflow</A></U></FONT></DIV>
<DIV STYLE="margin-left:17pt;margin-top:17pt;"><IMG SRC="doc-images/UseCase4.png"> <FONT ID="f12"><A NAME="R5"></A>UseCase </FONT><FONT ID="f11">Execute workflow</FONT></DIV>
<DIV STYLE="margin-top:8pt;margin-left:31pt;"><FONT ID="f2">Execute a previously-defined workflow. 

Researcher invokes a workflow previously defined andstored in MySpace. System starts execution of the workflow asynchronously, as a batch job. Researcher is now free to disconnect from the system while the workflow is executed. 

System writes the results of the workflow into MySpace as it goes along. The results consist in the data outputs and in the log of what was done in the workflow. 

Researcher can poll the log of the job to find out when the workflow is finished. There is no other way to find out when a job has completed; no asynchronous notifications are sent.</FONT></DIV>
<DIV STYLE="margin-top:7pt;margin-left:30pt;"><FONT ID="f10" STYLE="background-color:#DCDCDC;">Hyperlinks to elements:</FONT></DIV>
<DIV STYLE="margin-left:36pt;margin-top:6pt;"><FONT ID="f2">to </FONT><FONT ID="f7">ActivityDiagram</FONT> <FONT ID="f13"><U><A HREF="execute-query-workflow.html">execute-query-workflow</A></U></FONT></DIV>
<DIV STYLE="margin-left:17pt;margin-top:17pt;"><IMG SRC="doc-images/UseCase4.png"> <FONT ID="f12"><A NAME="R10"></A>UseCase </FONT><FONT ID="f11">Search archive</FONT></DIV>
<DIV STYLE="margin-top:8pt;margin-left:31pt;"><FONT ID="f2">Query an archive and store the query results in MySpace.  

Researcher performs, in order, the use cases, Query registry, Define archive-query, Define workflow and Execute workflow. See those cases for details.  

If all goes well, the case ends with the archive query, the workflow for the query and the results all stored in MySpace. Researcher may re-run the search using the stored query and workflow if required.</FONT></DIV>
<DIV STYLE="margin-top:10pt;margin-left:31pt;"><FONT ID="f10" STYLE="background-color:#DCDCDC;">&quot;Extends&quot; links</FONT></DIV>
<DIV STYLE="margin-left:37pt;margin-top:8pt;"><FONT ID="f14"><A NAME="R3"></A>to</FONT><FONT ID="f14"> </FONT><FONT ID="f15">UseCase</FONT><FONT ID="f14"> </FONT><FONT ID="f14"><U><A HREF="archive-search-use-cases.html#R9">Use web portal</A></U></FONT></DIV>
<DIV STYLE="margin-top:13pt;margin-left:31pt;"><FONT ID="f10" STYLE="background-color:#DCDCDC;">&quot;Includes&quot; links</FONT></DIV>
<DIV STYLE="margin-left:37pt;margin-top:8pt;"><FONT ID="f14"><A NAME="R17"></A>to</FONT><FONT ID="f14"> </FONT><FONT ID="f15">UseCase</FONT><FONT ID="f14"> </FONT><FONT ID="f14"><U><A HREF="archive-search-use-cases.html#R8">Select archive from registry</A></U></FONT></DIV>
<DIV STYLE="margin-left:37pt;margin-top:13pt;"><FONT ID="f14"><A NAME="R18"></A>to</FONT><FONT ID="f14"> </FONT><FONT ID="f15">UseCase</FONT><FONT ID="f14"> </FONT><FONT ID="f14"><U><A HREF="archive-search-use-cases.html#R7">Define archive query</A></U></FONT></DIV>
<DIV STYLE="margin-left:37pt;margin-top:13pt;"><FONT ID="f14"><A NAME="R19"></A>to</FONT><FONT ID="f14"> </FONT><FONT ID="f15">UseCase</FONT><FONT ID="f14"> </FONT><FONT ID="f14"><U><A HREF="archive-search-use-cases.html#R6">Define workflow for query</A></U></FONT></DIV>
<DIV STYLE="margin-left:37pt;margin-top:13pt;"><FONT ID="f14"><A NAME="R20"></A>to</FONT><FONT ID="f14"> </FONT><FONT ID="f15">UseCase</FONT><FONT ID="f14"> </FONT><FONT ID="f14"><U><A HREF="archive-search-use-cases.html#R5">Execute workflow</A></U></FONT></DIV>
<DIV STYLE="margin-left:17pt;margin-top:16pt;"><IMG SRC="doc-images/UseCase4.png"> <FONT ID="f12"><A NAME="R11"></A>UseCase </FONT><FONT ID="f11">Search image archive</FONT></DIV>
<DIV STYLE="margin-top:8pt;margin-left:31pt;"><FONT ID="f2">Aspecialization of 'search archive and store results in MySpace' for the IVOA SIAP protocol.  

The archive contains image data. The query results are images, typically dispatched to MySpace as FITS files. The data-selection is a box on the sky, as defined by IVOA's Simple Image Access (SIAP) protocol. 

At the time of writing (2004-08-23), AstroGrid does not support this use case.</FONT></DIV>
<DIV STYLE="margin-top:10pt;margin-left:31pt;"><FONT ID="f10" STYLE="background-color:#DCDCDC;">&quot;Extends&quot; links</FONT></DIV>
<DIV STYLE="margin-left:37pt;margin-top:8pt;"><FONT ID="f14"><A NAME="R2"></A>to</FONT><FONT ID="f14"> </FONT><FONT ID="f15">UseCase</FONT><FONT ID="f14"> </FONT><FONT ID="f14"><U><A HREF="archive-search-use-cases.html#R10">Search archive</A></U></FONT></DIV>
<DIV STYLE="margin-left:17pt;margin-top:16pt;"><IMG SRC="doc-images/UseCase4.png"> <FONT ID="f12"><A NAME="R12"></A>UseCase </FONT><FONT ID="f11">Search tabular archive</FONT></DIV>
<DIV STYLE="margin-top:8pt;margin-left:31pt;"><FONT ID="f2">Search a catalogue table.  

'A catalogue' in this context appears to Researcher as a single table of data with named columns. The actual storage in the archive need not have the same schema as this vitual table. 
The catalogue typically describes one celestial object per row (an 'object catalogue') but other catalogues are possible: e.g. a catalogue of observations. Catalogues may, but need not, contain columns stating a position on the sky (or on the solar disc, or otherwise).  

The query selects rows by setting contraints on values of the columns of the table. The query is expressed in Astronomical Data Query Language (ADQL) which is similar in form to Structured Query language (SQL). ADQL extends SQL with special support for astronomical constraints such as great-circle angular-distance from a point on the sky. 

The results are written to MySpace as a single table in VOTable format.</FONT></DIV>
<DIV STYLE="margin-top:10pt;margin-left:31pt;"><FONT ID="f10" STYLE="background-color:#DCDCDC;">&quot;Extends&quot; links</FONT></DIV>
<DIV STYLE="margin-left:37pt;margin-top:8pt;"><FONT ID="f14"><A NAME="R1"></A>to</FONT><FONT ID="f14"> </FONT><FONT ID="f15">UseCase</FONT><FONT ID="f14"> </FONT><FONT ID="f14"><U><A HREF="archive-search-use-cases.html#R10">Search archive</A></U></FONT></DIV>
<DIV STYLE="margin-left:17pt;margin-top:16pt;"><IMG SRC="doc-images/UseCase4.png"> <FONT ID="f12"><A NAME="R8"></A>UseCase </FONT><FONT ID="f11">Select archive from registry</FONT></DIV>
<DIV STYLE="margin-top:8pt;margin-left:31pt;"><FONT ID="f2">Select archives using the resource-registry service.  

The resource registry holds metadata for all archives available to AstroGrid. From these, research must select one suitable archive. Suitable means (a) that the data are scientifically fits for the task in hand and (b) that the archive has a service interface that the Astrogrid software can drive. 

Researcher sets constraints on some of these metadata; the constraints are combined using Boolean 'and'. To do this, researcher has to know what the metadata mean, which implies reference to the IVOA standard for resource metadata.  

Researcher submits the registry query. System replies with a list of matching resources, most of which are on-line archive services; the list is displayed in a web page. Each resource is identified by its International Virtual Observatory Resource Name (IVORN).  

Researcher selects an archive from the registry results and records its IVORN (mentally, in a log book, or by copying it to the operating-system clipboard).</FONT></DIV>
<DIV STYLE="margin-top:7pt;margin-left:30pt;"><FONT ID="f10" STYLE="background-color:#DCDCDC;">Hyperlinks to elements:</FONT></DIV>
<DIV STYLE="margin-left:36pt;margin-top:6pt;"><FONT ID="f2">to </FONT><FONT ID="f7">ActivityDiagram</FONT> <FONT ID="f13"><U><A HREF="select-archive-from-registry.html">select-archive-from-registry</A></U></FONT></DIV>
<DIV STYLE="margin-left:17pt;margin-top:17pt;"><IMG SRC="doc-images/UseCase4.png"> <FONT ID="f12"><A NAME="R9"></A>UseCase </FONT><FONT ID="f11">Use web portal</FONT></DIV>
<DIV STYLE="margin-top:8pt;margin-left:31pt;"><FONT ID="f2">Use AstroGrid facilities via a web portal within the AstroGrid system. 

User enages with System via a web browser sent to the front page of the portal. System displays a log-in page with option to register as a new user. 

If User is not registered, User chooses 'register' and gives email address and user-name. The registration is implicitly with a user community, but the controls do not show which community is being addressed; presumably, the community operator explains this by email. This registration is processed asynchronously, so the use case ends here. 

If User is registered, User chooses 'log on' and gives user-name, community name and password. System checks the user-name and password in the named community. If they are recognized, User is now logged in to the entire AstroGrid system. By logging in to AstroGrid, User also has access to certain external services known to the AstroGrid portal (mainly data archives). 

User navigates the portal as a web site. The primary navigation is a row of menu buttons along the top of the page; each button leads to pages for the high-level functions of some part of the system, split up into menus according to the developers' view. 

Eventually, User closes the web browser. This ends the session with the portal. User will have to log in again when next visiting the portal.</FONT></DIV>
</BODY>
</HTML>
