<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
  
  
  
  
  
  
  
  
  <meta content="text/html; charset=ISO-8859-1" http-equiv="content-type">
  <title>Common Execution Architecture</title>

  

  

  

  
  
  
  <link rel="stylesheet" type="text/css" href="styles/main.css">

</head>
<body style="direction: ltr;">
<h1>Common Execution Architecture (CEA)</h1>









<h2>CEA philosophy</h2>










<p>The CEA grew out of a need to wrap command-line applications as web
services. It has evolved to become the main part of&nbsp; AstroGrid's
service architecture. Currently, the CEA affects the data-selection
services; the data-transformation services; the workflow system; the
portal; but not the MySpace, Filestore or Registry sub-systems.</p>









CEA allows the Workflow system in AstroGrid, consisting in the
workflow-preparation tools in the portal and the workflow executor in
the JES sub-system, to drive all data-selection and data-transformation
services without needing special code for each kind of service. It
achieves this by factoring the special features of each service in a
description system and leaving a common part that is uniform across all
services.<br>









<p>CEA treats all "business logic" in AstroGrid as something to be
executed in a job-step within a workflow. A job-step has
</p>









<ul>









  <li>a well-defined application;</li>
  <li>an operation on the application that will run to completion without intervention by the client;
  </li>
  <li>well-defined formal parameters that can be set from actual arguments at the start of the step;</li>
  <li>asychronous behaviour: invoking a job-step does not block the client;</li>
  <li>no UI.</li>
</ul>









<p>The application can be a set of Java classes, an executable file or
an on-line service. In each case, the application is wrapped in a
CEA-compliant service.
</p>









<p>In short, a job-step is like a minature batch-job, and all
CEA-compliant services are batch processors. Under this scheme, all CEA
services have the same interface and are easy to call from JES. The
details of the operations to be performed in the application are sent
by JES as parameters of calls to the services.</p>









<h2>Service interfaces and service invocation
</h2>









<p>CEA-compliant services have<span style="text-decoration: underline;"></span>
a standard interface,defined in both Java and in a matching
WSDL-contract. The operations in the interface are to do with job-steps.</p>









<p><img style="width: 813px; height: 681px;" alt="Class diagram for CEA service interfaces" src="generated/patterns.cea/doc-images/service-interfaces_ClassDiagram.gif"></p>








<p class="caption">Service-definition interfaces for a CEA service (q.v. <a href="generated/patterns.cea/service-interfaces.html">detailed description</a>)</p>









<p>The service-definition interface is realized in a set of classes
generated by Axis tooling. These follow the normal Axis patterns. The
ExecutionController interface is not generated by Axis but must be
provided as hand-coded Java. This interface is a potential viariation
point for service implementors but, in practice, a single, simple
implementation works for all services. <br>
</p>

<br>

<p><img style="width: 841px; height: 694px;" alt="Class diagram for classes generated by Axis from CEA interfaces" src="generated/patterns.cea/doc-images/standard-generated-classes_ClassDiagram.gif"></p>

<p class="caption">Classes generated by Axis from CEA interfaces (q.v. <a href="generated/patterns.cea/standard-generated-classes.html">detailed description</a>).
</p>

<p>Inside the service, another set of&nbsp; interfaces are used to set up the business logic for the job-step.</p>








<p><img style="width: 811px; height: 900px;" alt="Class diagram showing application-description interfaces for a CEA service" src="generated/patterns.cea/doc-images/tool-description_ClassDiagram.gif"></p>








<p class="caption">Application-description interfaces inside a CEA service (q.v. <a href="generated/patterns.cea/tool-description.html">detailed description</a>)</p>









<p>These application-description interfaces are used to generate an
Application object that represents the job-step from a library
describing the formal parameters of an application.</p>






<p>The invocation of the job-step is split between two web-service
operations. The init operation sets up the job-step by creating the
Application object within the service. The execute operation sets the
Application running and returns immediately.</p>






<br>






<p><img style="width: 909px; height: 821px;" alt="Sequence diagram for invocation of init operation." src="generated/patterns.cea/doc-images/invoke-init_SequenceDiagram.gif"></p>






<p class="caption">Invocation of the init operation (q.v. <a href="generated/patterns.cea/invoke-init.html">detailed description</a>).</p>





<br>





<p><img style="width: 522px; height: 701px;" alt="Interaction diagram for invoking the execute operation" src="generated/patterns.cea/doc-images/invoke-execute_SequenceDiagram.gif"></p>





<p class="caption">Invocation of execute (q.v. <a href="generated/patterns.cea/invoke-execute.html">detailed description</a>).</p>



<p>Note that the calls to the Application are
synchronous, but the execution of the job-step is asynchronous. The
Application, therefore, must handle the threading and state-holding
aspects of the job-step. 
</p>



<p>Application is an interface to be implemented in
CEA-compliant services. It is the primary variation-point for authors
of services. The Application implementations deployed to date cover
execution of the application in a sub-process and execution of Java
calss in a thread within the service's JVM.
</p>











</body></html>