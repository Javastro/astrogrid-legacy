<?xml version="1.0"?>
<!--+
    | <cvs:source>$Source: /Users/pharriso/Work/ag/repo/git/astrogrid-mirror/astrogrid/registryB/src/xml/ant/Attic/jaf.xml,v $</cvs:source>
    | <cvs:author>$Author: KevinBenson $</cvs:author>
    | <cvs:date>$Date: 2003/10/28 10:23:58 $</cvs:date>
    | <cvs:version>$Revision: 1.1 $</cvs:version>
    | <cvs:log>
    |   $Log: jaf.xml,v $
    |   Revision 1.1  2003/10/28 10:23:58  KevinBenson
    |   *** empty log message ***
    |
    | </cvs:log>
    |
    | Ant build script for Jaf specific tasks.
    |
    +-->
<project default="init">

    <!--+
        | Initialise the components.
        +-->
    <target name="init">
        <echo message="Jaf settings"/>
        <echo message="  jaf.version   : ${jaf.version}"/>
        <echo message="  jaf.home      : ${jaf.home}"/>
        <echo message=""/>
    </target>

    <!--+
        | Jaf properties.
        +-->
    <property name="jaf.home"    value="${project.base}/build/jaf"/>
    <property name="jaf.version" value="1.0.2"/>
    <property name="jaf.zip"     value="jaf-${jaf.version}.jaf"/>
    <property name="jaf.source"  value="http://codon.demon.co.uk/installs/java/libraries/jaf/jaf-${jaf.version}/jaf-${jaf.version}.zip"/>

    <!--+
        | Jaf library classpath.
        +-->
    <path id="jaf.classpath">
        <pathelement location="${jaf.home}/activation.jar"/>
    </path>

    <!--+
        | Delete the Jaf binary.
        +-->
    <target name="dist.delete" depends="">
        <delete dir="${jaf.home}"/>
    </target>

    <!--+
        | Download the Jaf binary.
        +-->
    <target name="dist.fetch" depends="">
        <mkdir dir="${download.cache}"/>
        <get verbose="true" usetimestamp="true"
            src="${jaf.source}"
            dest="${download.cache}/jaf-${jaf.version}.zip"
            />
    </target>

    <!--+
        | Unzip the Jaf binary.
        +-->
    <target name="dist.unzip" depends="">
        <mkdir dir="${download.temp}/jaf"/>
        <unzip src="${download.cache}/jaf-${jaf.version}.zip" dest="${download.temp}/jaf"/>
        <move toDir="${jaf.home}">
            <fileset dir="${download.temp}/jaf/jaf-${jaf.version}"/>
        </move>
        <delete dir="${download.temp}/jaf"/>
    </target>

    <!--+
        | Install the Jaf binary.
        +-->
    <target name="dist.install" depends="">
        <antcall target="dist.delete"/>
        <antcall target="dist.fetch"/>
        <antcall target="dist.unzip"/>
    </target>

    <!--+
        | Copy the Jaf jars into the local endorsed directory.
        | Required with Axis 1.1 on JDK 1.4.1 and Tomcat 4.1.24
        +-->
    <target name="install.endorsed" depends="">
        <copy verbose="true" toDir="${project.endorsed}">
            <fileset dir="${jaf.home}">
                <include name="activation.jar"/>
            </fileset>
        </copy>
    </target>

</project>
