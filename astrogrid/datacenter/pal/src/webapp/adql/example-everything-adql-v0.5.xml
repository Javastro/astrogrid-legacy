<!-- XML equiuvalent
SELECT DISTINCT t.b, b.* FROM Tab AS t, Bob AS b WHERE NOT (-(MAX(b.dd ) ) < 4.56 ) GROUP BY t.b HAVING b.x LIKE 'wibble%' OR b.z BETWEEN 4 AND 5 ORDER BY b.dd DESC
-->
<Select xmlns="http://tempuri.org/adql" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
>
    <OptionalAllOrDistinct>
       <Option>DISTINCT</Option>
    </OptionalAllOrDistinct>
    <SelectionList>
        <ColumnExpr>
            <SingleColumnReference>
                <TableName>s</TableName>
                <Name>MAG</Name>
            </SingleColumnReference>
        </ColumnExpr>
        <ColumnExpr>
            <AllColumnReference>
                <TableName>g</TableName>
            </AllColumnReference>
        </ColumnExpr>
    </SelectionList>
    <TableClause>
        <FromClause>
            <TableReference>
                <Table>
                    <Name>SampleStars</Name>
                    <AliasName>s</AliasName>
                </Table>
                <Table>
                    <Name>SampleGalaxies</Name>
                    <AliasName>g</AliasName>
                </Table>
            </TableReference>
        </FromClause>
        <WhereClause>
        <InverseSearch>
            <Condition xsi:type="PredicateSearch">
                <ComparisonPred>
                    <FirstExpr xsi:type="UnaryExpr" >
                       <Operator>-</Operator>
                       <Expr xsi:type="FunctionExpr">
                        <ExpressionFunction>
                            <FunctionReference>MAX</FunctionReference>
                            <Expr xsi:type="ColumnExpr">
                                <SingleColumnReference>
                                    <TableName>s</TableName>
                                    <Name>MAG</Name>
                                </SingleColumnReference>
                            </Expr>
                        </ExpressionFunction>
                        </Expr>
                    </FirstExpr>
                    <Compare>&lt;</Compare>
                    <SecondExpr xsi:type="AtomExpr">
                        <Value>
                            <NumberLiteral>
                                <ApproxNum>
                                    <Value>4.56</Value>
                                </ApproxNum>
                            </NumberLiteral>
                        </Value>
                    </SecondExpr>
                </ComparisonPred>
            </Condition>
            </InverseSearch>
        </WhereClause>
        <GroupByClause>
            <SingleColumnReference>
                <TableName>g</TableName>
                <Name>SHAPE</Name>
            </SingleColumnReference>
        </GroupByClause>
        <HavingClause>
            <UnionSearch>
                <FirstCondition xsi:type="PredicateSearch">
                    <LikePred>
                        <Expr xsi:type="ColumnExpr">
                            <SingleColumnReference>
                                <TableName>g</TableName>
                                <Name>SHAPE</Name>
                            </SingleColumnReference>
                        </Expr>
                        <Negate>false</Negate>
                        <Value>
                            <StringLiteral>
                                <Value>
                                    <string>Elliptical</string>
                                </Value>
                            </StringLiteral>
                        </Value>
                    </LikePred>
                </FirstCondition>
                <SecondCondition xsi:type="PredicateSearch">
                    <BetweenPred>
                        <Expr xsi:type="ColumnExpr">
                            <SingleColumnReference>
                                <TableName>g</TableName>
                                <Name>RA</Name>
                            </SingleColumnReference>
                        </Expr>
                        <Negate>false</Negate>
                        <FirstExpr xsi:type="AtomExpr">
                            <Value>
                                <NumberLiteral>
                                    <IntNum>
                                        <Value>4</Value>
                                    </IntNum>
                                </NumberLiteral>
                            </Value>
                        </FirstExpr>
                        <SecondExpr xsi:type="AtomExpr">
                            <Value>
                                <NumberLiteral>
                                    <IntNum>
                                        <Value>5</Value>
                                    </IntNum>
                                </NumberLiteral>
                            </Value>
                        </SecondExpr>
                    </BetweenPred>
                </SecondCondition>
            </UnionSearch>
        </HavingClause>
    </TableClause>
    <OrderBy>
        <OrderList>
            <Order>
                <Expr xsi:type="ColumnExpr">
                    <SingleColumnReference>
                        <TableName>s</TableName>
                        <Name>MAG</Name>
                    </SingleColumnReference>
                </Expr>
                <Option>
                    <Direction>DESC</Direction>
                </Option>
            </Order>
        </OrderList>
    </OrderBy>
</Select>
