<?xml version="1.0" encoding="UTF-8"?>
<!--  SQL equivalent
SELECT f.*, x.* FROM first AS f, xmm1 AS x WHERE f.ra && x.ra AND (DEGREES(2 * ASIN( SQRT(POW(SIN(RADIANS((23.0-f.decl)/2)), 2) + COS(RADIANS(23.0)) * COS(RADIANS(x.decl)) * POW(SIN(RADIANS(12.5-f.RA)/2),2)))) <15.0 ORDER BY f.phot_flux_peak - x.M1_FLUX , x.ra

WARNING: THE "ORDER BY" STATEMENT MAKES THIS QUERY *VERY SLOW*.
USE SELECT_CIRCLE_FAST INSTEAD! 
-->
<Select xmlns="http://tempuri.org/adql" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://tempuri.org/adql ADQLSchemav06.xsd">
    <Selection>
        <AliasSelectionItem>
            <ColumnExpr>
                <AllColumnReference>
                    <TableName>f</TableName>
                </AllColumnReference>
            </ColumnExpr>
        </AliasSelectionItem>
        <AliasSelectionItem>
            <ColumnExpr>
                <AllColumnReference>
                    <TableName>x</TableName>
                </AllColumnReference>
            </ColumnExpr>
        </AliasSelectionItem>
    </Selection>
    <TableClause>
        <FromClause>
            <TableReference>
                <Table>
                    <Name>first</Name>
                    <AliasName>f</AliasName>
                </Table>
                <Table>
                    <Name>xmm1</Name>
                    <AliasName>x</AliasName>
                </Table>
            </TableReference>
        </FromClause>
        <WhereClause>
            <IntersectionSearch>
                <FirstCondition xsi:type="PredicateSearch">
                    <ComparisonPred>
                        <FirstExpr xsi:type="ColumnExpr">
                            <SingleColumnReference>
                                <TableName>f</TableName>
                                <Name>errbox</Name>
                            </SingleColumnReference>
                        </FirstExpr>
                        <Compare>&lt;&gt;</Compare>
                        <SecondExpr xsi:type="ColumnExpr">
                            <SingleColumnReference>
                                <TableName>x</TableName>
                                <Name>errbox</Name>
                            </SingleColumnReference>
                        </SecondExpr>
                    </ComparisonPred>
                </FirstCondition>
                <SecondCondition xsi:type="RegionSearch">
                    <Circle xmlns:q1="urn:nvo-region" xsi:type="q1:circleType">
                        <q1:Center>
                            <Pos3Vector xmlns="urn:nvo-coords">
                                <CoordValue>
                                    <Value>
                                        <double>12.5</double>
                                        <double>23</double>
                                    </Value>
                                </CoordValue>
                            </Pos3Vector>
                        </q1:Center>
                        <q1:Radius>15.0</q1:Radius>
                    </Circle>
                </SecondCondition>
            </IntersectionSearch>
        </WhereClause>
    </TableClause>
    <OrderBy>
        <OrderList>
            <Order>
                <Expr xsi:type="BinaryExpr">
                    <FirstExpr xsi:type="ColumnExpr">
                        <SingleColumnReference>
                            <TableName>f</TableName>
                            <Name>phot_flux_peak</Name>
                        </SingleColumnReference>
                    </FirstExpr>
                    <Operator>-</Operator>
                    <SecondExpr xsi:type="ColumnExpr">
                        <SingleColumnReference>
                            <TableName>x</TableName>
                            <Name>M1_FLUX</Name>
                        </SingleColumnReference>
                    </SecondExpr>
                </Expr>
            </Order>
            <Order>
                <Expr xsi:type="ColumnExpr">
                    <SingleColumnReference>
                        <TableName>x</TableName>
                        <Name>ra</Name>
                    </SingleColumnReference>
                </Expr>
            </Order>
        </OrderList>
    </OrderBy>
</Select>
