<html>
<body>
<h1>Support for SQL queries</h1>

<i>
Some datacenters may accept queries formulated as SQL. As a potential security hole, this feature
is disabled by default. It is up to the datacenter admin to understand the risks and secure the
underlying database before enabling this feature.
</i>
<p>

If a sql query is submitted to a datacenter that hasn't enabled this feature
then a SecurityException is thrown back to the user.
<p>
Assuming the feature is enabled, SQL queries can be submitted to a datacenter
via the {@link org.astrogrid.datacenter.delegate.FullSearcher} delegate.

<h2>Query Format</h2>
The
SQL query must be wrapped in an XML fragment as follows:
<code>
<pre>
&lt;sql xmlns="urn:sql"&gt;
select horses from grandnational where legs &gt; 4 #arbitrary sql statement(s) here
&lt;/sql&gt;
</pre>
</code>

<p>
The namespace used in the fragment is important -- it determines which language translator is used
by the datacenter server to process the query. The "<tt>urn:sql</tt>" namespace
is defined in the {@link org.astrogrid.datacenter.sql.SQLUtils#SQL_XMLNS} constant.
<p>
The {@link org.astrogrid.datacenter.sql.SQLUtils} class also provides convenience methods
to wrap a SQL string in this XML fragment.

<h2>Running SQL Queries</h2>
The simple query web-form provided with PAL will accept SQL queries wrapped in the
XML fragment above (although it
doesn't publicize the fact). Furthermore, the  commandline tool
{@link org.astrogrid.datacenter.tools.SimpleQuerier} can be used to fire SQL statements at a
datacenter server.
</body>
</html>
