<?xml version="1.0" encoding="UTF-8"?>
<project xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:noNamespaceSchemaLocation="maven-project.xsd">
	
    <extend>../maven/project.xml</extend>
    
        <artifactId>astrogrid-adqlparser-base</artifactId>
        <package>org.astrogrid.adql</package>
        <currentVersion>${astrogrid.adqlparser.base.version}</currentVersion>
        <name>Astrogrid ADQL Base Parser</name>
        <description><![CDATA[
          This project contains the base parser which processes ADQL/s (ie: ADQL in string format)
          and outputs ADQL/x (ie: ADQL in xml format).
         ]]></description>
        <shortDescription>Astrogrid ADQL Base Parser</shortDescription>

    <dependencies>
  
      <!-- for help with XML -->
      <dependency>
         <artifactId>astrogrid-xml</artifactId>
         <groupId>org.astrogrid</groupId>
         <version>${astrogrid.xml.stable}</version>
      </dependency>
      
       <!-- XMLUtils for unit tests - used by astrogrid/xml at the moment.
         Lots of axis dependencies here :-( -->
      <dependency>
          <groupId>axis</groupId>
          <type>jar</type>
          <artifactId>axis</artifactId>
          <version>1.3</version>
      </dependency>
        <dependency>
                <groupId>axis</groupId>
                <type>jar</type>
                <artifactId>wsdl4j</artifactId>
                <version>1.5.1</version>
        </dependency>
        <dependency>
                <groupId>axis</groupId>
                <type>jar</type>
                <artifactId>axis-saaj</artifactId>
                <version>1.3</version>
        </dependency>
        <dependency>
                <groupId>axis</groupId>
                <type>jar</type>
                <artifactId>axis-jaxrpc</artifactId>
                <version>1.3</version>
        </dependency>
        <dependency>
                <groupId>axis</groupId>
                <type>jar</type>
                <artifactId>commons-logging</artifactId>
                <version>1.0.4</version>
        </dependency>
        <dependency>
                <groupId>axis</groupId>
                <type>jar</type>
                <artifactId>commons-discovery</artifactId>
                <version>0.2</version>
        </dependency>
        
     	<dependency>
                <groupId>javacc</groupId>
                <type>jar</type>
                <artifactId>javacc</artifactId>
                <version>4.0</version>
        </dependency>        

		<dependency>
                <groupId>saxon</groupId>
                <type>jar</type>
                <artifactId>saxon</artifactId>
                <version>6.5.5</version>
        </dependency> 

	<!-- xmlbeans for adql -->
	 	<dependency>
			<artifactId>xbean</artifactId>
			<groupId>xmlbeans</groupId>
			<version>2.3.0</version>
			<type>jar</type>
	 	</dependency>
	 	
	 	<dependency>
			<artifactId>jsr173_1.0_api</artifactId>
			<groupId>xmlbeans</groupId>
			<version>2.3.0</version>
			<type>jar</type>
	 	</dependency>
	 	
	 	<!-- dependency>
			<artifactId>xmlbeans_qname</artifactId>
			<groupId>xmlbeans</groupId>
			<version>2.3.0</version>
			<type>jar</type>
	 	</dependency -->
	 	
	  	<dependency>
	     	<!-- These are the generated beans for adql -->
		 	<artifactId>astrogrid-adqlbeans</artifactId>
	      
		 	<groupId>org.astrogrid</groupId>
		 	<version>${astrogrid.adqlbeans.version}</version>
		 	<type>jar</type>
	 	</dependency>
	 
	  <dependency>
        <id>xmlunit</id>
        <version>1.0</version>
      </dependency>
      
        <!--+
            | Commons logging API.
            +-->
        <dependency>
            <artifactId>commons-logging</artifactId>
            <groupId>commons-logging</groupId>
            <version>1.0.4</version>
        </dependency>
        
        <!--+
            | Log4j toolkit.
            +-->
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.8</version>
        </dependency>
  
      <dependency>
         <groupId>maven-plugins</groupId>
         <artifactId>maven-javacc-plugin</artifactId>
         <type>plugin</type>
         <version>1.1-patch</version>
      </dependency>

 	</dependencies>  
    
     <build>
     	<defaultGoal>jar:jar</defaultGoal>
        <sourceDirectory>src/java</sourceDirectory>
        <unitTestSourceDirectory>${basedir}/test/java</unitTestSourceDirectory>
        <resources>
           <resource>
               <directory>${basedir}/src/java</directory>
               <includes>
                  <include>*.properties</include>
                  <include>**/*.xml</include>
               </includes>
               <filtering>false</filtering>
           </resource>
           <!-- resource>
               <directory>${basedir}/src/config</directory>
               <includes>
                  <include>*.properties</include>
               </includes>
               <filtering>false</filtering>
           </resource -->
        </resources>
        <unitTest>
            <!--+
                | BEWARE IF YOU INCLUDE THE log4j.properties file with DEBUG or TRACE set.
                | The problem is largely related to running under Maven.
                | 180 parses under Maven with TRACE enabled took over 15 minutes to complete.
                | If you are attempting to debug under Maven, use file filtering to limit the 
                | number of queries involved. The following shows an example.
                | NOTE. The complete unit tests run over 20000 parses, although most of these
                | run automatically with logging switched off programmatically.
                +-->
            <resources>
                <resource>
                  <directory>${basedir}/test/queries</directory>
                  <includes>
                     <include>**/README_FOR_QUERIES</include>
                     <include>**/*.properties</include>
                     <include>**/*.xml</include>
                     <include>**/*.xsl*</include>
                     <!-- Apply filtering from here with log4j -->
                     <include>**/*.adqls</include>
                     <include>**/*.adqlx</include>
                     
                     <!-- These two lines limit the tests to just one query ...                     
                     <include>**/selectDistinct.adqls</include>
                     <include>**/selectDistinct.adqlx</include>                    
                     -->
                     
                  </includes>
               </resource>
               
               <resource>
				  <directory>${basedir}/src/config</directory>
				  <includes>
					<include>log4j.properties</include>
				  </includes>
			   </resource>
            </resources>
            <includes>
                <include>**/*Test.java</include>
            </includes>
        	<filtering>false</filtering>      
        </unitTest>
     </build>
    
</project>
