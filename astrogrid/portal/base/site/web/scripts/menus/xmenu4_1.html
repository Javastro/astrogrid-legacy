<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<title>xMenu4 - cascading menus from nested ULs</title>
<link rel='stylesheet' type='text/css' href='xmenu4_1.css' />
<script type='text/javascript' src='xmenu4_1.js'></script>
</head>

<body>

<h1>xMenu4 Demo 1</h1>

<div id='menuMarker'>.</div> <!-- Menu will be positioned here -->

<div class='content'>

<h2>Cascading menus from nested ULs</h2>

<ul id='myMenu1' class='myBar'> <!-- Begin myMenu1 --> <!-- Menu will downgrade here -->

  <!-- Bar Label 1 -->

  <li><a class='myBarLblA' href=''>Welcome</a>
    <ul class='myBox'>

      <li><a class='myBoxLblA' href=''>This Page</a>
        <ul class='myBox'>
          <li><a href='#js'>Javascript</a></li>
          <li><a href='#css'>CSS</a></li>
          <li><a href='#xhtml'>XHTML</a></li>
        </ul>
      </li> <!-- end 'This Page' -->

      <li><a href=''>item 1-2</a></li>

      <li><a class='myBoxLblA' href=''>Support</a>
        <ul class='myBox'>
          <li><a href='http://www.sitepointforums.com/forumdisplay.php?forumid=15'>SitePoint Forums</a></li>
          <li><a href='http://www.hftonline.com/forum/forumdisplay.php?forumid=16'>HFTOnline Forums</a></li>
        </ul>
      </li> <!-- end 'Support' -->

      <li><a class='myBoxLblA' href=''>lbl-1-2</a>
        <ul class='myBox'>
          <li><a href=''>item 1-2-1</a></li>
          <li><a href=''>item 1-2-2</a></li>

          <li><a class='myBoxLblA' href=''>lbl-1-2-1</a>
            <ul class='myBox'>
              <li><a href=''>item 1-2-1-1</a></li>
              <li><a href=''>item 1-2-1-2</a></li>
            </ul> <!-- end box-1-2-1 -->
          </li> <!-- end lbl-1-2-1 -->

        </ul> <!-- end box-1-2 -->
      </li> <!-- end lbl-1-2 -->

    </ul> <!-- end box-1 -->
  </li> <!-- end 'Welcome' -->

  <!-- Bar Label 2 -->

  <li><a class='myBarLblA' href=''>More</a>
    <ul class='myBox'>

      <li><a href=''>item 2-1</a></li>
      <li><a href=''>item 2-2</a></li>

      <li><a class='myBoxLblA' href=''>lbl-2-1</a>
        <ul class='myBox'>
          <li><a href=''>item 2-1-1</a></li>
          <li><a href=''>item 2-1-2</a></li>

          <li><a class='myBoxLblA' href=''>lbl-2-1-1</a>
            <ul class='myBox'>
              <li><a href=''>item 2-1-1-1</a></li>
              <li><a href=''>item 2-1-1-2</a></li>
            </ul> <!-- end box-2-1-1 -->
          </li> <!-- end lbl-2-1-1 -->

        </ul> <!-- end box-2-1 -->
      </li> <!-- end lbl-2-1 -->

      <li><a class='myBoxLblA' href=''>X Demos</a>
        <ul class='myBox'>
          <li><a href='http://cross-browser.com/x/hawk/'>Hawk</a></li>
          <li><a href='http://cross-browser.com/x/examples/tooltips.html'>Tooltips</a></li>
          <li><a href='http://cross-browser.com/x/examples/arrowkeys.html'>Key Events</a></li>
          <li><a href='http://cross-browser.com/x/examples/slideouts.html'>Slideouts</a></li>
          <li><a href='http://cross-browser.com/x/examples/drag1.html'>Drag 1</a></li>
        </ul>
      </li> <!-- end 'X Demos' -->

    </ul> <!-- end box-2 -->
  </li> <!-- end 'More' -->

  <!-- Bar Item 1 -->

  <li><a class='myBarItmA' href='http://cross-browser.com/'>Home</a></li>

</ul> <!-- end myMenu1 -->

<h3>Intro</h3>
<p><em>This is an experiment. It is still in development.</em>  ;-)</p>
<p>This code will turn a set of nested ULs into a cascading dhtml menu. It is completely downgradeable. Disable javascript and reload the page - you'll see the nested ULs with my downgrade css applied. Disable css (or select a user style sheet) - you'll see default nested ULs.</p>
<h3>Feedback</h3>
<p>I'm testing on Win98 with Opera 7.11, Firebird 0.6.1, Mozilla 1.4, and IE 6.0. If you're using a different browser or OS I would be interested in hearing about the results. You can usually find me at one of these forums:<br /><a href='http://www.sitepointforums.com/forumdisplay.php?forumid=15'>SitePoint - Javascript Forum</a><br /><a href='http://www.hftonline.com/forum/forumdisplay.php?forumid=16'>HFT Online - Webmastering Forum</a></p>
<p>Mike at <a href='http://cross-browser.com/'>Cross-Browser.com</a></p>
<h3>Revisions</h3>
<p>v0.06, 3 Nov 03<br />Many improvements this time - rewrote the css and changed some menu code; found an Opera7 bug (130324); IE6's css-support gave me headaches.</p>
<p>v0.05, 27 Oct 03<br />Separated css and js into two files each. Tweaked css. The menu code now applies the styles on load, so the inline class names can be for downgrade mode. Improved downgrade styles - disable js and reload page to see it. Much remains to be done.</p>
<p>v0.04, 25 Oct 03<br />More tweaks. As a test I moved the UL to several different places in the html. It is now in one of the content DIVs.</p>
<p>v0.03, 24 Oct 03<br />Improved event handling and tweaked over-all design.</p>
<p>v0.02, 23 Oct 03<br />I rewrote the event handling and added A elements in each label element.</p>
</div><!-- end content -->

<div id='js' class='content'>
<h2>Javascript</h2>
<p>The js is in two files. One is for page-related js - the loader and onload listener, the other is the menu system code.</p>
<p><a href='xmenu4.js'>xmenu4.js</a> - the menu system, don't rename this file.</p>
<p><a href='xmenu4_1.js'>xmenu4_1.js</a> - your page onload code, rename this to 'myPage.js'. The contents of this file follow.</p>
<pre>
////--- Loader

if (document.getElementById || document.all) {
  document.write("&lt;script type='text/javascript' src='../x.js'&gt;&lt;/script&gt;");
  document.write("&lt;script type='text/javascript' src='../x_util.js'&gt;&lt;/script&gt;");
  document.write("&lt;link rel='stylesheet' type='text/css' href='xmenu4_1_dhtml.css' /&gt;");
  document.write("&lt;script type='text/javascript' src='xmenu4.js'&gt;&lt;/script&gt;");
  window.onload = xOnload;
}

////--- Load Event Listener

function xOnload()
{
  var m = new xMenu4(
    'myMenu1',                // id str or ele obj of outermost UL
    true,                     // outer UL position: true=absolute, false=static
    0, 1,                     // box horizontal and vertical offsets
    [-3, -10, -6, -10],       // lbl focus clip array
    [-30, null, null, null],  // box focus clip array
    // css class names:
    'xmBar', 'xmBox',
    'xmBarLbl', 'xmBarLblHvr',
    'xmBarItm', 'xmBarItmHvr',
    'xmBoxLbl', 'xmBoxLblHvr',
    'xmBoxItm', 'xmBoxItmHvr'
  );

  xMnuMgr.add(m);

  xMoveTo(m.ele, xOffsetLeft('menuMarker'), xOffsetTop('menuMarker'));
  
  xMnuMgr.load();
  xMnuMgr.paint();
  xAddEventListener(window, 'resize', xmWinOnResize, false);
}

////--- Window Resize Event Listener

function xmWinOnResize()
{
  xMnuMgr.paint();
}
</pre>
</div><!-- end content -->

<div id='css' class='content'>
<h2>CSS</h2>
<p>The css is in two files. One supplies default and downgrade mode styles, the other supplies dhtml-related style rules.</p>
<p><a href='xmenu4_1.css'>xmenu4_1.css</a> - default and downgrade styles, rename this to 'myPage.css'.</p>
<p><a href='xmenu4_1_dhtml.css'>xmenu4_1_dhtml.css</a> - dhtml-related styles, rename this to 'myPage_dhtml.css'. The contents of this file follow.</p>
<pre>
/* xMenu4 DHTML Rules (see xmenu4_1.css for downgrade rules) */

/* Bar */

/* Outermost UL (horizontal bar) */
ul.xmBar {
  position:absolute; visibility:hidden;
  margin:0; padding:4px;
  background:#fff;
  overflow:visible; cursor:default;
  width:auto;
  float:none;
  border-left:3px solid #ccc;
  border-bottom:1px solid #ccc;
}
/* All LIs in ul.xmBar */
ul.xmBar li {
  list-style:none;
  display:inline;
  margin:0 8px 0 0; padding:2px 6px;
}
/* Bar label */
li.xmBarLbl {
  color:#000; background:#fff;
  border-left:1px solid #eee;
  border-top:1px solid #eee;
  border-right:1px solid #eee;
  border-bottom:1px solid #eee;
}
li.xmBarLblHvr {
  color:#008; background:#eee;
  border-left:1px solid #ccc;
  border-top:1px solid #ccc;
  border-right:1px solid #333;
  border-bottom:1px solid #333;
}
/* Bar item */
li.xmBarItm {
  color:#000; background:#fff;
  border-left:1px solid #eee;
  border-top:1px solid #eee;
  border-right:1px solid #eee;
  border-bottom:1px solid #eee;
}
li.xmBarItmHvr {
  color:#008; background:#eee;
  border-left:1px solid #ccc;
  border-top:1px solid #ccc;
  border-right:1px solid #333;
  border-bottom:1px solid #333;
}

/* Box */

/* All ULs except outermost */
ul.xmBox {
  position:absolute; visibility:hidden;
  display:block; width:114px;
  margin:0; padding:2px;
  background:#eee;
  border-left:1px solid #ccc;
  border-top:1px solid #ccc;
  border-right:1px solid #333;
  border-bottom:1px solid #333;
  overflow:visible; cursor:default;
}
/* All LIs in ul.xmBox */
ul.xmBox li {
  display:block; margin:6px 0; padding:0;
  width:114px; height:16px;
}
/* Box label */
li.xmBoxLbl {
  color:#000; background:transparent;
  border-right:1px solid #333;
}
li.xmBoxLblHvr {
  color:#000; background:#ddd;
  border-right:1px solid #800;
}
/* Box item */
li.xmBoxItm {
  color:#000; background:transparent;
}
li.xmBoxItmHvr {
  color:#000; background:#ddd;
}

/* A element over-rides so we don't inherit unwanted styles */

ul.xmBar li a, ul.xmBar li a:hover { /* for all As in ul.xmBar */
  display:inline;
  margin:0; padding:0; border:none;
  font-weight:normal; text-decoration:none;
  color:#000; background:transparent;
}
ul.xmBox li a, ul.xmBox li a:hover { /* for all As in ul.xmBox */
  display:block; width:100%;
  margin:0; padding:0; border:none;
  font-weight:normal; text-decoration:none;
  color:#000; background:transparent;
}

/* Misc */

#menuMarker { /* menu will be positioned at this element */
  display:block;
  position:relative; overflow:hidden;
  margin:0 20px 32px 20px; padding:0;
  color:#fff; background:#fff;
}
</pre>
</div><!-- end content -->

<div id='xhtml' class='content'>
<h2>XHTML</h2>
<p>No IDs are required, except for the outermost UL. The inline class names are for downgrade mode. Non-downgrade mode class names are passed to the menu object constructor. When Javascript and/or CSS are disabled the menu downgrades to standard nested ULs.</p>
<pre>
&lt;ul id='myMenu1' class='myBar'&gt; &lt;!-- Begin myMenu1 --&gt;

  &lt;!-- Bar Label 1 --&gt;

  &lt;li&gt;&lt;a class='myBarLblA' href=''&gt;lbl-1&lt;/a&gt;
    &lt;ul class='myBox'&gt;

      &lt;li&gt;&lt;a href=''&gt;item 1-1&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=''&gt;item 1-2&lt;/a&gt;&lt;/li&gt;

      &lt;li&gt;&lt;a class='myBoxLblA' href=''&gt;lbl-1-1&lt;/a&gt;
        &lt;ul class='myBox'&gt;
          &lt;li&gt;&lt;a href=''&gt;item 1-1-1&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=''&gt;item 1-1-2&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt; &lt;!-- end box-1-1 --&gt;
      &lt;/li&gt; &lt;!-- end lbl-1-1 --&gt;

      &lt;li&gt;&lt;a class='myBoxLblA' href=''&gt;lbl-1-2&lt;/a&gt;
        &lt;ul class='myBox'&gt;
          &lt;li&gt;&lt;a href=''&gt;item 1-2-1&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=''&gt;item 1-2-2&lt;/a&gt;&lt;/li&gt;

          &lt;li&gt;&lt;a class='myBoxLblA' href=''&gt;lbl-1-2-1&lt;/a&gt;
            &lt;ul class='myBox'&gt;
              &lt;li&gt;&lt;a href=''&gt;item 1-2-1-1&lt;/a&gt;&lt;/li&gt;
              &lt;li&gt;&lt;a href=''&gt;item 1-2-1-2&lt;/a&gt;&lt;/li&gt;
            &lt;/ul&gt; &lt;!-- end box-1-2-1 --&gt;
          &lt;/li&gt; &lt;!-- end lbl-1-2-1 --&gt;

        &lt;/ul&gt; &lt;!-- end box-1-2 --&gt;
      &lt;/li&gt; &lt;!-- end lbl-1-2 --&gt;

    &lt;/ul&gt; &lt;!-- end box-1 --&gt;
  &lt;/li&gt; &lt;!-- end lbl-1 --&gt;

  &lt;!-- Bar Label 2 --&gt;

  &lt;li&gt;&lt;a class='myBarLblA' href=''&gt;lbl-2&lt;/a&gt;
    &lt;ul class='myBox'&gt;

      &lt;li&gt;&lt;a href=''&gt;item 2-1&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=''&gt;item 2-2&lt;/a&gt;&lt;/li&gt;

      &lt;li&gt;&lt;a class='myBoxLblA' href=''&gt;lbl-2-1&lt;/a&gt;
        &lt;ul class='myBox'&gt;
          &lt;li&gt;&lt;a href=''&gt;item 2-1-1&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=''&gt;item 2-1-2&lt;/a&gt;&lt;/li&gt;

          &lt;li&gt;&lt;a class='myBoxLblA' href=''&gt;lbl-2-1-1&lt;/a&gt;
            &lt;ul class='myBox'&gt;
              &lt;li&gt;&lt;a href=''&gt;item 2-1-1-1&lt;/a&gt;&lt;/li&gt;
              &lt;li&gt;&lt;a href=''&gt;item 2-1-1-2&lt;/a&gt;&lt;/li&gt;
            &lt;/ul&gt; &lt;!-- end box-2-1-1 --&gt;
          &lt;/li&gt; &lt;!-- end lbl-2-1-1 --&gt;

        &lt;/ul&gt; &lt;!-- end box-2-1 --&gt;
      &lt;/li&gt; &lt;!-- end lbl-2-1 --&gt;

      &lt;li&gt;&lt;a class='myBoxLblA' href=''&gt;lbl-2-2&lt;/a&gt;
        &lt;ul class='myBox'&gt;
          &lt;li&gt;&lt;a href=''&gt;item 2-2-1&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=''&gt;item 2-2-2&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt; &lt;!-- end lbl-2-2 --&gt;
      &lt;/li&gt; &lt;!-- end box-2-2 --&gt;

    &lt;/ul&gt; &lt;!-- end box-2 --&gt;
  &lt;/li&gt; &lt;!-- end lbl-2 --&gt;

  &lt;!-- Bar Item 1 --&gt;

  &lt;li&gt;&lt;a class='myBarItmA' href=''&gt;item-1&lt;/a&gt;&lt;/li&gt;

&lt;/ul&gt; &lt;!-- end myMenu1 --&gt;
</pre>
</div><!-- end content -->

<div id='footer'>Get X at <a href='http://cross-browser.com/'>Cross-Browser.com</a></div>

</body>
</html>

