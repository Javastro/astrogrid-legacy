<?xml version="1.0"?>
<!--+
    | <cvs:source>$Source: /Users/pharriso/Work/ag/repo/git/astrogrid-mirror/astrogrid/portal/login/site/sitemap.xmap,v $</cvs:source>
    | <cvs:author>$Author: dave $</cvs:author>
    | <cvs:date>$Date: 2004/01/09 07:25:42 $</cvs:date>
    | <cvs:version>$Revision: 1.4 $</cvs:version>
    | <cvs:log>
    |   $Log: sitemap.xmap,v $
    |   Revision 1.4  2004/01/09 07:25:42  dave
    |   Changed redirect to welcome page
    |
    | </cvs:log>
    |
    +-->
<map:sitemap xmlns:map="http://apache.org/cocoon/sitemap/1.0">

<!-- ======================== Components ================================ -->

	<map:components>
		<map:generators default="file"/>
		<map:transformers default="xslt"/>
		<map:readers default="resource"/>
		<map:serializers default="html"/>
		<map:selectors default="browser"/>

		<map:selector
			name="parameter"
			logger="sitemap.selector.parameter"
			src="org.apache.cocoon.selection.ParameterSelector"/>

		<map:matchers default="wildcard"/>
		<map:actions>
			<map:action
				name="astro-login" 
				src="org.astrogrid.portal.cocoon.common.LoginAction"/>
		</map:actions>
	</map:components>

<!-- =========================== Views =================================== -->

	<!--+
		| Views for debugging XSL transforms
		+-->
	<map:views>
		<!-- Original XML displayed as XML -->
		<map:view name="000" from-label="000">
			<map:serialize type="xml"/>
		</map:view>
		<!-- Original XML, displayed as XML/HTML -->
		<map:view name="001" from-label="001">
			<!-- Convert into XML/HTML -->
			<map:transform src="web/style/xsl/xml-html.xsl"/>
			<map:serialize type="html"/>
		</map:view>
		<!-- XML processed into a page, displayed as XML/HTML -->
		<map:view name="002" from-label="002">
			<!-- Convert into XML/HTML -->
			<map:transform src="web/style/xsl/xml-html.xsl"/>
			<map:serialize type="html"/>
		</map:view>
		<!-- Page wrapped in our template, displayed as XML/HTML -->
		<map:view name="003" from-label="003">
			<!-- Convert into XML/HTML -->
			<map:transform src="web/style/xsl/xml-html.xsl"/>
			<map:serialize type="html"/>
		</map:view>
	</map:views>

<!-- ========================== Resources ================================= -->

	<map:resources>
	</map:resources>

<!-- ========================== Pipelines ================================= -->

	<map:pipelines>
		<!--+
			| Main pipeline.
			+-->
		<map:pipeline>

			<!-- Login page -->
			<map:match pattern="login-form">
				<!--+
					| Call the LoginAction to validate the name and password.
					+-->
				<map:act type="astro-login">
					<!--+
						| If we are logged in, display the nice page.
						+-->
					<map:generate type="file" src="xml/login-pass.xml"/>
				</map:act>
				<!--+
					| If we are not logged in, display the login form.
					+-->
				<map:generate type="file" src="xml/login-form.xml"/>
				<map:serialize type="xml"/>
			</map:match>

		</map:pipeline>
	</map:pipelines>
</map:sitemap>
