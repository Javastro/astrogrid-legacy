<?xml version="1.0"?>
<agp:menu-def
    name="workflow-menu"
    xmlns:agp="http://www.astrogrid.org/portal">
  <agp:menu
      contents="File"
      contents-hover="File"
      uri=""
      target="_self"
      status-text="File...">
    <agp:item
        contents="Open"
        contents-hover="Open"
        uri='javascript:void(window.open("/astrogrid-portal/mount/myspace/myspace-micro?ivorn=open-workflow-ivorn&amp;agsl=open-workflow-agsl&amp;form_name=workflow_form&amp;field_name=workflow_action&amp;field_value=read-workflow", "mySpaceMicro", "toolbar=no, directories=no, location=no, status=no, menubar=no, resizable=no, scrollbars=yes, width=300, height=200"));'
        target="_self"
        status-text="Open a workflow"/>
    <agp:item
        contents="Save"
        contents-hover="Save"
        uri='javascript:void(window.open("/astrogrid-portal/mount/myspace/myspace-micro?ivorn=save-workflow-ivorn&amp;agsl=save-workflow-agsl&amp;form_name=workflow_form&amp;field_name=workflow_action&amp;field_value=save-workflow", "mySpaceMicro", "toolbar=no, directories=no, location=no, status=no, menubar=no, resizable=no, scrollbars=yes, width=300, height=200"));'
        target="_self"
        status-text="Save a workflow"/>
    <agp:item
        contents="Submit workflow"
        contents-hover="Submit workflow"
        uri="/astrogrid-portal/main/mount/workflow/agjobmanager.html?action=submit-workflow"
        target="_self"
        status-text="Submit a workflow to the Job Entry System..."/>        
  </agp:menu>
  <agp:menu
      contents="Edit"
      contents-hover="Edit"
      uri=""
      target="_self"
      status-text="Edit workflow...">
        <agp:menu
            contents="Insert step"
            contents-hover="Insert step"
            uri=""
            target="_self"
            status-text="Insert...">
            <agp:item
                contents="before"
                contents-hover="before"
                uri='javascript:
                     if (document.getElementById("activity_key").value == "/sequence")
                     {
                         alert("Not possible here (cannot insert before root element)....");
                     }                                
                     else if (document.getElementById("activity_key").value) 
                     { 
                         document.getElementById("activity_index_order_step").value = "BEFORE";
                         document.insert_step_form.submit(); 
                     } 
                     else 
                     { 
                         alert("Please highlight where...."); 
                      }'
                target="_self"
                status-text="Insert step into workflow...."/>
            <agp:item
                contents="here"
                contents-hover="here"
                uri='javascript:
                     if (document.getElementById("activity_type").value == "step")
                     {
                         alert("Not possible here (cannot insert into step)....");
                     }
                     else if (document.getElementById("activity_key").value) 
                     {
                         document.getElementById("activity_index_order_step").value = "HERE";
                         document.insert_step_form.submit(); 
                     } 
                     else 
                     { 
                         alert("Please highlight where...."); 
                     }'
                target="_self"
                status-text="Insert step into workflow...."/>                
            <agp:item
                contents="after"
                contents-hover="after"
                uri='javascript: 
                     if (document.getElementById("activity_key").value == "/sequence")
                     {
                         alert("Not possible here (cannot insert after root element)....");
                     }                
                     else if (document.getElementById("activity_key").value) 
                     { 
                         document.getElementById("activity_index_order_step").value = "AFTER";
                         document.insert_step_form.submit(); 
                     } 
                     else 
                     { 
                         alert("Please highlight where...."); 
                     }'
                target="_self"
                status-text="Insert step into workflow...."/>

        </agp:menu>
        <agp:menu
            contents="Insert flow"
            contents-hover="Insert flow"
            uri=""
            target="_self"
            status-text="Insert...">
            <agp:item
                contents="before"
                contents-hover="before"
                uri='javascript:
                     if (document.getElementById("activity_key").value == "/sequence")
                     {
                         alert("Not possible here (cannot insert before root element)....");
                     }                
                     else if (document.getElementById("activity_key").value) 
                     { 
                         document.getElementById("activity_index_order_flow").value = "BEFORE";
                         document.insert_flow_form.submit(); 
                     } 
                     else 
                     { 
                         alert("Please highlight where...."); 
                     }'
                target="_self"
                status-text="Insert flow into workflow...."/>
            <agp:item
                contents="here"
                contents-hover="here"
                uri='javascript:
                     if (document.getElementById("activity_type").value == "step")
                     {
                         alert("Not possible here (cannot insert into step)....");
                     }
                     else if (document.getElementById("activity_key").value) 
                     {
                         document.getElementById("activity_index_order_flow").value = "HERE"; 
                         document.insert_flow_form.submit(); 
                     } 
                     else 
                     { 
                         alert("Please highlight where...."); 
                     }'
                target="_self"
                status-text="Insert flow into workflow...."/>                
            <agp:item
                contents="after"
                contents-hover="after"
                uri='javascript:
                     if (document.getElementById("activity_key").value == "/sequence")
                     {
                         alert("Not possible here (cannot insert after root element)....");
                     }                
                     else if (document.getElementById("activity_key").value) 
                     {
                         document.getElementById("activity_index_order_flow").value = "AFTER"; 
                         document.insert_flow_form.submit(); 
                     } 
                     else 
                     { 
                         alert("Please highlight where...."); 
                     }'
                target="_self"
                status-text="Insert flow into workflow...."/>

        </agp:menu>
        <agp:menu
            contents="Insert sequence"
            contents-hover="Insert sequence"
            uri=""
            target="_self"
            status-text="Insert...">
            <agp:item
                contents="before"
                contents-hover="before"
                uri='javascript:
                     if (document.getElementById("activity_key").value == "/sequence")
                     {
                         alert("Not possible here (cannot insert before root element)....");
                     }                
                     else if (document.getElementById("activity_key").value) 
                     {
                         document.getElementById("activity_index_order_sequence").value = "BEFORE"; 
                         document.insert_sequence_form.submit(); 
                     } 
                     else 
                     { 
                         alert("Please highlight where...."); 
                     }'
                target="_self"
                status-text="Insert sequence into workflow...."/>
            <agp:item
                contents="here"
                contents-hover="here"
                uri='javascript:
                     if (document.getElementById("activity_type").value == "step")
                     {
                         alert("Not possible here (cannot insert into step)....");
                     }
                     else if (document.getElementById("activity_key").value) 
                     { 
                         document.getElementById("activity_index_order_sequence").value = "HERE";
                         document.insert_sequence_form.submit(); 
                     } 
                     else 
                     { 
                         alert("Please highlight where...."); 
                     }'
                target="_self"
                status-text="Insert sequence into workflow...."/>
            <agp:item
                contents="after"
                contents-hover="after"
                uri='javascript:
                     if (document.getElementById("activity_key").value == "/sequence")
                     {
                         alert("Not possible here (cannot insert after root element)....");
                     }                
                     else if (document.getElementById("activity_key").value) 
                     { 
                         document.getElementById("activity_index_order_sequence").value = "AFTER";
                         document.insert_sequence_form.submit(); 
                     } 
                     else 
                     { 
                         alert("Please highlight where...."); 
                     }'
                target="_self"
                status-text="Insert sequence into workflow...."/>

        </agp:menu>
    <agp:item
        contents="Remove"
        contents-hover="Remove"
        uri='javascript:if (document.getElementById("activity_key").value == "/sequence")
             {
                 alert("Not possible here (cannot remove root element)....");
             }
             else if (document.getElementById("activity_key").value)
             { 
                 document.remove_activity_form.submit(); 
             }
             else
             {
                 alert("Please highlight where....");
             }'
        target="_self"
        status-text="Remove acativity...."/>
    <agp:item
        contents="Reset"
        contents-hover="Reset"
        uri='javascript:if (confirm("All workflow information will be removed....")) 
             { 
                 location.replace("/astrogrid-portal/main/mount/workflow/agjobmanager.html?action=reset-workflow"); 
             }
             else 
             {
                 location.replace("/astrogrid-portal/main/mount/workflow/agjobmanager.html");
             }'
        target="_self"
        status-text="Start with an empty workflow"/>                         
  </agp:menu>
  <agp:menu
      contents="Help"
      contents-hover="Help"
      uri=""
      target="_self"
      status-text="Help...">  
    <agp:item
        contents="FAQ"
        contents-hover="FAQ"
        uri=""
        target="_self"
        status-text="Frequently asked questions..."/>      
  </agp:menu>
</agp:menu-def>
