<?xml version="1.0" encoding="UTF-8"?>
<!--+
    | <cvs:source>$Source: /Users/pharriso/Work/ag/repo/git/astrogrid-mirror/astrogrid/old-portal/src/site/Attic/sitemap.xmap,v $</cvs:source>
    | <cvs:date>$Author: dave $</cvs:date>
    | <cvs:author>$Date: 2003/06/09 10:20:50 $</cvs:author>
    | <cvs:version>$Revision: 1.6 $</cvs:version>
    | <cvs:log>
    | $Log: sitemap.xmap,v $
    | Revision 1.6  2003/06/09 10:20:50  dave
    | Added Axis integration tests
    |
    | Revision 1.5  2003/06/05 09:05:56  dave
    | Added JWS and RPC WebService tests.
    |
    | Revision 1.4  2003/06/04 11:59:22  dave
    | Updated site directory structure
    |
    | Revision 1.3  2003/06/04 09:47:34  dave
    | Updated sitemap to match directory changes
    |
    | Revision 1.2  2003/06/04 09:12:05  dave
    | Reorganised site directories, and added SOAP message test
    |
    | Revision 1.1  2003/06/03 13:16:47  dave
    | Added initial iter 02 code
    |
    | Revision 1.6  2003/06/01 19:22:09  Dumbledore
    | Added test SOAP service and dummy myspace service.
    |
    | Revision 1.5  2003/05/30 15:28:04  Dumbledore
    | Added SOAP request generator.
    | 
    | Revision 1.4  2003/05/27 14:25:06  Dumbledore
    | Added initial code for explorer views.
    | 
    | Revision 1.3  2003/05/25 22:24:23  Dumbledore
    | Initial attempt at an XSP action - hand written Java code to start with.
    | 
    | Revision 1.2  2003/05/25 11:29:04  Dumbledore
    | Fixed bug in the cvs log header.
    | 
    | </cvs:log>
    |
    | Sub sitemap for Astrogrid services.
    |
    +-->
<map:sitemap xmlns:map="http://apache.org/cocoon/sitemap/1.0">

<!-- =========================== Components ================================ -->

	<map:components>
		<map:generators   default="file"/>
		<map:transformers default="xslt"/>
		<map:readers      default="resource"/>
		<map:serializers  default="html"/>
		<map:matchers     default="wildcard"/>
		<map:selectors    default="browser"/>
	</map:components>

<!-- =========================== Views =================================== -->

	<map:views>
	</map:views>

<!-- =========================== Resources ================================= -->

	<map:resources>
	</map:resources>

<!-- =========================== Pipelines ================================= -->

	<map:pipelines>

		<map:pipeline>

<!-- New sitemap pipelines -->

			<!-- SOAP echo service -->
			<map:match pattern="soap/service/echo">
				<!-- Generate XML from the SOAP request -->
				<map:generate  src="soap/generator/soap-request.xsp" type="serverpages"/>
				<!-- Transform the request into the response -->
				<map:transform src="soap/services/echo/echo-soap.xsl"/>
				<!-- Wrap the response in a SOAP envelope -->
				<map:transform src="soap/generator/soap-envelope.xsl"/>
				<!-- Serialize as XML -->
				<map:serialize type="xml"/>
			</map:match>

			<!-- SOAP echo test -->
			<map:match pattern="soap/test/echo">
				<map:generate  src="soap/services/echo/echo-test.xsp" type="serverpages"/>
				<!-- Serialize as HTML -->
				<map:transform src="util/html/xml-html.xsl"/>
				<map:serialize type="html"/>
			</map:match>

			<!-- SOAP calc service -->
			<map:match pattern="soap/service/calc">
				<!-- Generate XML from the SOAP request -->
				<map:generate  src="soap/generator/soap-request.xsp" type="serverpages"/>
				<!-- Transform the request into the response -->
				<map:transform src="soap/services/calc/calc-soap.xsl"/>
				<!-- Wrap the response in a SOAP envelope -->
				<map:transform src="soap/generator/soap-envelope.xsl"/>
				<!-- Serialize as XML -->
				<map:serialize type="xml"/>
			</map:match>

			<!-- SOAP calc test -->
			<map:match pattern="soap/test/calc">
				<!-- Call the test services -->
				<map:generate  src="soap/services/calc/calc-test.xsp" type="serverpages"/>
				<!-- Include the wsdl for the axis service -->
				<map:transform type="cinclude"/>
				<!-- Serialize as HTML -->
				<map:transform src="util/html/xml-html.xsl"/>
				<map:serialize type="html"/>
			</map:match>

			<!-- SOAP message servivce -->
			<map:match pattern="soap/service/message">
				<!-- Generate XML from the SOAP request -->
				<map:generate  src="soap/generator/soap-request.xsp" type="serverpages"/>
				<!-- Transform the request into the response -->
				<map:transform src="soap/services/message/message-soap.xsl"/>
				<!-- Wrap the response in a SOAP envelope -->
				<map:transform src="soap/generator/soap-envelope.xsl"/>
				<!-- Serialize as XML -->
				<map:serialize type="xml"/>
			</map:match>

			<!-- SOAP message test -->
			<map:match pattern="soap/test/message">
				<map:generate  src="soap/services/message/message-test.xsp" type="serverpages"/>
				<!-- Include the wsdl for the axis service -->
				<map:transform type="cinclude"/>
				<!-- Serialize as HTML -->
				<map:transform src="util/html/xml-html.xsl"/>
				<map:serialize type="html"/>
			</map:match>

			<!-- SOAP version test -->
			<map:match pattern="soap/test/version">
				<map:generate  src="soap/services/version/version-test.xsp" type="serverpages"/>
				<!-- Include the wsdl for the axis service -->
				<map:transform type="cinclude"/>
				<!-- Serialize as HTML -->
				<map:transform src="util/html/xml-html.xsl"/>
				<map:serialize type="html"/>
			</map:match>

			<!-- SOAP JWS test -->
			<map:match pattern="soap/test/jws">
				<map:generate  src="soap/services/test/jws/jws-test.xsp" type="serverpages"/>
				<!-- Include the wsdl for the axis service -->
				<map:transform type="cinclude"/>
				<!-- Serialize as HTML -->
				<map:transform src="util/html/xml-html.xsl"/>
				<map:serialize type="html"/>
			</map:match>

			<!-- SOAP JWS test (person) -->
			<map:match pattern="soap/test/jws-person">
				<map:generate  src="soap/services/test/jws/jws-person-test.xsp" type="serverpages"/>
				<!-- Include the wsdl for the axis service -->
				<map:transform type="cinclude"/>
				<!-- Serialize as HTML -->
				<map:transform src="util/html/xml-html.xsl"/>
				<map:serialize type="html"/>
			</map:match>

			<!-- SOAP RPC test -->
			<map:match pattern="soap/test/rpc">
				<map:generate  src="soap/services/test/rpc/rpc-test.xsp" type="serverpages"/>
				<!-- Include the wsdl for the axis service -->
				<map:transform type="cinclude"/>
				<!-- Serialize as HTML -->
				<map:transform src="util/html/xml-html.xsl"/>
				<map:serialize type="html"/>
			</map:match>

			<!-- SOAP DOC test -->
			<map:match pattern="soap/test/doc">
				<map:generate  src="soap/services/test/doc/doc-test.xsp" type="serverpages"/>
				<!-- Include the wsdl for the axis service -->
				<map:transform type="cinclude"/>
				<!-- Serialize as HTML -->
				<map:transform src="util/html/xml-html.xsl"/>
				<map:serialize type="html"/>
			</map:match>



<!--+
    | Old sitemap pipelines.
    | These are being updated as I re-arrange the directory structure.
    | They may refer to files that have been moved.
    +-->

			<!-- Home page redirect -->
			<map:match pattern="">
				<map:redirect-to session="true" uri="home"/>
			</map:match>
			<!-- Initial home page -->
			<map:match pattern="home*">
				<map:generate  src="home/hello.xml"/>
				<map:transform src="tree/styles/tree-navigation.xsl"/>
				<map:transform src="home/styles/table-layout.xsl"/>
				<map:serialize type="html"/>
			</map:match>

			<!-- Session test pages -->
			<map:match pattern="session/*">
				<map:generate  type="serverpages" src="xsp/session/session-details.xsp">
					<parameter name="action" value="{1}"/>
				</map:generate>
				<map:transform src="util/html/xml-html.xsl"/>
				<map:serialize type="html"/>
			</map:match>

			<!-- Explorer test pages -->
			<map:match pattern="explorer/*">
				<map:generate type="serverpages" src="xsp/explorer/view-details.xsp">
					<parameter name="ident"  value="{1}"/>
				</map:generate>
				<map:transform src="util/html/xml-html.xsl"/>
				<map:serialize type="html"/>
			</map:match>

			<map:match pattern="explorer/*/*">
				<map:generate type="serverpages" src="xsp/explorer/view-details.xsp">
					<parameter name="ident"  value="{1}"/>
					<parameter name="action" value="{2}"/>
				</map:generate>
				<map:transform src="util/html/xml-html.xsl"/>
				<map:serialize type="html"/>
			</map:match>





			<!-- MySpace SOAP service -->
			<map:match pattern="myspace/lookup">
<!--
<map:generate  src="xml/myspace/lookup-request.xml"/>
-->
				<!-- Start with the SOAP request -->
				<map:generate  type="serverpages" src="xsp/soap/soap-request.xsp"/>
				<!-- Extract the path info into an xinclude element -->
				<map:transform src="xsl/myspace/lookup-request.xsl"/>
				<!-- Include the data -->
				<map:transform type="xinclude"/>
				<!-- Serialize as XML -->
				<map:serialize type="xml"/>
<!--
<map:transform src="xsl/xml-html.xsl"/>
<map:serialize type="html"/>
-->
			</map:match>


			<!-- Treeview source files -->
			<map:match pattern="tree/scripts/*.js">
				<map:read mime-type="text/js" src="tree/scripts/{1}.js"/>
			</map:match>
			<!-- Treeview image files -->
			<map:match pattern="tree/icons/*.gif">
				<map:read mime-type="image/gif" src="tree/icons/{1}.gif"/>
			</map:match>

			<!-- Tree data page -->
			<map:match pattern="tree/data*">
				<map:generate  src="xml/tree-data.xml"/>
				<map:serialize type="xml"/>
			</map:match>
			<map:match pattern="tree/tree*">
				<map:generate  src="xml/tree-data.xml"/>
				<map:transform src="xsl/tree-navigation.xsl"/>
				<map:serialize type="xml"/>
			</map:match>
			<map:match pattern="tree/table*">
				<map:generate  src="xml/tree-data.xml"/>
				<map:transform src="xsl/tree-navigation.xsl"/>
				<map:transform src="xsl/table-layout.xsl"/>
				<map:serialize type="xml"/>
			</map:match>
			<map:match pattern="tree/html*">
				<map:generate  src="xml/tree-data.xml"/>
				<map:transform src="xsl/tree-navigation.xsl"/>
				<map:transform src="xsl/table-layout.xsl"/>
				<map:serialize type="html"/>
			</map:match>

		</map:pipeline>

	</map:pipelines>

</map:sitemap>
