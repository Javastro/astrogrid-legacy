/* Generated By: AdqlStoX.jjt,v 1.16 2007/07/23 09&JJTree: Do not edit this line. AST_Direction.java */

package org.astrogrid.adql;

import org.apache.xmlbeans.XmlObject;
import org.astrogrid.adql.beans.AtomType;
import org.apache.commons.logging.Log ;
import org.apache.commons.logging.LogFactory ;
import org.astrogrid.stc.beans.HsOffsetType;

public class AST_Direction extends SimpleNode {
    
    private static Log log = LogFactory.getLog( AST_Direction.class ) ;

    public AST_Direction(AdqlStoX p, int id) {
        super(p, id);
        this.elementName = AdqlCompiler.OFFSET_ELEMENT ;
        this.schemaType = HsOffsetType.type ;
    }

    public void buildXmlTree( XmlObject xo ) {
        if( log.isTraceEnabled() ) enterTrace( log, "AST_Direction.buildXmlTree()" ) ;
        AtomType at = (AtomType)xo.changeType( AtomType.type )  ; 
        if( jjtGetNumChildren() > 1 ) {
            //
            // Ignore the "sign" node which is optional
            // and already accounted for...
            children[1].buildXmlTree( at ) ;
            at = (AtomType)children[1].getGeneratedObject() ;
        }
        else {
            children[0].buildXmlTree( at ) ;
            at = (AtomType)children[0].getGeneratedObject() ;
        }    
        this.generatedObject = at ;
        double d = this.unpackNumericLiteral( at ).doubleValue() ;
        if( d > +1 || d < -1 ) {
            this.parser.tracker.setError( "Direction must be between -1 and +1" ) ;
        }       
        super.buildXmlTree( (XmlObject )this.generatedObject ) ;
        if( log.isTraceEnabled() ) exitTrace( log, "AST_Direction.buildXmlTree()" ) ; 
    }

}
