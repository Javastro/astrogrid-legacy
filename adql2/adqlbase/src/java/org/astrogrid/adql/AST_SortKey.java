/* Generated By: AdqlStoX.jjt,v 1.28 2007/07/27 21&JJTree: Do not edit this line. AST_SortKey.java */

package org.astrogrid.adql;

import org.astrogrid.adql.beans.AtomType;
import org.astrogrid.adql.beans.LiteralType;
import org.astrogrid.adql.beans.StringType;
import org.astrogrid.adql.beans.IntegerType;
import org.apache.xmlbeans.XmlObject; 
import org.apache.commons.logging.Log ;
import org.apache.commons.logging.LogFactory ;

public class AST_SortKey extends SimpleNode {
    
    private static Log log = LogFactory.getLog( AST_SortKey.class ) ;

    public AST_SortKey(AdqlStoX p, int id) {
        super(p, id);
    }
  
    public void buildXmlTree( XmlObject xo ) {
        if( log.isTraceEnabled() ) enterTrace( log, "AST_SortKey.buildXmlTree()" ) ; 
        AtomType orderType = (AtomType)xo.changeType( AtomType.type ) ;
        LiteralType lt = orderType.addNewLiteral() ;
      
        //
        // If it is only 1 child, it must be column name...
        if( jjtGetNumChildren() == 1 ) {
            StringType st = (StringType)lt.changeType(StringType.type) ;
            st.setValue( (String)children[0].getGeneratedObject() ) ;
            this.generatedObject = st ;
        }
        //
        // Else it must be column rank order...
        // (may need to rule out 0 ???)
        else {
            IntegerType it = (IntegerType)lt.changeType(IntegerType.type) ;
            Integer i = Integer.valueOf( this.getFirstToken().image ) ; 
            it.setValue( i.longValue() ) ;
            this.generatedObject = it ;
        }
        super.buildXmlTree( (XmlObject)this.generatedObject ) ;
        if( log.isTraceEnabled() ) exitTrace( log, "AST_SortKey.buildXmlTree()" ) ; 
    }
}
