<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 TRANSITIONAL//EN">
<html>
<head>
  <title>AstroGrid Development Process</title>
</head>
<body>
<h1>Development and Integration
Procedure</h1>
<h2>Introduction</h2>
This document describes the new development process that will be
followed from Iteration 7. It addresses the difficulties
experienced in previous iterations with obtaining a stable
codebase while retaining the advantages of continuous
integration.
The main features of the process are:
<ul>
  <li>single-committer head -
developers will work on branches with
completed, tested work units passed to the I&amp;R team for
merging into head,</li>
  <li>clearly defined dependency
versions - components will be
developed against defined dependencies, rather than the latest
snapshot of the code. This prevents work on one component
adversely affecting another,</li>
  <li>nursery build - there will still be automatic builds of the
development code, in order to catch problems earlier.&nbsp; These
builds will produce SNAPSHOT jars, much as we do now, but from the
branched code.&nbsp; However, the
nursery build is purely for information and early warning of
inconsistencies between components.</li>
</ul>
<h2>Planning</h2>
<table style="width: 100%;" border="1">
  <tbody>
    <tr>
      <td>
      <div align="center"><b>Step</b></div>
      </td>
      <td style="width: 150px;">
      <div align="center"><b>Who</b></div>
      </td>
    </tr>
    <tr>
      <td>Functional and science
requirements for iteration
determined</td>
      <td style="width: 150px;">TSP</td>
    </tr>
    <tr>
      <td>First cut into
Implementation Cases published</td>
      <td style="width: 150px;">TechLead</td>
    </tr>
    <tr>
      <td>Tasks agreed and
reordered</td>
      <td style="width: 150px;">TechLead
+ WGL</td>
    </tr>
    <tr>
      <td>Tasks divided into Work
Units (of no more than an estimated 5
days effort, incl. acceptance) and assigned</td>
      <td style="width: 150px;">WGL
+ Dev</td>
    </tr>
    <tr>
      <td>Tasks and Work Units
(incl. detailed delivery and acceptance
criteria) documented on ImplCases Wiki pages</td>
      <td style="width: 150px;">TechLead,
WGL + Dev</td>
    </tr>
  </tbody>
</table>
<h2>Coding</h2>
<table style="width: 100%;" border="1">
  <tbody>
    <tr>
      <td>
      <div align="center"><b>Step</b></div>
      </td>
      <td style="width: 150px;">
      <div align="center"><b>Who</b></div>
      </td>
    </tr>
    <tr>
      <td>BugZilla ticket raised
for each Task and Work Unit,
dependencies shown</td>
      <td style="width: 150px;">TechLead
+ WGL</td>
    </tr>
    <tr>
      <td>New branch taken (using agreed
naming convention <a href="#1">[1]</a>)
for assigned Work Unit, status on ImplCases Wiki
changed to "Started" and BugZilla ticket updated <a href="#2">[2]</a></td>
      <td style="width: 150px;">Dev</td>
    </tr>
    <tr>
      <td>Branch tag is emailed to
I&amp;R so that they can include the
branch in the nursery build<br>
      </td>
      <td style="width: 150px;">Dev<br>
      </td>
    </tr>
    <tr>
      <td>Latest Accepted AstroGrid binaries downloaded and installed. <a
 href="#3">[3]</a></td>
      <td style="width: 150px;">Dev</td>
    </tr>
    <tr>
      <td><span style="text-decoration: underline;"></span><a href="#3"></a>Modify
component as appropriate, building against Accepted AstroGrid
dependencies.<br>
      </td>
      <td style="width: 150px;">Dev</td>
    </tr>
    <tr>
      <td>When the Work Unit is
implemented and local integration tests
pass, update to
the latest Accepted AstroGrid
binaries (if changed) and test again until no problems found (may
require several downloads if bug fixing takes a long time). <a
 href="#4">[4]</a><br>
      <br>
      <br>
      <div align="center">THERE
IS NO EXCUSE FOR THIS NOT TAKING
PLACE</div>
      </td>
      <td style="width: 150px;">Dev</td>
    </tr>
    <tr>
      <td>I&amp;R are notified
that branch is ready for acceptance
testing</td>
      <td style="width: 150px;">Dev</td>
    </tr>
  </tbody>
</table>
<h2>Acceptance Testing and Merging
into Head</h2>
<table style="width: 100%;" border="1">
  <tbody>
    <tr>
      <td>
      <div align="center"><b>Step</b></div>
      </td>
      <td style="width: 150px;">
      <div align="center"><b>Who</b></div>
      </td>
    </tr>
    <tr>
      <td><a
 href="http://wiki.astrogrid.org/bin/view/Astrogrid/HowToFollowTheIteration7ProcessUsingMavenAndEclipseTesters">Branch
is merged into
HEAD, built
and tested</a> (acceptance is based on passing the original
acceptance test)</td>
      <td style="width: 150px;">I&amp;R</td>
    </tr>
    <tr>
      <td>If the Work Unit is
accepted:
      <ul>
        <li>Merged code is checked
into head and tagged <a href="#5">[5]</a></li>
        <li>Project dependencies
are updated in maven-base<br>
        </li>
        <li>New binaries are built
and published ready for download <a href="#6">[6]</a></li>
        <li>Developers are
informed that a new build is available, should
they want to update.</li>
        <li>New binaries are
deployed as the new TechPreview</li>
        <li>Work Unit status on
ImplCases Wiki page set to
"Completed"</li>
        <li>BugZilla ticket closed</li>
      </ul>
      </td>
      <td style="width: 150px;">I&amp;R</td>
    </tr>
    <tr>
      <td>If the Work Unit is
rejected:
      <ul>
        <li>Reason for rejection
will be sent to developer</li>
        <li>Problem fixed and
cycle above repeated</li>
      </ul>
      </td>
      <td style="width: 150px;">I&amp;R
+ Dev</td>
    </tr>
  </tbody>
</table>
<br>
<h2>Automatic Builds and the
Nursery</h2>
I&amp;R will maintain a nursery area where the latest branches are
tested against each other before being put forward for acceptance
testing. To support this developers must notify I&amp;R of the
branch and module name they would like built. Regular, scheduled
builds will take place (as they are now against HEAD), of all the
nursery components against each other. The results will be
published as they are today. The results of these tests will
allow similar interoperability checks against emerging code but
by keeping such builds in the nursery, HEAD is kept clear for
acceptance testing only. Automated builds against HEAD will stop;
HEAD will be built on demand by the I&amp;R team as new branches
are accepted and new binaries published.
<br>
<br>
Notes:
<ol>
  <li><a name="1"></a><a href="componentabbreviations.html">{$COMPONENT}</a>_{$USER}_{$BUGZILLA-ID}
See <a href="http://wiki.astrogrid.org/bin/view/Support/UsingCVS">http://wiki.astrogrid.org/bin/view/Support/UsingCVS</a></li>
  <li><a name="2"></a>When
you branch, ensure that you add a
version tag to the point in head at which you branched, otherwise
I&amp;R will not be able to merge your code.&nbsp; Eclipse does
this
automatically when it creates a branch - if you use CVS from the
commandline it might not.&nbsp; You will probably need to branch
both
your component and auto-integration.</li>
  <li><a name="3"></a> A step-by-step guide showing how to do this
using <a
 href="http://wiki.astrogrid.org/bin/view/Astrogrid/HowToFollowTheIteration7ProcessUsingMavenAndEclipse">Maven
and Eclipse</a> is available.</li>
  <li><a name="4"></a>There
is therefore an incentive to get your
changes sent to I&amp;R for merging first!</li>
  <li><a name="5"></a>We
need a convention for tagging completed,
accepted work in head.&nbsp; This tag would also be used to label
the
binaries, thus when story 6.2 finishes we tag the code with
(e.g.) accepted6.2, and build astrogrid-common-6.2.jar etc.</li>
  <li><a name="6"></a>This
might need to be repeated a second time
to iron out any circular dependencies</li>
</ol>
Conditions:
<ol>
  <li>All developers must follow
the same procedures for this to
work</li>
  <li>All code, no matter how
trivial must be written on a branch
(i.e. no code fixes direct to HEAD)</li>
  <li>Developers must only branch
the code they intend to modify.
This avoids the proliferation of confusing and unnecessary tags
etc)</li>
  <li>Code merges and commits to
HEAD will be undertaken by the
I&amp;R team ONLY, no-one else; regular reports will be produced
to monitor this</li>
</ol>
</body>
</html>
